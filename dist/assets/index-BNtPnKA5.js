(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function d0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cy={exports:{}},Kl={},dy={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=Symbol.for("react.element"),h0=Symbol.for("react.portal"),f0=Symbol.for("react.fragment"),p0=Symbol.for("react.strict_mode"),m0=Symbol.for("react.profiler"),g0=Symbol.for("react.provider"),y0=Symbol.for("react.context"),v0=Symbol.for("react.forward_ref"),_0=Symbol.for("react.suspense"),x0=Symbol.for("react.memo"),w0=Symbol.for("react.lazy"),Op=Symbol.iterator;function E0(t){return t===null||typeof t!="object"?null:(t=Op&&t[Op]||t["@@iterator"],typeof t=="function"?t:null)}var hy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fy=Object.assign,py={};function Zs(t,e,n){this.props=t,this.context=e,this.refs=py,this.updater=n||hy}Zs.prototype.isReactComponent={};Zs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function my(){}my.prototype=Zs.prototype;function Qd(t,e,n){this.props=t,this.context=e,this.refs=py,this.updater=n||hy}var Yd=Qd.prototype=new my;Yd.constructor=Qd;fy(Yd,Zs.prototype);Yd.isPureReactComponent=!0;var Lp=Array.isArray,gy=Object.prototype.hasOwnProperty,Xd={current:null},yy={key:!0,ref:!0,__self:!0,__source:!0};function vy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)gy.call(e,r)&&!yy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:jo,type:t,key:i,ref:o,props:s,_owner:Xd.current}}function I0(t,e){return{$$typeof:jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jd(t){return typeof t=="object"&&t!==null&&t.$$typeof===jo}function T0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Mp=/\/+/g;function qu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T0(""+t.key):e.toString(36)}function Ma(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jo:case h0:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+qu(o,0):r,Lp(s)?(n="",t!=null&&(n=t.replace(Mp,"$&/")+"/"),Ma(s,e,n,"",function(h){return h})):s!=null&&(Jd(s)&&(s=I0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Mp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Lp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+qu(i,l);o+=Ma(i,e,n,u,s)}else if(u=E0(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+qu(i,l++),o+=Ma(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ma(t,e,n){if(t==null)return t;var r=[],s=0;return Ma(t,r,"","",function(i){return e.call(n,i,s++)}),r}function S0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Fa={transition:null},b0={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Fa,ReactCurrentOwner:Xd};function _y(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:ma,forEach:function(t,e,n){ma(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ma(t,function(){e++}),e},toArray:function(t){return ma(t,function(e){return e})||[]},only:function(t){if(!Jd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Zs;ie.Fragment=f0;ie.Profiler=m0;ie.PureComponent=Qd;ie.StrictMode=p0;ie.Suspense=_0;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b0;ie.act=_y;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)gy.call(e,u)&&!yy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:jo,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:y0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g0,_context:t},t.Consumer=t};ie.createElement=vy;ie.createFactory=function(t){var e=vy.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:v0,render:t}};ie.isValidElement=Jd;ie.lazy=function(t){return{$$typeof:w0,_payload:{_status:-1,_result:t},_init:S0}};ie.memo=function(t,e){return{$$typeof:x0,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Fa.transition;Fa.transition={};try{t()}finally{Fa.transition=e}};ie.unstable_act=_y;ie.useCallback=function(t,e){return _t.current.useCallback(t,e)};ie.useContext=function(t){return _t.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ie.useEffect=function(t,e){return _t.current.useEffect(t,e)};ie.useId=function(){return _t.current.useId()};ie.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return _t.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ie.useRef=function(t){return _t.current.useRef(t)};ie.useState=function(t){return _t.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return _t.current.useTransition()};ie.version="18.3.1";dy.exports=ie;var L=dy.exports;const xy=d0(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0=L,A0=Symbol.for("react.element"),P0=Symbol.for("react.fragment"),R0=Object.prototype.hasOwnProperty,N0=C0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k0={key:!0,ref:!0,__self:!0,__source:!0};function wy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)R0.call(e,r)&&!k0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:A0,type:t,key:i,ref:o,props:s,_owner:N0.current}}Kl.Fragment=P0;Kl.jsx=wy;Kl.jsxs=wy;cy.exports=Kl;var c=cy.exports,kc={},Ey={exports:{}},jt={},Iy={exports:{}},Ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var X=B.length;B.push(Y);e:for(;0<X;){var xe=X-1>>>1,z=B[xe];if(0<s(z,Y))B[xe]=Y,B[X]=z,X=xe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],X=B.pop();if(X!==Y){B[0]=X;e:for(var xe=0,z=B.length,K=z>>>1;xe<K;){var se=2*(xe+1)-1,ye=B[se],ve=se+1,pe=B[ve];if(0>s(ye,X))ve<z&&0>s(pe,ye)?(B[xe]=pe,B[ve]=X,xe=ve):(B[xe]=ye,B[se]=X,xe=se);else if(ve<z&&0>s(pe,X))B[xe]=pe,B[ve]=X,xe=ve;else break e}}return Y}function s(B,Y){var X=B.sortIndex-Y.sortIndex;return X!==0?X:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,g=null,y=3,b=!1,N=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=B)r(h),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(h)}}function C(B){if(S=!1,_(B),!N)if(n(u)!==null)N=!0,je(k);else{var Y=n(h);Y!==null&&We(C,Y.startTime-B)}}function k(B,Y){N=!1,S&&(S=!1,I(m),m=-1),b=!0;var X=y;try{for(_(Y),g=n(u);g!==null&&(!(g.expirationTime>Y)||B&&!R());){var xe=g.callback;if(typeof xe=="function"){g.callback=null,y=g.priorityLevel;var z=xe(g.expirationTime<=Y);Y=t.unstable_now(),typeof z=="function"?g.callback=z:g===n(u)&&r(u),_(Y)}else r(u);g=n(u)}if(g!==null)var K=!0;else{var se=n(h);se!==null&&We(C,se.startTime-Y),K=!1}return K}finally{g=null,y=X,b=!1}}var P=!1,v=null,m=-1,x=5,T=-1;function R(){return!(t.unstable_now()-T<x)}function D(){if(v!==null){var B=t.unstable_now();T=B;var Y=!0;try{Y=v(!0,B)}finally{Y?A():(P=!1,v=null)}}else P=!1}var A;if(typeof E=="function")A=function(){E(D)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Ee=J.port2;J.port1.onmessage=D,A=function(){Ee.postMessage(null)}}else A=function(){j(D,0)};function je(B){v=B,P||(P=!0,A())}function We(B,Y){m=j(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){N||b||(N=!0,je(k))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var X=y;y=Y;try{return B()}finally{y=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=y;y=B;try{return Y()}finally{y=X}},t.unstable_scheduleCallback=function(B,Y,X){var xe=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?xe+X:xe):X=xe,B){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,B={id:f++,callback:Y,priorityLevel:B,startTime:X,expirationTime:z,sortIndex:-1},X>xe?(B.sortIndex=X,e(h,B),n(u)===null&&B===n(h)&&(S?(I(m),m=-1):S=!0,We(C,X-xe))):(B.sortIndex=z,e(u,B),N||b||(N=!0,je(k))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var Y=y;return function(){var X=y;y=Y;try{return B.apply(this,arguments)}finally{y=X}}}})(Ty);Iy.exports=Ty;var D0=Iy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0=L,Dt=D0;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sy=new Set,oo={};function ts(t,e){Ls(t,e),Ls(t+"Capture",e)}function Ls(t,e){for(oo[t]=e,t=0;t<e.length;t++)Sy.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dc=Object.prototype.hasOwnProperty,V0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fp={},Up={};function O0(t){return Dc.call(Up,t)?!0:Dc.call(Fp,t)?!1:V0.test(t)?Up[t]=!0:(Fp[t]=!0,!1)}function L0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M0(t,e,n,r){if(e===null||typeof e>"u"||L0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zd=/[\-:]([a-z])/g;function eh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zd,eh);tt[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zd,eh);tt[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zd,eh);tt[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function th(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(M0(e,n,s,r)&&(n=null),r||s===null?O0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $n=j0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ga=Symbol.for("react.element"),ps=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),nh=Symbol.for("react.strict_mode"),jc=Symbol.for("react.profiler"),by=Symbol.for("react.provider"),Cy=Symbol.for("react.context"),rh=Symbol.for("react.forward_ref"),Vc=Symbol.for("react.suspense"),Oc=Symbol.for("react.suspense_list"),sh=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),Ay=Symbol.for("react.offscreen"),Bp=Symbol.iterator;function Ai(t){return t===null||typeof t!="object"?null:(t=Bp&&t[Bp]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Ku;function Li(t){if(Ku===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ku=e&&e[1]||""}return`
`+Ku+t}var Gu=!1;function Qu(t,e){if(!t||Gu)return"";Gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Gu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Li(t):""}function F0(t){switch(t.tag){case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return t=Qu(t.type,!1),t;case 11:return t=Qu(t.type.render,!1),t;case 1:return t=Qu(t.type,!0),t;default:return""}}function Lc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ms:return"Fragment";case ps:return"Portal";case jc:return"Profiler";case nh:return"StrictMode";case Vc:return"Suspense";case Oc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cy:return(t.displayName||"Context")+".Consumer";case by:return(t._context.displayName||"Context")+".Provider";case rh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sh:return e=t.displayName||null,e!==null?e:Lc(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return Lc(t(e))}catch{}}return null}function U0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lc(e);case 8:return e===nh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Py(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B0(t){var e=Py(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ya(t){t._valueTracker||(t._valueTracker=B0(t))}function Ry(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Py(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ol(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mc(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $p(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_r(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ny(t,e){e=e.checked,e!=null&&th(t,"checked",e,!1)}function Fc(t,e){Ny(t,e);var n=_r(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uc(t,e.type,_r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uc(t,e,n){(e!=="number"||ol(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mi=Array.isArray;function bs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_r(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Mi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_r(n)}}function ky(t,e){var n=_r(e.value),r=_r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var va,jy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(va=va||document.createElement("div"),va.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=va.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$0=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(t){$0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wi[e]=Wi[t]})});function Vy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wi.hasOwnProperty(t)&&Wi[t]?(""+e).trim():e+"px"}function Oy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Vy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var z0=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zc(t,e){if(e){if(z0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Hc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wc=null;function ih(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qc=null,Cs=null,As=null;function qp(t){if(t=Lo(t)){if(typeof qc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Jl(e),qc(t.stateNode,t.type,e))}}function Ly(t){Cs?As?As.push(t):As=[t]:Cs=t}function My(){if(Cs){var t=Cs,e=As;if(As=Cs=null,qp(t),e)for(t=0;t<e.length;t++)qp(e[t])}}function Fy(t,e){return t(e)}function Uy(){}var Yu=!1;function By(t,e,n){if(Yu)return t(e,n);Yu=!0;try{return Fy(t,e,n)}finally{Yu=!1,(Cs!==null||As!==null)&&(Uy(),My())}}function lo(t,e){var n=t.stateNode;if(n===null)return null;var r=Jl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Kc=!1;if(jn)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Kc=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Kc=!1}function H0(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var qi=!1,al=null,ll=!1,Gc=null,W0={onError:function(t){qi=!0,al=t}};function q0(t,e,n,r,s,i,o,l,u){qi=!1,al=null,H0.apply(W0,arguments)}function K0(t,e,n,r,s,i,o,l,u){if(q0.apply(this,arguments),qi){if(qi){var h=al;qi=!1,al=null}else throw Error(U(198));ll||(ll=!0,Gc=h)}}function ns(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $y(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kp(t){if(ns(t)!==t)throw Error(U(188))}function G0(t){var e=t.alternate;if(!e){if(e=ns(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Kp(s),t;if(i===r)return Kp(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function zy(t){return t=G0(t),t!==null?Hy(t):null}function Hy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hy(t);if(e!==null)return e;t=t.sibling}return null}var Wy=Dt.unstable_scheduleCallback,Gp=Dt.unstable_cancelCallback,Q0=Dt.unstable_shouldYield,Y0=Dt.unstable_requestPaint,Oe=Dt.unstable_now,X0=Dt.unstable_getCurrentPriorityLevel,oh=Dt.unstable_ImmediatePriority,qy=Dt.unstable_UserBlockingPriority,ul=Dt.unstable_NormalPriority,J0=Dt.unstable_LowPriority,Ky=Dt.unstable_IdlePriority,Gl=null,fn=null;function Z0(t){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Gl,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:nE,eE=Math.log,tE=Math.LN2;function nE(t){return t>>>=0,t===0?32:31-(eE(t)/tE|0)|0}var _a=64,xa=4194304;function Fi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Fi(l):(i&=o,i!==0&&(r=Fi(i)))}else o=n&~s,o!==0?r=Fi(o):i!==0&&(r=Fi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tn(e),s=1<<n,r|=t[n],e&=~s;return r}function rE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=rE(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Qc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gy(){var t=_a;return _a<<=1,!(_a&4194240)&&(_a=64),t}function Xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tn(e),t[e]=n}function iE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ah(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function Qy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yy,lh,Xy,Jy,Zy,Yc=!1,wa=[],ar=null,lr=null,ur=null,uo=new Map,co=new Map,Zn=[],oE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qp(t,e){switch(t){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":uo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(e.pointerId)}}function Ri(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Lo(e),e!==null&&lh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function aE(t,e,n,r,s){switch(e){case"focusin":return ar=Ri(ar,t,e,n,r,s),!0;case"dragenter":return lr=Ri(lr,t,e,n,r,s),!0;case"mouseover":return ur=Ri(ur,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return uo.set(i,Ri(uo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,co.set(i,Ri(co.get(i)||null,t,e,n,r,s)),!0}return!1}function ev(t){var e=Or(t.target);if(e!==null){var n=ns(e);if(n!==null){if(e=n.tag,e===13){if(e=$y(n),e!==null){t.blockedOn=e,Zy(t.priority,function(){Xy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ua(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wc=r,n.target.dispatchEvent(r),Wc=null}else return e=Lo(n),e!==null&&lh(e),t.blockedOn=n,!1;e.shift()}return!0}function Yp(t,e,n){Ua(t)&&n.delete(e)}function lE(){Yc=!1,ar!==null&&Ua(ar)&&(ar=null),lr!==null&&Ua(lr)&&(lr=null),ur!==null&&Ua(ur)&&(ur=null),uo.forEach(Yp),co.forEach(Yp)}function Ni(t,e){t.blockedOn===e&&(t.blockedOn=null,Yc||(Yc=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,lE)))}function ho(t){function e(s){return Ni(s,t)}if(0<wa.length){Ni(wa[0],t);for(var n=1;n<wa.length;n++){var r=wa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ar!==null&&Ni(ar,t),lr!==null&&Ni(lr,t),ur!==null&&Ni(ur,t),uo.forEach(e),co.forEach(e),n=0;n<Zn.length;n++)r=Zn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)ev(n),n.blockedOn===null&&Zn.shift()}var Ps=$n.ReactCurrentBatchConfig,dl=!0;function uE(t,e,n,r){var s=me,i=Ps.transition;Ps.transition=null;try{me=1,uh(t,e,n,r)}finally{me=s,Ps.transition=i}}function cE(t,e,n,r){var s=me,i=Ps.transition;Ps.transition=null;try{me=4,uh(t,e,n,r)}finally{me=s,Ps.transition=i}}function uh(t,e,n,r){if(dl){var s=Xc(t,e,n,r);if(s===null)ac(t,e,r,hl,n),Qp(t,r);else if(aE(s,t,e,n,r))r.stopPropagation();else if(Qp(t,r),e&4&&-1<oE.indexOf(t)){for(;s!==null;){var i=Lo(s);if(i!==null&&Yy(i),i=Xc(t,e,n,r),i===null&&ac(t,e,r,hl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ac(t,e,r,null,n)}}var hl=null;function Xc(t,e,n,r){if(hl=null,t=ih(r),t=Or(t),t!==null)if(e=ns(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$y(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hl=t,null}function tv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X0()){case oh:return 1;case qy:return 4;case ul:case J0:return 16;case Ky:return 536870912;default:return 16}default:return 16}}var sr=null,ch=null,Ba=null;function nv(){if(Ba)return Ba;var t,e=ch,n=e.length,r,s="value"in sr?sr.value:sr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ba=s.slice(t,1<r?1-r:void 0)}function $a(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ea(){return!0}function Xp(){return!1}function Vt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ea:Xp,this.isPropagationStopped=Xp,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),e}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dh=Vt(ei),Oo=Re({},ei,{view:0,detail:0}),dE=Vt(Oo),Ju,Zu,ki,Ql=Re({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ki&&(ki&&t.type==="mousemove"?(Ju=t.screenX-ki.screenX,Zu=t.screenY-ki.screenY):Zu=Ju=0,ki=t),Ju)},movementY:function(t){return"movementY"in t?t.movementY:Zu}}),Jp=Vt(Ql),hE=Re({},Ql,{dataTransfer:0}),fE=Vt(hE),pE=Re({},Oo,{relatedTarget:0}),ec=Vt(pE),mE=Re({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),gE=Vt(mE),yE=Re({},ei,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vE=Vt(yE),_E=Re({},ei,{data:0}),Zp=Vt(_E),xE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EE[t])?!!e[t]:!1}function hh(){return IE}var TE=Re({},Oo,{key:function(t){if(t.key){var e=xE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$a(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hh,charCode:function(t){return t.type==="keypress"?$a(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$a(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SE=Vt(TE),bE=Re({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),em=Vt(bE),CE=Re({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hh}),AE=Vt(CE),PE=Re({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),RE=Vt(PE),NE=Re({},Ql,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kE=Vt(NE),DE=[9,13,27,32],fh=jn&&"CompositionEvent"in window,Ki=null;jn&&"documentMode"in document&&(Ki=document.documentMode);var jE=jn&&"TextEvent"in window&&!Ki,rv=jn&&(!fh||Ki&&8<Ki&&11>=Ki),tm=" ",nm=!1;function sv(t,e){switch(t){case"keyup":return DE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function VE(t,e){switch(t){case"compositionend":return iv(e);case"keypress":return e.which!==32?null:(nm=!0,tm);case"textInput":return t=e.data,t===tm&&nm?null:t;default:return null}}function OE(t,e){if(gs)return t==="compositionend"||!fh&&sv(t,e)?(t=nv(),Ba=ch=sr=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rv&&e.locale!=="ko"?null:e.data;default:return null}}var LE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LE[t.type]:e==="textarea"}function ov(t,e,n,r){Ly(r),e=fl(e,"onChange"),0<e.length&&(n=new dh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gi=null,fo=null;function ME(t){yv(t,0)}function Yl(t){var e=_s(t);if(Ry(e))return t}function FE(t,e){if(t==="change")return e}var av=!1;if(jn){var tc;if(jn){var nc="oninput"in document;if(!nc){var sm=document.createElement("div");sm.setAttribute("oninput","return;"),nc=typeof sm.oninput=="function"}tc=nc}else tc=!1;av=tc&&(!document.documentMode||9<document.documentMode)}function im(){Gi&&(Gi.detachEvent("onpropertychange",lv),fo=Gi=null)}function lv(t){if(t.propertyName==="value"&&Yl(fo)){var e=[];ov(e,fo,t,ih(t)),By(ME,e)}}function UE(t,e,n){t==="focusin"?(im(),Gi=e,fo=n,Gi.attachEvent("onpropertychange",lv)):t==="focusout"&&im()}function BE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yl(fo)}function $E(t,e){if(t==="click")return Yl(e)}function zE(t,e){if(t==="input"||t==="change")return Yl(e)}function HE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:HE;function po(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Dc.call(e,s)||!on(t[s],e[s]))return!1}return!0}function om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function am(t,e){var n=om(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=om(n)}}function uv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cv(){for(var t=window,e=ol();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ol(t.document)}return e}function ph(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WE(t){var e=cv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uv(n.ownerDocument.documentElement,n)){if(r!==null&&ph(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=am(n,i);var o=am(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qE=jn&&"documentMode"in document&&11>=document.documentMode,ys=null,Jc=null,Qi=null,Zc=!1;function lm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zc||ys==null||ys!==ol(r)||(r=ys,"selectionStart"in r&&ph(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qi&&po(Qi,r)||(Qi=r,r=fl(Jc,"onSelect"),0<r.length&&(e=new dh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ys)))}function Ia(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vs={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionend:Ia("Transition","TransitionEnd")},rc={},dv={};jn&&(dv=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Xl(t){if(rc[t])return rc[t];if(!vs[t])return t;var e=vs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dv)return rc[t]=e[n];return t}var hv=Xl("animationend"),fv=Xl("animationiteration"),pv=Xl("animationstart"),mv=Xl("transitionend"),gv=new Map,um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){gv.set(t,e),ts(e,[t])}for(var sc=0;sc<um.length;sc++){var ic=um[sc],KE=ic.toLowerCase(),GE=ic[0].toUpperCase()+ic.slice(1);Sr(KE,"on"+GE)}Sr(hv,"onAnimationEnd");Sr(fv,"onAnimationIteration");Sr(pv,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(mv,"onTransitionEnd");Ls("onMouseEnter",["mouseout","mouseover"]);Ls("onMouseLeave",["mouseout","mouseover"]);Ls("onPointerEnter",["pointerout","pointerover"]);Ls("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ui));function cm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K0(r,e,void 0,t),t.currentTarget=null}function yv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;cm(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;cm(s,l,h),i=u}}}if(ll)throw t=Gc,ll=!1,Gc=null,t}function Te(t,e){var n=e[sd];n===void 0&&(n=e[sd]=new Set);var r=t+"__bubble";n.has(r)||(vv(e,t,2,!1),n.add(r))}function oc(t,e,n){var r=0;e&&(r|=4),vv(n,t,r,e)}var Ta="_reactListening"+Math.random().toString(36).slice(2);function mo(t){if(!t[Ta]){t[Ta]=!0,Sy.forEach(function(n){n!=="selectionchange"&&(QE.has(n)||oc(n,!1,t),oc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ta]||(e[Ta]=!0,oc("selectionchange",!1,e))}}function vv(t,e,n,r){switch(tv(e)){case 1:var s=uE;break;case 4:s=cE;break;default:s=uh}n=s.bind(null,e,n,t),s=void 0,!Kc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ac(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Or(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}By(function(){var h=i,f=ih(n),g=[];e:{var y=gv.get(t);if(y!==void 0){var b=dh,N=t;switch(t){case"keypress":if($a(n)===0)break e;case"keydown":case"keyup":b=SE;break;case"focusin":N="focus",b=ec;break;case"focusout":N="blur",b=ec;break;case"beforeblur":case"afterblur":b=ec;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Jp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=fE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=AE;break;case hv:case fv:case pv:b=gE;break;case mv:b=RE;break;case"scroll":b=dE;break;case"wheel":b=kE;break;case"copy":case"cut":case"paste":b=vE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=em}var S=(e&4)!==0,j=!S&&t==="scroll",I=S?y!==null?y+"Capture":null:y;S=[];for(var E=h,_;E!==null;){_=E;var C=_.stateNode;if(_.tag===5&&C!==null&&(_=C,I!==null&&(C=lo(E,I),C!=null&&S.push(go(E,C,_)))),j)break;E=E.return}0<S.length&&(y=new b(y,N,null,n,f),g.push({event:y,listeners:S}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",y&&n!==Wc&&(N=n.relatedTarget||n.fromElement)&&(Or(N)||N[Vn]))break e;if((b||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,b?(N=n.relatedTarget||n.toElement,b=h,N=N?Or(N):null,N!==null&&(j=ns(N),N!==j||N.tag!==5&&N.tag!==6)&&(N=null)):(b=null,N=h),b!==N)){if(S=Jp,C="onMouseLeave",I="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(S=em,C="onPointerLeave",I="onPointerEnter",E="pointer"),j=b==null?y:_s(b),_=N==null?y:_s(N),y=new S(C,E+"leave",b,n,f),y.target=j,y.relatedTarget=_,C=null,Or(f)===h&&(S=new S(I,E+"enter",N,n,f),S.target=_,S.relatedTarget=j,C=S),j=C,b&&N)t:{for(S=b,I=N,E=0,_=S;_;_=cs(_))E++;for(_=0,C=I;C;C=cs(C))_++;for(;0<E-_;)S=cs(S),E--;for(;0<_-E;)I=cs(I),_--;for(;E--;){if(S===I||I!==null&&S===I.alternate)break t;S=cs(S),I=cs(I)}S=null}else S=null;b!==null&&dm(g,y,b,S,!1),N!==null&&j!==null&&dm(g,j,N,S,!0)}}e:{if(y=h?_s(h):window,b=y.nodeName&&y.nodeName.toLowerCase(),b==="select"||b==="input"&&y.type==="file")var k=FE;else if(rm(y))if(av)k=zE;else{k=BE;var P=UE}else(b=y.nodeName)&&b.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(k=$E);if(k&&(k=k(t,h))){ov(g,k,n,f);break e}P&&P(t,y,h),t==="focusout"&&(P=y._wrapperState)&&P.controlled&&y.type==="number"&&Uc(y,"number",y.value)}switch(P=h?_s(h):window,t){case"focusin":(rm(P)||P.contentEditable==="true")&&(ys=P,Jc=h,Qi=null);break;case"focusout":Qi=Jc=ys=null;break;case"mousedown":Zc=!0;break;case"contextmenu":case"mouseup":case"dragend":Zc=!1,lm(g,n,f);break;case"selectionchange":if(qE)break;case"keydown":case"keyup":lm(g,n,f)}var v;if(fh)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else gs?sv(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(rv&&n.locale!=="ko"&&(gs||m!=="onCompositionStart"?m==="onCompositionEnd"&&gs&&(v=nv()):(sr=f,ch="value"in sr?sr.value:sr.textContent,gs=!0)),P=fl(h,m),0<P.length&&(m=new Zp(m,t,null,n,f),g.push({event:m,listeners:P}),v?m.data=v:(v=iv(n),v!==null&&(m.data=v)))),(v=jE?VE(t,n):OE(t,n))&&(h=fl(h,"onBeforeInput"),0<h.length&&(f=new Zp("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:h}),f.data=v))}yv(g,e)})}function go(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=lo(t,n),i!=null&&r.unshift(go(t,i,s)),i=lo(t,e),i!=null&&r.push(go(t,i,s))),t=t.return}return r}function cs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=lo(n,i),u!=null&&o.unshift(go(n,u,l))):s||(u=lo(n,i),u!=null&&o.push(go(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var YE=/\r\n?/g,XE=/\u0000|\uFFFD/g;function hm(t){return(typeof t=="string"?t:""+t).replace(YE,`
`).replace(XE,"")}function Sa(t,e,n){if(e=hm(e),hm(t)!==e&&n)throw Error(U(425))}function pl(){}var ed=null,td=null;function nd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rd=typeof setTimeout=="function"?setTimeout:void 0,JE=typeof clearTimeout=="function"?clearTimeout:void 0,fm=typeof Promise=="function"?Promise:void 0,ZE=typeof queueMicrotask=="function"?queueMicrotask:typeof fm<"u"?function(t){return fm.resolve(null).then(t).catch(eI)}:rd;function eI(t){setTimeout(function(){throw t})}function lc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ho(e)}function cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ti=Math.random().toString(36).slice(2),hn="__reactFiber$"+ti,yo="__reactProps$"+ti,Vn="__reactContainer$"+ti,sd="__reactEvents$"+ti,tI="__reactListeners$"+ti,nI="__reactHandles$"+ti;function Or(t){var e=t[hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vn]||n[hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pm(t);t!==null;){if(n=t[hn])return n;t=pm(t)}return e}t=n,n=t.parentNode}return null}function Lo(t){return t=t[hn]||t[Vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Jl(t){return t[yo]||null}var id=[],xs=-1;function br(t){return{current:t}}function be(t){0>xs||(t.current=id[xs],id[xs]=null,xs--)}function we(t,e){xs++,id[xs]=t.current,t.current=e}var xr={},dt=br(xr),It=br(!1),Wr=xr;function Ms(t,e){var n=t.type.contextTypes;if(!n)return xr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Tt(t){return t=t.childContextTypes,t!=null}function ml(){be(It),be(dt)}function mm(t,e,n){if(dt.current!==xr)throw Error(U(168));we(dt,e),we(It,n)}function _v(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,U0(t)||"Unknown",s));return Re({},n,r)}function gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,Wr=dt.current,we(dt,t),we(It,It.current),!0}function gm(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=_v(t,e,Wr),r.__reactInternalMemoizedMergedChildContext=t,be(It),be(dt),we(dt,t)):be(It),we(It,n)}var Tn=null,Zl=!1,uc=!1;function xv(t){Tn===null?Tn=[t]:Tn.push(t)}function rI(t){Zl=!0,xv(t)}function Cr(){if(!uc&&Tn!==null){uc=!0;var t=0,e=me;try{var n=Tn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,Zl=!1}catch(s){throw Tn!==null&&(Tn=Tn.slice(t+1)),Wy(oh,Cr),s}finally{me=e,uc=!1}}return null}var ws=[],Es=0,yl=null,vl=0,Mt=[],Ft=0,qr=null,bn=1,Cn="";function Dr(t,e){ws[Es++]=vl,ws[Es++]=yl,yl=t,vl=e}function wv(t,e,n){Mt[Ft++]=bn,Mt[Ft++]=Cn,Mt[Ft++]=qr,qr=t;var r=bn;t=Cn;var s=32-tn(r)-1;r&=~(1<<s),n+=1;var i=32-tn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,bn=1<<32-tn(e)+s|n<<s|r,Cn=i+t}else bn=1<<i|n<<s|r,Cn=t}function mh(t){t.return!==null&&(Dr(t,1),wv(t,1,0))}function gh(t){for(;t===yl;)yl=ws[--Es],ws[Es]=null,vl=ws[--Es],ws[Es]=null;for(;t===qr;)qr=Mt[--Ft],Mt[Ft]=null,Cn=Mt[--Ft],Mt[Ft]=null,bn=Mt[--Ft],Mt[Ft]=null}var kt=null,Nt=null,Ce=!1,Zt=null;function Ev(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ym(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kt=t,Nt=cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kt=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qr!==null?{id:bn,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kt=t,Nt=null,!0):!1;default:return!1}}function od(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ad(t){if(Ce){var e=Nt;if(e){var n=e;if(!ym(t,e)){if(od(t))throw Error(U(418));e=cr(n.nextSibling);var r=kt;e&&ym(t,e)?Ev(r,n):(t.flags=t.flags&-4097|2,Ce=!1,kt=t)}}else{if(od(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ce=!1,kt=t}}}function vm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kt=t}function ba(t){if(t!==kt)return!1;if(!Ce)return vm(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nd(t.type,t.memoizedProps)),e&&(e=Nt)){if(od(t))throw Iv(),Error(U(418));for(;e;)Ev(t,e),e=cr(e.nextSibling)}if(vm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=kt?cr(t.stateNode.nextSibling):null;return!0}function Iv(){for(var t=Nt;t;)t=cr(t.nextSibling)}function Fs(){Nt=kt=null,Ce=!1}function yh(t){Zt===null?Zt=[t]:Zt.push(t)}var sI=$n.ReactCurrentBatchConfig;function Di(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ca(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _m(t){var e=t._init;return e(t._payload)}function Tv(t){function e(I,E){if(t){var _=I.deletions;_===null?(I.deletions=[E],I.flags|=16):_.push(E)}}function n(I,E){if(!t)return null;for(;E!==null;)e(I,E),E=E.sibling;return null}function r(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function s(I,E){return I=pr(I,E),I.index=0,I.sibling=null,I}function i(I,E,_){return I.index=_,t?(_=I.alternate,_!==null?(_=_.index,_<E?(I.flags|=2,E):_):(I.flags|=2,E)):(I.flags|=1048576,E)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,E,_,C){return E===null||E.tag!==6?(E=gc(_,I.mode,C),E.return=I,E):(E=s(E,_),E.return=I,E)}function u(I,E,_,C){var k=_.type;return k===ms?f(I,E,_.props.children,C,_.key):E!==null&&(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xn&&_m(k)===E.type)?(C=s(E,_.props),C.ref=Di(I,E,_),C.return=I,C):(C=Qa(_.type,_.key,_.props,null,I.mode,C),C.ref=Di(I,E,_),C.return=I,C)}function h(I,E,_,C){return E===null||E.tag!==4||E.stateNode.containerInfo!==_.containerInfo||E.stateNode.implementation!==_.implementation?(E=yc(_,I.mode,C),E.return=I,E):(E=s(E,_.children||[]),E.return=I,E)}function f(I,E,_,C,k){return E===null||E.tag!==7?(E=$r(_,I.mode,C,k),E.return=I,E):(E=s(E,_),E.return=I,E)}function g(I,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return E=gc(""+E,I.mode,_),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ga:return _=Qa(E.type,E.key,E.props,null,I.mode,_),_.ref=Di(I,null,E),_.return=I,_;case ps:return E=yc(E,I.mode,_),E.return=I,E;case Xn:var C=E._init;return g(I,C(E._payload),_)}if(Mi(E)||Ai(E))return E=$r(E,I.mode,_,null),E.return=I,E;Ca(I,E)}return null}function y(I,E,_,C){var k=E!==null?E.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:l(I,E,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ga:return _.key===k?u(I,E,_,C):null;case ps:return _.key===k?h(I,E,_,C):null;case Xn:return k=_._init,y(I,E,k(_._payload),C)}if(Mi(_)||Ai(_))return k!==null?null:f(I,E,_,C,null);Ca(I,_)}return null}function b(I,E,_,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return I=I.get(_)||null,l(E,I,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ga:return I=I.get(C.key===null?_:C.key)||null,u(E,I,C,k);case ps:return I=I.get(C.key===null?_:C.key)||null,h(E,I,C,k);case Xn:var P=C._init;return b(I,E,_,P(C._payload),k)}if(Mi(C)||Ai(C))return I=I.get(_)||null,f(E,I,C,k,null);Ca(E,C)}return null}function N(I,E,_,C){for(var k=null,P=null,v=E,m=E=0,x=null;v!==null&&m<_.length;m++){v.index>m?(x=v,v=null):x=v.sibling;var T=y(I,v,_[m],C);if(T===null){v===null&&(v=x);break}t&&v&&T.alternate===null&&e(I,v),E=i(T,E,m),P===null?k=T:P.sibling=T,P=T,v=x}if(m===_.length)return n(I,v),Ce&&Dr(I,m),k;if(v===null){for(;m<_.length;m++)v=g(I,_[m],C),v!==null&&(E=i(v,E,m),P===null?k=v:P.sibling=v,P=v);return Ce&&Dr(I,m),k}for(v=r(I,v);m<_.length;m++)x=b(v,I,m,_[m],C),x!==null&&(t&&x.alternate!==null&&v.delete(x.key===null?m:x.key),E=i(x,E,m),P===null?k=x:P.sibling=x,P=x);return t&&v.forEach(function(R){return e(I,R)}),Ce&&Dr(I,m),k}function S(I,E,_,C){var k=Ai(_);if(typeof k!="function")throw Error(U(150));if(_=k.call(_),_==null)throw Error(U(151));for(var P=k=null,v=E,m=E=0,x=null,T=_.next();v!==null&&!T.done;m++,T=_.next()){v.index>m?(x=v,v=null):x=v.sibling;var R=y(I,v,T.value,C);if(R===null){v===null&&(v=x);break}t&&v&&R.alternate===null&&e(I,v),E=i(R,E,m),P===null?k=R:P.sibling=R,P=R,v=x}if(T.done)return n(I,v),Ce&&Dr(I,m),k;if(v===null){for(;!T.done;m++,T=_.next())T=g(I,T.value,C),T!==null&&(E=i(T,E,m),P===null?k=T:P.sibling=T,P=T);return Ce&&Dr(I,m),k}for(v=r(I,v);!T.done;m++,T=_.next())T=b(v,I,m,T.value,C),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?m:T.key),E=i(T,E,m),P===null?k=T:P.sibling=T,P=T);return t&&v.forEach(function(D){return e(I,D)}),Ce&&Dr(I,m),k}function j(I,E,_,C){if(typeof _=="object"&&_!==null&&_.type===ms&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ga:e:{for(var k=_.key,P=E;P!==null;){if(P.key===k){if(k=_.type,k===ms){if(P.tag===7){n(I,P.sibling),E=s(P,_.props.children),E.return=I,I=E;break e}}else if(P.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xn&&_m(k)===P.type){n(I,P.sibling),E=s(P,_.props),E.ref=Di(I,P,_),E.return=I,I=E;break e}n(I,P);break}else e(I,P);P=P.sibling}_.type===ms?(E=$r(_.props.children,I.mode,C,_.key),E.return=I,I=E):(C=Qa(_.type,_.key,_.props,null,I.mode,C),C.ref=Di(I,E,_),C.return=I,I=C)}return o(I);case ps:e:{for(P=_.key;E!==null;){if(E.key===P)if(E.tag===4&&E.stateNode.containerInfo===_.containerInfo&&E.stateNode.implementation===_.implementation){n(I,E.sibling),E=s(E,_.children||[]),E.return=I,I=E;break e}else{n(I,E);break}else e(I,E);E=E.sibling}E=yc(_,I.mode,C),E.return=I,I=E}return o(I);case Xn:return P=_._init,j(I,E,P(_._payload),C)}if(Mi(_))return N(I,E,_,C);if(Ai(_))return S(I,E,_,C);Ca(I,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,E!==null&&E.tag===6?(n(I,E.sibling),E=s(E,_),E.return=I,I=E):(n(I,E),E=gc(_,I.mode,C),E.return=I,I=E),o(I)):n(I,E)}return j}var Us=Tv(!0),Sv=Tv(!1),_l=br(null),xl=null,Is=null,vh=null;function _h(){vh=Is=xl=null}function xh(t){var e=_l.current;be(_l),t._currentValue=e}function ld(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){xl=t,vh=Is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Ht(t){var e=t._currentValue;if(vh!==t)if(t={context:t,memoizedValue:e,next:null},Is===null){if(xl===null)throw Error(U(308));Is=t,xl.dependencies={lanes:0,firstContext:t}}else Is=Is.next=t;return e}var Lr=null;function wh(t){Lr===null?Lr=[t]:Lr.push(t)}function bv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,wh(e)):(n.next=s.next,s.next=n),e.interleaved=n,On(t,r)}function On(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jn=!1;function Eh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,On(t,n)}return s=r.interleaved,s===null?(e.next=e,wh(r)):(e.next=s.next,s.next=e),r.interleaved=e,On(t,n)}function za(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ah(t,n)}}function xm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wl(t,e,n,r){var s=t.updateQueue;Jn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,f=h=u=null,l=i;do{var y=l.lane,b=l.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,S=l;switch(y=e,b=n,S.tag){case 1:if(N=S.payload,typeof N=="function"){g=N.call(b,g,y);break e}g=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=S.payload,y=typeof N=="function"?N.call(b,g,y):N,y==null)break e;g=Re({},g,y);break e;case 2:Jn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else b={eventTime:b,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=b,u=g):f=f.next=b,o|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(f===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Gr|=o,t.lanes=o,t.memoizedState=g}}function wm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Mo={},pn=br(Mo),vo=br(Mo),_o=br(Mo);function Mr(t){if(t===Mo)throw Error(U(174));return t}function Ih(t,e){switch(we(_o,e),we(vo,t),we(pn,Mo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$c(e,t)}be(pn),we(pn,e)}function Bs(){be(pn),be(vo),be(_o)}function Av(t){Mr(_o.current);var e=Mr(pn.current),n=$c(e,t.type);e!==n&&(we(vo,t),we(pn,n))}function Th(t){vo.current===t&&(be(pn),be(vo))}var Ae=br(0);function El(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cc=[];function Sh(){for(var t=0;t<cc.length;t++)cc[t]._workInProgressVersionPrimary=null;cc.length=0}var Ha=$n.ReactCurrentDispatcher,dc=$n.ReactCurrentBatchConfig,Kr=0,Pe=null,$e=null,Ke=null,Il=!1,Yi=!1,xo=0,iI=0;function it(){throw Error(U(321))}function bh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function Ch(t,e,n,r,s,i){if(Kr=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ha.current=t===null||t.memoizedState===null?uI:cI,t=n(r,s),Yi){i=0;do{if(Yi=!1,xo=0,25<=i)throw Error(U(301));i+=1,Ke=$e=null,e.updateQueue=null,Ha.current=dI,t=n(r,s)}while(Yi)}if(Ha.current=Tl,e=$e!==null&&$e.next!==null,Kr=0,Ke=$e=Pe=null,Il=!1,e)throw Error(U(300));return t}function Ah(){var t=xo!==0;return xo=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Pe.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Wt(){if($e===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ke===null?Pe.memoizedState:Ke.next;if(e!==null)Ke=e,$e=t;else{if(t===null)throw Error(U(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ke===null?Pe.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function wo(t,e){return typeof e=="function"?e(t):e}function hc(t){var e=Wt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var f=h.lane;if((Kr&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,o=r):u=u.next=g,Pe.lanes|=f,Gr|=f}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,on(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,Gr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fc(t){var e=Wt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Pv(){}function Rv(t,e){var n=Pe,r=Wt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,Et=!0),r=r.queue,Ph(Dv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Eo(9,kv.bind(null,n,r,s,e),void 0,null),Ge===null)throw Error(U(349));Kr&30||Nv(n,e,s)}return s}function Nv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kv(t,e,n,r){e.value=n,e.getSnapshot=r,jv(e)&&Vv(t)}function Dv(t,e,n){return n(function(){jv(e)&&Vv(t)})}function jv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function Vv(t){var e=On(t,1);e!==null&&nn(e,t,1,-1)}function Em(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:t},e.queue=t,t=t.dispatch=lI.bind(null,Pe,t),[e.memoizedState,t]}function Eo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ov(){return Wt().memoizedState}function Wa(t,e,n,r){var s=dn();Pe.flags|=t,s.memoizedState=Eo(1|e,n,void 0,r===void 0?null:r)}function eu(t,e,n,r){var s=Wt();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&bh(r,o.deps)){s.memoizedState=Eo(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=Eo(1|e,n,i,r)}function Im(t,e){return Wa(8390656,8,t,e)}function Ph(t,e){return eu(2048,8,t,e)}function Lv(t,e){return eu(4,2,t,e)}function Mv(t,e){return eu(4,4,t,e)}function Fv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uv(t,e,n){return n=n!=null?n.concat([t]):null,eu(4,4,Fv.bind(null,e,t),n)}function Rh(){}function Bv(t,e){var n=Wt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $v(t,e){var n=Wt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zv(t,e,n){return Kr&21?(on(n,e)||(n=Gy(),Pe.lanes|=n,Gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function oI(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=dc.transition;dc.transition={};try{t(!1),e()}finally{me=n,dc.transition=r}}function Hv(){return Wt().memoizedState}function aI(t,e,n){var r=fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wv(t))qv(e,n);else if(n=bv(t,e,n,r),n!==null){var s=gt();nn(n,t,r,s),Kv(n,e,r)}}function lI(t,e,n){var r=fr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wv(t))qv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,on(l,o)){var u=e.interleaved;u===null?(s.next=s,wh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=bv(t,e,s,r),n!==null&&(s=gt(),nn(n,t,r,s),Kv(n,e,r))}}function Wv(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function qv(t,e){Yi=Il=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ah(t,n)}}var Tl={readContext:Ht,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},uI={readContext:Ht,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Ht,useEffect:Im,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wa(4194308,4,Fv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wa(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aI.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:Em,useDebugValue:Rh,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=Em(!1),e=t[0];return t=oI.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=dn();if(Ce){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ge===null)throw Error(U(349));Kr&30||Nv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Im(Dv.bind(null,r,i,t),[t]),r.flags|=2048,Eo(9,kv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dn(),e=Ge.identifierPrefix;if(Ce){var n=Cn,r=bn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cI={readContext:Ht,useCallback:Bv,useContext:Ht,useEffect:Ph,useImperativeHandle:Uv,useInsertionEffect:Lv,useLayoutEffect:Mv,useMemo:$v,useReducer:hc,useRef:Ov,useState:function(){return hc(wo)},useDebugValue:Rh,useDeferredValue:function(t){var e=Wt();return zv(e,$e.memoizedState,t)},useTransition:function(){var t=hc(wo)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:Pv,useSyncExternalStore:Rv,useId:Hv,unstable_isNewReconciler:!1},dI={readContext:Ht,useCallback:Bv,useContext:Ht,useEffect:Ph,useImperativeHandle:Uv,useInsertionEffect:Lv,useLayoutEffect:Mv,useMemo:$v,useReducer:fc,useRef:Ov,useState:function(){return fc(wo)},useDebugValue:Rh,useDeferredValue:function(t){var e=Wt();return $e===null?e.memoizedState=t:zv(e,$e.memoizedState,t)},useTransition:function(){var t=fc(wo)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:Pv,useSyncExternalStore:Rv,useId:Hv,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ud(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tu={isMounted:function(t){return(t=t._reactInternals)?ns(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gt(),s=fr(t),i=kn(r,s);i.payload=e,n!=null&&(i.callback=n),e=dr(t,i,s),e!==null&&(nn(e,t,s,r),za(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gt(),s=fr(t),i=kn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=dr(t,i,s),e!==null&&(nn(e,t,s,r),za(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gt(),r=fr(t),s=kn(n,r);s.tag=2,e!=null&&(s.callback=e),e=dr(t,s,r),e!==null&&(nn(e,t,r,n),za(e,t,r))}};function Tm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!po(n,r)||!po(s,i):!0}function Gv(t,e,n){var r=!1,s=xr,i=e.contextType;return typeof i=="object"&&i!==null?i=Ht(i):(s=Tt(e)?Wr:dt.current,r=e.contextTypes,i=(r=r!=null)?Ms(t,s):xr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Sm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tu.enqueueReplaceState(e,e.state,null)}function cd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Eh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ht(i):(i=Tt(e)?Wr:dt.current,s.context=Ms(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ud(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&tu.enqueueReplaceState(s,s.state,null),wl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $s(t,e){try{var n="",r=e;do n+=F0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hI=typeof WeakMap=="function"?WeakMap:Map;function Qv(t,e,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bl||(bl=!0,wd=r),dd(t,e)},n}function Yv(t,e,n){n=kn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dd(t,e),typeof r!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=bI.bind(null,t,e,n),e.then(t,t))}function Cm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Am(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kn(-1,1),e.tag=2,dr(n,e,1))),n.lanes|=1),t)}var fI=$n.ReactCurrentOwner,Et=!1;function mt(t,e,n,r){e.child=t===null?Sv(e,null,n,r):Us(e,t.child,n,r)}function Pm(t,e,n,r,s){n=n.render;var i=e.ref;return Rs(e,s),r=Ch(t,e,n,r,i,s),n=Ah(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ln(t,e,s)):(Ce&&n&&mh(e),e.flags|=1,mt(t,e,r,s),e.child)}function Rm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Mh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Xv(t,e,i,r,s)):(t=Qa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:po,n(o,r)&&t.ref===e.ref)return Ln(t,e,s)}return e.flags|=1,t=pr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Xv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(po(i,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Ln(t,e,s)}return hd(t,e,n,r,s)}function Jv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Ss,Rt),Rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(Ss,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(Ss,Rt),Rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(Ss,Rt),Rt|=r;return mt(t,e,s,n),e.child}function Zv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hd(t,e,n,r,s){var i=Tt(n)?Wr:dt.current;return i=Ms(e,i),Rs(e,s),n=Ch(t,e,n,r,i,s),r=Ah(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ln(t,e,s)):(Ce&&r&&mh(e),e.flags|=1,mt(t,e,n,s),e.child)}function Nm(t,e,n,r,s){if(Tt(n)){var i=!0;gl(e)}else i=!1;if(Rs(e,s),e.stateNode===null)qa(t,e),Gv(e,n,r),cd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ht(h):(h=Tt(n)?Wr:dt.current,h=Ms(e,h));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Sm(e,o,r,h),Jn=!1;var y=e.memoizedState;o.state=y,wl(e,r,o,s),u=e.memoizedState,l!==r||y!==u||It.current||Jn?(typeof f=="function"&&(ud(e,n,f,r),u=e.memoizedState),(l=Jn||Tm(e,n,l,r,y,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Cv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Xt(e.type,l),o.props=h,g=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ht(u):(u=Tt(n)?Wr:dt.current,u=Ms(e,u));var b=n.getDerivedStateFromProps;(f=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||y!==u)&&Sm(e,o,r,u),Jn=!1,y=e.memoizedState,o.state=y,wl(e,r,o,s);var N=e.memoizedState;l!==g||y!==N||It.current||Jn?(typeof b=="function"&&(ud(e,n,b,r),N=e.memoizedState),(h=Jn||Tm(e,n,h,r,y,N,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return fd(t,e,n,r,i,s)}function fd(t,e,n,r,s,i){Zv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&gm(e,n,!1),Ln(t,e,i);r=e.stateNode,fI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Us(e,t.child,null,i),e.child=Us(e,null,l,i)):mt(t,e,l,i),e.memoizedState=r.state,s&&gm(e,n,!0),e.child}function e_(t){var e=t.stateNode;e.pendingContext?mm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mm(t,e.context,!1),Ih(t,e.containerInfo)}function km(t,e,n,r,s){return Fs(),yh(s),e.flags|=256,mt(t,e,n,r),e.child}var pd={dehydrated:null,treeContext:null,retryLane:0};function md(t){return{baseLanes:t,cachePool:null,transitions:null}}function t_(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(Ae,s&1),t===null)return ad(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=su(o,r,0,null),t=$r(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=md(n),e.memoizedState=pd,t):Nh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return pI(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=pr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=pr(l,i):(i=$r(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?md(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=pd,r}return i=t.child,t=i.sibling,r=pr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Nh(t,e){return e=su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Aa(t,e,n,r){return r!==null&&yh(r),Us(e,t.child,null,n),t=Nh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=pc(Error(U(422))),Aa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=su({mode:"visible",children:r.children},s,0,null),i=$r(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Us(e,t.child,null,o),e.child.memoizedState=md(o),e.memoizedState=pd,i);if(!(e.mode&1))return Aa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=pc(i,r,void 0),Aa(t,e,o,r)}if(l=(o&t.childLanes)!==0,Et||l){if(r=Ge,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,On(t,s),nn(r,t,s,-1))}return Lh(),r=pc(Error(U(421))),Aa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=CI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nt=cr(s.nextSibling),kt=e,Ce=!0,Zt=null,t!==null&&(Mt[Ft++]=bn,Mt[Ft++]=Cn,Mt[Ft++]=qr,bn=t.id,Cn=t.overflow,qr=e),e=Nh(e,r.children),e.flags|=4096,e)}function Dm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ld(t.return,e,n)}function mc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function n_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(mt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dm(t,n,e);else if(t.tag===19)Dm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&El(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),mc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&El(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}mc(e,!0,n,null,i);break;case"together":mc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mI(t,e,n){switch(e.tag){case 3:e_(e),Fs();break;case 5:Av(e);break;case 1:Tt(e.type)&&gl(e);break;case 4:Ih(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(_l,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?t_(t,e,n):(we(Ae,Ae.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);we(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return n_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Jv(t,e,n)}return Ln(t,e,n)}var r_,gd,s_,i_;r_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gd=function(){};s_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Mr(pn.current);var i=null;switch(n){case"input":s=Mc(t,s),r=Mc(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=Bc(t,s),r=Bc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=pl)}zc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(oo.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(oo.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Te("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};i_=function(t,e,n,r){n!==r&&(e.flags|=4)};function ji(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gI(t,e,n){var r=e.pendingProps;switch(gh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Tt(e.type)&&ml(),ot(e),null;case 3:return r=e.stateNode,Bs(),be(It),be(dt),Sh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(Td(Zt),Zt=null))),gd(t,e),ot(e),null;case 5:Th(e);var s=Mr(_o.current);if(n=e.type,t!==null&&e.stateNode!=null)s_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ot(e),null}if(t=Mr(pn.current),ba(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hn]=e,r[yo]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<Ui.length;s++)Te(Ui[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":$p(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":Hp(r,i),Te("invalid",r)}zc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Sa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Sa(r.textContent,l,t),s=["children",""+l]):oo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":ya(r),zp(r,i,!0);break;case"textarea":ya(r),Wp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=pl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hn]=e,t[yo]=r,r_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hc(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ui.length;s++)Te(Ui[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":$p(t,r),s=Mc(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Te("invalid",t);break;case"textarea":Hp(t,r),s=Bc(t,r),Te("invalid",t);break;default:s=r}zc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Oy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&jy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ao(t,u):typeof u=="number"&&ao(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Te("scroll",t):u!=null&&th(t,i,u,o))}switch(n){case"input":ya(t),zp(t,r,!1);break;case"textarea":ya(t),Wp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_r(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?bs(t,!!r.multiple,i,!1):r.defaultValue!=null&&bs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)i_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Mr(_o.current),Mr(pn.current),ba(e)){if(r=e.stateNode,n=e.memoizedProps,r[hn]=e,(i=r.nodeValue!==n)&&(t=kt,t!==null))switch(t.tag){case 3:Sa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hn]=e,e.stateNode=r}return ot(e),null;case 13:if(be(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Nt!==null&&e.mode&1&&!(e.flags&128))Iv(),Fs(),e.flags|=98560,i=!1;else if(i=ba(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[hn]=e}else Fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else Zt!==null&&(Td(Zt),Zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?ze===0&&(ze=3):Lh())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Bs(),gd(t,e),t===null&&mo(e.stateNode.containerInfo),ot(e),null;case 10:return xh(e.type._context),ot(e),null;case 17:return Tt(e.type)&&ml(),ot(e),null;case 19:if(be(Ae),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ji(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=El(t),o!==null){for(e.flags|=128,ji(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Oe()>zs&&(e.flags|=128,r=!0,ji(i,!1),e.lanes=4194304)}else{if(!r)if(t=El(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ji(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return ot(e),null}else 2*Oe()-i.renderingStartTime>zs&&n!==1073741824&&(e.flags|=128,r=!0,ji(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Oe(),e.sibling=null,n=Ae.current,we(Ae,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Oh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function yI(t,e){switch(gh(e),e.tag){case 1:return Tt(e.type)&&ml(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bs(),be(It),be(dt),Sh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Th(e),null;case 13:if(be(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ae),null;case 4:return Bs(),null;case 10:return xh(e.type._context),null;case 22:case 23:return Oh(),null;case 24:return null;default:return null}}var Pa=!1,ut=!1,vI=typeof WeakSet=="function"?WeakSet:Set,H=null;function Ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function yd(t,e,n){try{n()}catch(r){De(t,e,r)}}var jm=!1;function _I(t,e){if(ed=dl,t=cv(),ph(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,g=t,y=null;t:for(;;){for(var b;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(b=g.firstChild)!==null;)y=g,g=b;for(;;){if(g===t)break t;if(y===n&&++h===s&&(l=o),y===i&&++f===r&&(u=o),(b=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=b}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(td={focusedElem:t,selectionRange:n},dl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var S=N.memoizedProps,j=N.memoizedState,I=e.stateNode,E=I.getSnapshotBeforeUpdate(e.elementType===e.type?S:Xt(e.type,S),j);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(C){De(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return N=jm,jm=!1,N}function Xi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yd(e,n,i)}s=s.next}while(s!==r)}}function nu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o_(t){var e=t.alternate;e!==null&&(t.alternate=null,o_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hn],delete e[yo],delete e[sd],delete e[tI],delete e[nI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function a_(t){return t.tag===5||t.tag===3||t.tag===4}function Vm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||a_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pl));else if(r!==4&&(t=t.child,t!==null))for(_d(t,e,n),t=t.sibling;t!==null;)_d(t,e,n),t=t.sibling}function xd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xd(t,e,n),t=t.sibling;t!==null;)xd(t,e,n),t=t.sibling}var Ye=null,Jt=!1;function Qn(t,e,n){for(n=n.child;n!==null;)l_(t,e,n),n=n.sibling}function l_(t,e,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Gl,n)}catch{}switch(n.tag){case 5:ut||Ts(n,e);case 6:var r=Ye,s=Jt;Ye=null,Qn(t,e,n),Ye=r,Jt=s,Ye!==null&&(Jt?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Jt?(t=Ye,n=n.stateNode,t.nodeType===8?lc(t.parentNode,n):t.nodeType===1&&lc(t,n),ho(t)):lc(Ye,n.stateNode));break;case 4:r=Ye,s=Jt,Ye=n.stateNode.containerInfo,Jt=!0,Qn(t,e,n),Ye=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yd(n,e,o),s=s.next}while(s!==r)}Qn(t,e,n);break;case 1:if(!ut&&(Ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}Qn(t,e,n);break;case 21:Qn(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,Qn(t,e,n),ut=r):Qn(t,e,n);break;default:Qn(t,e,n)}}function Om(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vI),e.forEach(function(r){var s=AI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,Jt=!1;break e;case 3:Ye=l.stateNode.containerInfo,Jt=!0;break e;case 4:Ye=l.stateNode.containerInfo,Jt=!0;break e}l=l.return}if(Ye===null)throw Error(U(160));l_(i,o,s),Ye=null,Jt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){De(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)u_(e,t),e=e.sibling}function u_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),cn(t),r&4){try{Xi(3,t,t.return),nu(3,t)}catch(S){De(t,t.return,S)}try{Xi(5,t,t.return)}catch(S){De(t,t.return,S)}}break;case 1:Yt(e,t),cn(t),r&512&&n!==null&&Ts(n,n.return);break;case 5:if(Yt(e,t),cn(t),r&512&&n!==null&&Ts(n,n.return),t.flags&32){var s=t.stateNode;try{ao(s,"")}catch(S){De(t,t.return,S)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ny(s,i),Hc(l,o);var h=Hc(l,i);for(o=0;o<u.length;o+=2){var f=u[o],g=u[o+1];f==="style"?Oy(s,g):f==="dangerouslySetInnerHTML"?jy(s,g):f==="children"?ao(s,g):th(s,f,g,h)}switch(l){case"input":Fc(s,i);break;case"textarea":ky(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?bs(s,!!i.multiple,b,!1):y!==!!i.multiple&&(i.defaultValue!=null?bs(s,!!i.multiple,i.defaultValue,!0):bs(s,!!i.multiple,i.multiple?[]:"",!1))}s[yo]=i}catch(S){De(t,t.return,S)}}break;case 6:if(Yt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(S){De(t,t.return,S)}}break;case 3:if(Yt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ho(e.containerInfo)}catch(S){De(t,t.return,S)}break;case 4:Yt(e,t),cn(t);break;case 13:Yt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(jh=Oe())),r&4&&Om(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(h=ut)||f,Yt(e,t),ut=h):Yt(e,t),cn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(g=H=f;H!==null;){switch(y=H,b=y.child,y.tag){case 0:case 11:case 14:case 15:Xi(4,y,y.return);break;case 1:Ts(y,y.return);var N=y.stateNode;if(typeof N.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(S){De(r,n,S)}}break;case 5:Ts(y,y.return);break;case 22:if(y.memoizedState!==null){Mm(g);continue}}b!==null?(b.return=y,H=b):Mm(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Vy("display",o))}catch(S){De(t,t.return,S)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(S){De(t,t.return,S)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Yt(e,t),cn(t),r&4&&Om(t);break;case 21:break;default:Yt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(a_(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ao(s,""),r.flags&=-33);var i=Vm(t);xd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Vm(t);_d(t,l,o);break;default:throw Error(U(161))}}catch(u){De(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xI(t,e,n){H=t,c_(t)}function c_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Pa;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ut;l=Pa;var h=ut;if(Pa=o,(ut=u)&&!h)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Fm(s):u!==null?(u.return=o,H=u):Fm(s);for(;i!==null;)H=i,c_(i),i=i.sibling;H=s,Pa=l,ut=h}Lm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Lm(t)}}function Lm(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||nu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&wm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&ho(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ut||e.flags&512&&vd(e)}catch(y){De(e,e.return,y)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Mm(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Fm(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nu(4,e)}catch(u){De(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){De(e,s,u)}}var i=e.return;try{vd(e)}catch(u){De(e,i,u)}break;case 5:var o=e.return;try{vd(e)}catch(u){De(e,o,u)}}}catch(u){De(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var wI=Math.ceil,Sl=$n.ReactCurrentDispatcher,kh=$n.ReactCurrentOwner,$t=$n.ReactCurrentBatchConfig,ce=0,Ge=null,Me=null,Ze=0,Rt=0,Ss=br(0),ze=0,Io=null,Gr=0,ru=0,Dh=0,Ji=null,wt=null,jh=0,zs=1/0,In=null,bl=!1,wd=null,hr=null,Ra=!1,ir=null,Cl=0,Zi=0,Ed=null,Ka=-1,Ga=0;function gt(){return ce&6?Oe():Ka!==-1?Ka:Ka=Oe()}function fr(t){return t.mode&1?ce&2&&Ze!==0?Ze&-Ze:sI.transition!==null?(Ga===0&&(Ga=Gy()),Ga):(t=me,t!==0||(t=window.event,t=t===void 0?16:tv(t.type)),t):1}function nn(t,e,n,r){if(50<Zi)throw Zi=0,Ed=null,Error(U(185));Vo(t,n,r),(!(ce&2)||t!==Ge)&&(t===Ge&&(!(ce&2)&&(ru|=n),ze===4&&er(t,Ze)),St(t,r),n===1&&ce===0&&!(e.mode&1)&&(zs=Oe()+500,Zl&&Cr()))}function St(t,e){var n=t.callbackNode;sE(t,e);var r=cl(t,t===Ge?Ze:0);if(r===0)n!==null&&Gp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gp(n),e===1)t.tag===0?rI(Um.bind(null,t)):xv(Um.bind(null,t)),ZE(function(){!(ce&6)&&Cr()}),n=null;else{switch(Qy(r)){case 1:n=oh;break;case 4:n=qy;break;case 16:n=ul;break;case 536870912:n=Ky;break;default:n=ul}n=v_(n,d_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function d_(t,e){if(Ka=-1,Ga=0,ce&6)throw Error(U(327));var n=t.callbackNode;if(Ns()&&t.callbackNode!==n)return null;var r=cl(t,t===Ge?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Al(t,r);else{e=r;var s=ce;ce|=2;var i=f_();(Ge!==t||Ze!==e)&&(In=null,zs=Oe()+500,Br(t,e));do try{TI();break}catch(l){h_(t,l)}while(!0);_h(),Sl.current=i,ce=s,Me!==null?e=0:(Ge=null,Ze=0,e=ze)}if(e!==0){if(e===2&&(s=Qc(t),s!==0&&(r=s,e=Id(t,s))),e===1)throw n=Io,Br(t,0),er(t,r),St(t,Oe()),n;if(e===6)er(t,r);else{if(s=t.current.alternate,!(r&30)&&!EI(s)&&(e=Al(t,r),e===2&&(i=Qc(t),i!==0&&(r=i,e=Id(t,i))),e===1))throw n=Io,Br(t,0),er(t,r),St(t,Oe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:jr(t,wt,In);break;case 3:if(er(t,r),(r&130023424)===r&&(e=jh+500-Oe(),10<e)){if(cl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){gt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rd(jr.bind(null,t,wt,In),e);break}jr(t,wt,In);break;case 4:if(er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wI(r/1960))-r,10<r){t.timeoutHandle=rd(jr.bind(null,t,wt,In),r);break}jr(t,wt,In);break;case 5:jr(t,wt,In);break;default:throw Error(U(329))}}}return St(t,Oe()),t.callbackNode===n?d_.bind(null,t):null}function Id(t,e){var n=Ji;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=Al(t,e),t!==2&&(e=wt,wt=n,e!==null&&Td(e)),t}function Td(t){wt===null?wt=t:wt.push.apply(wt,t)}function EI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~Dh,e&=~ru,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tn(e),r=1<<n;t[n]=-1,e&=~r}}function Um(t){if(ce&6)throw Error(U(327));Ns();var e=cl(t,0);if(!(e&1))return St(t,Oe()),null;var n=Al(t,e);if(t.tag!==0&&n===2){var r=Qc(t);r!==0&&(e=r,n=Id(t,r))}if(n===1)throw n=Io,Br(t,0),er(t,e),St(t,Oe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jr(t,wt,In),St(t,Oe()),null}function Vh(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(zs=Oe()+500,Zl&&Cr())}}function Qr(t){ir!==null&&ir.tag===0&&!(ce&6)&&Ns();var e=ce;ce|=1;var n=$t.transition,r=me;try{if($t.transition=null,me=1,t)return t()}finally{me=r,$t.transition=n,ce=e,!(ce&6)&&Cr()}}function Oh(){Rt=Ss.current,be(Ss)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JE(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(gh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ml();break;case 3:Bs(),be(It),be(dt),Sh();break;case 5:Th(r);break;case 4:Bs();break;case 13:be(Ae);break;case 19:be(Ae);break;case 10:xh(r.type._context);break;case 22:case 23:Oh()}n=n.return}if(Ge=t,Me=t=pr(t.current,null),Ze=Rt=e,ze=0,Io=null,Dh=ru=Gr=0,wt=Ji=null,Lr!==null){for(e=0;e<Lr.length;e++)if(n=Lr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Lr=null}return t}function h_(t,e){do{var n=Me;try{if(_h(),Ha.current=Tl,Il){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Il=!1}if(Kr=0,Ke=$e=Pe=null,Yi=!1,xo=0,kh.current=null,n===null||n.return===null){ze=1,Io=e,Me=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Ze,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=Cm(o);if(b!==null){b.flags&=-257,Am(b,o,l,i,e),b.mode&1&&bm(i,h,e),e=b,u=h;var N=e.updateQueue;if(N===null){var S=new Set;S.add(u),e.updateQueue=S}else N.add(u);break e}else{if(!(e&1)){bm(i,h,e),Lh();break e}u=Error(U(426))}}else if(Ce&&l.mode&1){var j=Cm(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Am(j,o,l,i,e),yh($s(u,l));break e}}i=u=$s(u,l),ze!==4&&(ze=2),Ji===null?Ji=[i]:Ji.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Qv(i,u,e);xm(i,I);break e;case 1:l=u;var E=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(hr===null||!hr.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=Yv(i,l,e);xm(i,C);break e}}i=i.return}while(i!==null)}m_(n)}catch(k){e=k,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function f_(){var t=Sl.current;return Sl.current=Tl,t===null?Tl:t}function Lh(){(ze===0||ze===3||ze===2)&&(ze=4),Ge===null||!(Gr&268435455)&&!(ru&268435455)||er(Ge,Ze)}function Al(t,e){var n=ce;ce|=2;var r=f_();(Ge!==t||Ze!==e)&&(In=null,Br(t,e));do try{II();break}catch(s){h_(t,s)}while(!0);if(_h(),ce=n,Sl.current=r,Me!==null)throw Error(U(261));return Ge=null,Ze=0,ze}function II(){for(;Me!==null;)p_(Me)}function TI(){for(;Me!==null&&!Q0();)p_(Me)}function p_(t){var e=y_(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?m_(t):Me=e,kh.current=null}function m_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yI(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Me=null;return}}else if(n=gI(n,e,Rt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);ze===0&&(ze=5)}function jr(t,e,n){var r=me,s=$t.transition;try{$t.transition=null,me=1,SI(t,e,n,r)}finally{$t.transition=s,me=r}return null}function SI(t,e,n,r){do Ns();while(ir!==null);if(ce&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(iE(t,i),t===Ge&&(Me=Ge=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ra||(Ra=!0,v_(ul,function(){return Ns(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var o=me;me=1;var l=ce;ce|=4,kh.current=null,_I(t,n),u_(n,t),WE(td),dl=!!ed,td=ed=null,t.current=n,xI(n),Y0(),ce=l,me=o,$t.transition=i}else t.current=n;if(Ra&&(Ra=!1,ir=t,Cl=s),i=t.pendingLanes,i===0&&(hr=null),Z0(n.stateNode),St(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(bl)throw bl=!1,t=wd,wd=null,t;return Cl&1&&t.tag!==0&&Ns(),i=t.pendingLanes,i&1?t===Ed?Zi++:(Zi=0,Ed=t):Zi=0,Cr(),null}function Ns(){if(ir!==null){var t=Qy(Cl),e=$t.transition,n=me;try{if($t.transition=null,me=16>t?16:t,ir===null)var r=!1;else{if(t=ir,ir=null,Cl=0,ce&6)throw Error(U(331));var s=ce;for(ce|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:Xi(8,f,i)}var g=f.child;if(g!==null)g.return=f,H=g;else for(;H!==null;){f=H;var y=f.sibling,b=f.return;if(o_(f),f===h){H=null;break}if(y!==null){y.return=b,H=y;break}H=b}}}var N=i.alternate;if(N!==null){var S=N.child;if(S!==null){N.child=null;do{var j=S.sibling;S.sibling=null,S=j}while(S!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xi(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,H=I;break e}H=i.return}}var E=t.current;for(H=E;H!==null;){o=H;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,H=_;else e:for(o=E;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:nu(9,l)}}catch(k){De(l,l.return,k)}if(l===o){H=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,H=C;break e}H=l.return}}if(ce=s,Cr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Gl,t)}catch{}r=!0}return r}finally{me=n,$t.transition=e}}return!1}function Bm(t,e,n){e=$s(n,e),e=Qv(t,e,1),t=dr(t,e,1),e=gt(),t!==null&&(Vo(t,1,e),St(t,e))}function De(t,e,n){if(t.tag===3)Bm(t,t,n);else for(;e!==null;){if(e.tag===3){Bm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hr===null||!hr.has(r))){t=$s(n,t),t=Yv(e,t,1),e=dr(e,t,1),t=gt(),e!==null&&(Vo(e,1,t),St(e,t));break}}e=e.return}}function bI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gt(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(Ze&n)===n&&(ze===4||ze===3&&(Ze&130023424)===Ze&&500>Oe()-jh?Br(t,0):Dh|=n),St(t,e)}function g_(t,e){e===0&&(t.mode&1?(e=xa,xa<<=1,!(xa&130023424)&&(xa=4194304)):e=1);var n=gt();t=On(t,e),t!==null&&(Vo(t,e,n),St(t,n))}function CI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),g_(t,n)}function AI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),g_(t,n)}var y_;y_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,mI(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Ce&&e.flags&1048576&&wv(e,vl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qa(t,e),t=e.pendingProps;var s=Ms(e,dt.current);Rs(e,n),s=Ch(null,e,r,t,s,n);var i=Ah();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(i=!0,gl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Eh(e),s.updater=tu,e.stateNode=s,s._reactInternals=e,cd(e,r,t,n),e=fd(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&mh(e),mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=RI(r),t=Xt(r,t),s){case 0:e=hd(null,e,r,t,n);break e;case 1:e=Nm(null,e,r,t,n);break e;case 11:e=Pm(null,e,r,t,n);break e;case 14:e=Rm(null,e,r,Xt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),hd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Nm(t,e,r,s,n);case 3:e:{if(e_(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Cv(t,e),wl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=$s(Error(U(423)),e),e=km(t,e,r,n,s);break e}else if(r!==s){s=$s(Error(U(424)),e),e=km(t,e,r,n,s);break e}else for(Nt=cr(e.stateNode.containerInfo.firstChild),kt=e,Ce=!0,Zt=null,n=Sv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fs(),r===s){e=Ln(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return Av(e),t===null&&ad(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nd(r,s)?o=null:i!==null&&nd(r,i)&&(e.flags|=32),Zv(t,e),mt(t,e,o,n),e.child;case 6:return t===null&&ad(e),null;case 13:return t_(t,e,n);case 4:return Ih(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Us(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Pm(t,e,r,s,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(_l,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!It.current){e=Ln(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=kn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),ld(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ld(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rs(e,n),s=Ht(s),r=r(s),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,s=Xt(r,e.pendingProps),s=Xt(r.type,s),Rm(t,e,r,s,n);case 15:return Xv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),qa(t,e),e.tag=1,Tt(r)?(t=!0,gl(e)):t=!1,Rs(e,n),Gv(e,r,s),cd(e,r,s,n),fd(null,e,r,!0,t,n);case 19:return n_(t,e,n);case 22:return Jv(t,e,n)}throw Error(U(156,e.tag))};function v_(t,e){return Wy(t,e)}function PI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new PI(t,e,n,r)}function Mh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RI(t){if(typeof t=="function")return Mh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rh)return 11;if(t===sh)return 14}return 2}function pr(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qa(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Mh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ms:return $r(n.children,s,i,e);case nh:o=8,s|=8;break;case jc:return t=Bt(12,n,e,s|2),t.elementType=jc,t.lanes=i,t;case Vc:return t=Bt(13,n,e,s),t.elementType=Vc,t.lanes=i,t;case Oc:return t=Bt(19,n,e,s),t.elementType=Oc,t.lanes=i,t;case Ay:return su(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case by:o=10;break e;case Cy:o=9;break e;case rh:o=11;break e;case sh:o=14;break e;case Xn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Bt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function $r(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function su(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=Ay,t.lanes=n,t.stateNode={isHidden:!1},t}function gc(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function yc(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function NI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fh(t,e,n,r,s,i,o,l,u){return t=new NI(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eh(i),t}function kI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function __(t){if(!t)return xr;t=t._reactInternals;e:{if(ns(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Tt(n))return _v(t,n,e)}return e}function x_(t,e,n,r,s,i,o,l,u){return t=Fh(n,r,!0,t,s,i,o,l,u),t.context=__(null),n=t.current,r=gt(),s=fr(n),i=kn(r,s),i.callback=e??null,dr(n,i,s),t.current.lanes=s,Vo(t,s,r),St(t,r),t}function iu(t,e,n,r){var s=e.current,i=gt(),o=fr(s);return n=__(n),e.context===null?e.context=n:e.pendingContext=n,e=kn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dr(s,e,o),t!==null&&(nn(t,s,o,i),za(t,s,o)),o}function Pl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $m(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uh(t,e){$m(t,e),(t=t.alternate)&&$m(t,e)}function DI(){return null}var w_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bh(t){this._internalRoot=t}ou.prototype.render=Bh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));iu(t,e,null,null)};ou.prototype.unmount=Bh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qr(function(){iu(null,t,null,null)}),e[Vn]=null}};function ou(t){this._internalRoot=t}ou.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zn.length&&e!==0&&e<Zn[n].priority;n++);Zn.splice(n,0,t),n===0&&ev(t)}};function $h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zm(){}function jI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Pl(o);i.call(h)}}var o=x_(e,r,t,0,null,!1,!1,"",zm);return t._reactRootContainer=o,t[Vn]=o.current,mo(t.nodeType===8?t.parentNode:t),Qr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Pl(u);l.call(h)}}var u=Fh(t,0,!1,null,null,!1,!1,"",zm);return t._reactRootContainer=u,t[Vn]=u.current,mo(t.nodeType===8?t.parentNode:t),Qr(function(){iu(e,u,n,r)}),u}function lu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Pl(o);l.call(u)}}iu(e,o,t,s)}else o=jI(n,e,t,s,r);return Pl(o)}Yy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fi(e.pendingLanes);n!==0&&(ah(e,n|1),St(e,Oe()),!(ce&6)&&(zs=Oe()+500,Cr()))}break;case 13:Qr(function(){var r=On(t,1);if(r!==null){var s=gt();nn(r,t,1,s)}}),Uh(t,1)}};lh=function(t){if(t.tag===13){var e=On(t,134217728);if(e!==null){var n=gt();nn(e,t,134217728,n)}Uh(t,134217728)}};Xy=function(t){if(t.tag===13){var e=fr(t),n=On(t,e);if(n!==null){var r=gt();nn(n,t,e,r)}Uh(t,e)}};Jy=function(){return me};Zy=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};qc=function(t,e,n){switch(e){case"input":if(Fc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jl(r);if(!s)throw Error(U(90));Ry(r),Fc(r,s)}}}break;case"textarea":ky(t,n);break;case"select":e=n.value,e!=null&&bs(t,!!n.multiple,e,!1)}};Fy=Vh;Uy=Qr;var VI={usingClientEntryPoint:!1,Events:[Lo,_s,Jl,Ly,My,Vh]},Vi={findFiberByHostInstance:Or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OI={bundleType:Vi.bundleType,version:Vi.version,rendererPackageName:Vi.rendererPackageName,rendererConfig:Vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zy(t),t===null?null:t.stateNode},findFiberByHostInstance:Vi.findFiberByHostInstance||DI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Na.isDisabled&&Na.supportsFiber)try{Gl=Na.inject(OI),fn=Na}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VI;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$h(e))throw Error(U(200));return kI(t,e,null,n)};jt.createRoot=function(t,e){if(!$h(t))throw Error(U(299));var n=!1,r="",s=w_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Fh(t,1,!1,null,null,n,!1,r,s),t[Vn]=e.current,mo(t.nodeType===8?t.parentNode:t),new Bh(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=zy(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return Qr(t)};jt.hydrate=function(t,e,n){if(!au(e))throw Error(U(200));return lu(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!$h(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=w_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=x_(e,null,t,1,n??null,s,!1,i,o),t[Vn]=e.current,mo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ou(e)};jt.render=function(t,e,n){if(!au(e))throw Error(U(200));return lu(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!au(t))throw Error(U(40));return t._reactRootContainer?(Qr(function(){lu(null,null,t,!1,function(){t._reactRootContainer=null,t[Vn]=null})}),!0):!1};jt.unstable_batchedUpdates=Vh;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!au(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return lu(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function E_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E_)}catch(t){console.error(t)}}E_(),Ey.exports=jt;var LI=Ey.exports,Hm=LI;kc.createRoot=Hm.createRoot,kc.hydrateRoot=Hm.hydrateRoot;var Wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},MI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},T_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,g=(i&3)<<4|l>>4;let y=(l&15)<<2|h>>6,b=h&63;u||(b=64,o||(y=64)),r.push(n[f],n[g],n[y],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||g==null)throw new FI;const y=i<<2|l>>4;if(r.push(y),h!==64){const b=l<<4&240|h>>2;if(r.push(b),g!==64){const N=h<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UI=function(t){const e=I_(t);return T_.encodeByteArray(e,!0)},Rl=function(t){return UI(t).replace(/\./g,"")},S_=function(t){try{return T_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=()=>BI().__FIREBASE_DEFAULTS__,zI=()=>{if(typeof process>"u"||typeof Wm>"u")return;const t=Wm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&S_(t[1]);return e&&JSON.parse(e)},uu=()=>{try{return $I()||zI()||HI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b_=t=>{var e,n;return(n=(e=uu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},WI=t=>{const e=b_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},C_=()=>{var t;return(t=uu())===null||t===void 0?void 0:t.config},A_=t=>{var e;return(e=uu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Rl(JSON.stringify(n)),Rl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function QI(){var t;const e=(t=uu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZI(){const t=ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eT(){return!QI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tT(){try{return typeof indexedDB=="object"}catch{return!1}}function nT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="FirebaseError";class zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rT,Object.setPrototypeOf(this,zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fo.prototype.create)}}class Fo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?sT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new zn(s,l,r)}}function sT(t,e){return t.replace(iT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const iT=/\{\$([^}]+)}/g;function oT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Nl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(qm(i)&&qm(o)){if(!Nl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aT(t,e){const n=new lT(t,e);return n.subscribe.bind(n)}class lT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vc),s.error===void 0&&(s.error=vc),s.complete===void 0&&(s.complete=vc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hT(e))try{this.getOrInitializeService({instanceIdentifier:Vr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vr){return this.instances.has(e)}getOptions(e=Vr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vr){return this.component?this.component.multipleInstances?e:Vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dT(t){return t===Vr?void 0:t}function hT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const pT={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},mT=ae.INFO,gT={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},yT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=gT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zh{constructor(e){this.name=e,this._logLevel=mT,this._logHandler=yT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const vT=(t,e)=>e.some(n=>t instanceof n);let Km,Gm;function _T(){return Km||(Km=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xT(){return Gm||(Gm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P_=new WeakMap,Sd=new WeakMap,R_=new WeakMap,_c=new WeakMap,Hh=new WeakMap;function wT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(mr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&P_.set(n,t)}).catch(()=>{}),Hh.set(e,t),e}function ET(t){if(Sd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Sd.set(t,e)}let bd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IT(t){bd=t(bd)}function TT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xc(this),e,...n);return R_.set(r,e.sort?e.sort():[e]),mr(r)}:xT().includes(t)?function(...e){return t.apply(xc(this),e),mr(P_.get(this))}:function(...e){return mr(t.apply(xc(this),e))}}function ST(t){return typeof t=="function"?TT(t):(t instanceof IDBTransaction&&ET(t),vT(t,_T())?new Proxy(t,bd):t)}function mr(t){if(t instanceof IDBRequest)return wT(t);if(_c.has(t))return _c.get(t);const e=ST(t);return e!==t&&(_c.set(t,e),Hh.set(e,t)),e}const xc=t=>Hh.get(t);function bT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=mr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(mr(o.result),u.oldVersion,u.newVersion,mr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const CT=["get","getKey","getAll","getAllKeys","count"],AT=["put","add","delete","clear"],wc=new Map;function Qm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wc.get(e))return wc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=AT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||CT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return wc.set(e,i),i}IT(t=>({...t,get:(e,n,r)=>Qm(e,n)||t.get(e,n,r),has:(e,n)=>!!Qm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cd="@firebase/app",Ym="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new zh("@firebase/app"),NT="@firebase/app-compat",kT="@firebase/analytics-compat",DT="@firebase/analytics",jT="@firebase/app-check-compat",VT="@firebase/app-check",OT="@firebase/auth",LT="@firebase/auth-compat",MT="@firebase/database",FT="@firebase/data-connect",UT="@firebase/database-compat",BT="@firebase/functions",$T="@firebase/functions-compat",zT="@firebase/installations",HT="@firebase/installations-compat",WT="@firebase/messaging",qT="@firebase/messaging-compat",KT="@firebase/performance",GT="@firebase/performance-compat",QT="@firebase/remote-config",YT="@firebase/remote-config-compat",XT="@firebase/storage",JT="@firebase/storage-compat",ZT="@firebase/firestore",eS="@firebase/vertexai-preview",tS="@firebase/firestore-compat",nS="firebase",rS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="[DEFAULT]",sS={[Cd]:"fire-core",[NT]:"fire-core-compat",[DT]:"fire-analytics",[kT]:"fire-analytics-compat",[VT]:"fire-app-check",[jT]:"fire-app-check-compat",[OT]:"fire-auth",[LT]:"fire-auth-compat",[MT]:"fire-rtdb",[FT]:"fire-data-connect",[UT]:"fire-rtdb-compat",[BT]:"fire-fn",[$T]:"fire-fn-compat",[zT]:"fire-iid",[HT]:"fire-iid-compat",[WT]:"fire-fcm",[qT]:"fire-fcm-compat",[KT]:"fire-perf",[GT]:"fire-perf-compat",[QT]:"fire-rc",[YT]:"fire-rc-compat",[XT]:"fire-gcs",[JT]:"fire-gcs-compat",[ZT]:"fire-fst",[tS]:"fire-fst-compat",[eS]:"fire-vertex","fire-js":"fire-js",[nS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new Map,iS=new Map,Pd=new Map;function Xm(t,e){try{t.container.addComponent(e)}catch(n){Mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hs(t){const e=t.name;if(Pd.has(e))return Mn.debug(`There were multiple attempts to register component ${e}.`),!1;Pd.set(e,t);for(const n of kl.values())Xm(n,t);for(const n of iS.values())Xm(n,t);return!0}function Wh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function An(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new Fo("app","Firebase",oS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=rS;function N_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ad,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw gr.create("bad-app-name",{appName:String(s)});if(n||(n=C_()),!n)throw gr.create("no-options");const i=kl.get(s);if(i){if(Nl(n,i.options)&&Nl(r,i.config))return i;throw gr.create("duplicate-app",{appName:s})}const o=new fT(s);for(const u of Pd.values())o.addComponent(u);const l=new aS(n,r,o);return kl.set(s,l),l}function k_(t=Ad){const e=kl.get(t);if(!e&&t===Ad&&C_())return N_();if(!e)throw gr.create("no-app",{appName:t});return e}function yr(t,e,n){var r;let s=(r=sS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mn.warn(l.join(" "));return}Hs(new Yr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebase-heartbeat-database",uS=1,To="firebase-heartbeat-store";let Ec=null;function D_(){return Ec||(Ec=bT(lS,uS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(To)}catch(n){console.warn(n)}}}}).catch(t=>{throw gr.create("idb-open",{originalErrorMessage:t.message})})),Ec}async function cS(t){try{const n=(await D_()).transaction(To),r=await n.objectStore(To).get(j_(t));return await n.done,r}catch(e){if(e instanceof zn)Mn.warn(e.message);else{const n=gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mn.warn(n.message)}}}async function Jm(t,e){try{const r=(await D_()).transaction(To,"readwrite");await r.objectStore(To).put(e,j_(t)),await r.done}catch(n){if(n instanceof zn)Mn.warn(n.message);else{const r=gr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mn.warn(r.message)}}}function j_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=1024,hS=30*24*60*60*1e3;class fS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=hS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zm(),{heartbeatsToSend:r,unsentEntries:s}=pS(this._heartbeatsCache.heartbeats),i=Rl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Mn.warn(n),""}}}function Zm(){return new Date().toISOString().substring(0,10)}function pS(t,e=dS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),eg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),eg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tT()?nT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eg(t){return Rl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){Hs(new Yr("platform-logger",e=>new PT(e),"PRIVATE")),Hs(new Yr("heartbeat",e=>new fS(e),"PRIVATE")),yr(Cd,Ym,t),yr(Cd,Ym,"esm2017"),yr("fire-js","")}gS("");function qh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function V_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yS=V_,O_=new Fo("auth","Firebase",V_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new zh("@firebase/auth");function vS(t,...e){Dl.logLevel<=ae.WARN&&Dl.warn(`Auth (${ni}): ${t}`,...e)}function Ya(t,...e){Dl.logLevel<=ae.ERROR&&Dl.error(`Auth (${ni}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,...e){throw Gh(t,...e)}function rn(t,...e){return Gh(t,...e)}function Kh(t,e,n){const r=Object.assign(Object.assign({},yS()),{[e]:n});return new Fo("auth","Firebase",r).create(e,{appName:t.name})}function zr(t){return Kh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _S(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&_n(t,"argument-error"),Kh(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return O_.create(t,...e)}function Z(t,e,...n){if(!t)throw Gh(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ya(e),new Error(e)}function Fn(t,e){t||Pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xS(){return tg()==="http:"||tg()==="https:"}function tg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xS()||XI()||"connection"in navigator)?navigator.onLine:!0}function ES(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fn(n>e,"Short delay should be less than long delay!"),this.isMobile=GI()||JI()}get(){return wS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t,e){Fn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new Bo(3e4,6e4);function Yh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ri(t,e,n,r,s={}){return M_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Uo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return YI()||(h.referrerPolicy="no-referrer"),L_.fetch()(F_(t,t.config.apiHost,n,l),h)})}async function M_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},IS),e);try{const s=new bS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ka(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ka(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ka(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ka(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Kh(t,f,h);_n(t,f)}}catch(s){if(s instanceof zn)throw s;_n(t,"network-request-failed",{message:String(s)})}}async function SS(t,e,n,r,s={}){const i=await ri(t,e,n,r,s);return"mfaPendingCredential"in i&&_n(t,"multi-factor-auth-required",{_serverResponse:i}),i}function F_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Qh(t.config,s):`${t.config.apiScheme}://${s}`}class bS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rn(this.auth,"network-request-failed")),TS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ka(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function U_(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AS(t,e=!1){const n=vt(t),r=await n.getIdToken(e),s=Xh(r);Z(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:eo(Ic(s.auth_time)),issuedAtTime:eo(Ic(s.iat)),expirationTime:eo(Ic(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ic(t){return Number(t)*1e3}function Xh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ya("JWT malformed, contained fewer than 3 sections"),null;try{const s=S_(n);return s?JSON.parse(s):(Ya("Failed to decode base64 JWT payload"),null)}catch(s){return Ya("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ng(t){const e=Xh(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zn&&PS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function PS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eo(this.lastLoginAt),this.creationTime=eo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await So(t,U_(n,{idToken:r}));Z(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?B_(i.providerUserInfo):[],l=kS(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Nd(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function NS(t){const e=vt(t);await jl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function B_(t){return t.map(e=>{var{providerId:n}=e,r=qh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t,e){const n=await M_(t,{},async()=>{const r=Uo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=F_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",L_.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jS(t,e){return ri(t,"POST","/v2/accounts:revokeToken",Yh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ng(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=ng(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await DS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ks;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Z(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Z(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ks,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=qh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await So(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AS(this,e)}reload(){return NS(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await So(this,CS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,h,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,b=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(l=n.tenantId)!==null&&l!==void 0?l:void 0,j=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(h=n.createdAt)!==null&&h!==void 0?h:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:_,emailVerified:C,isAnonymous:k,providerData:P,stsTokenManager:v}=n;Z(_&&v,e,"internal-error");const m=ks.fromJSON(this.name,v);Z(typeof _=="string",e,"internal-error"),Yn(g,e.name),Yn(y,e.name),Z(typeof C=="boolean",e,"internal-error"),Z(typeof k=="boolean",e,"internal-error"),Yn(b,e.name),Yn(N,e.name),Yn(S,e.name),Yn(j,e.name),Yn(I,e.name),Yn(E,e.name);const x=new Rn({uid:_,auth:e,email:y,emailVerified:C,displayName:g,isAnonymous:k,photoURL:N,phoneNumber:b,tenantId:S,stsTokenManager:m,createdAt:I,lastLoginAt:E});return P&&Array.isArray(P)&&(x.providerData=P.map(T=>Object.assign({},T))),j&&(x._redirectEventId=j),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new ks;s.updateFromServerResponse(n);const i=new Rn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await jl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Z(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?B_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ks;l.updateFromIdToken(r);const u=new Rn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Nd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new Map;function Nn(t){Fn(t instanceof Function,"Expected a class definition");let e=rg.get(t);return e?(Fn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$_.type="NONE";const sg=$_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t,e,n){return`firebase:${t}:${e}:${n}`}class Ds{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Xa(this.userKey,s.apiKey,i),this.fullPersistenceKey=Xa("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ds(Nn(sg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Nn(sg);const o=Xa(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(o);if(f){const g=Rn._fromJSON(e,f);h!==i&&(l=g),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ds(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ds(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G_(e))return"Blackberry";if(Q_(e))return"Webos";if(H_(e))return"Safari";if((e.includes("chrome/")||W_(e))&&!e.includes("edge/"))return"Chrome";if(K_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function z_(t=ht()){return/firefox\//i.test(t)}function H_(t=ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W_(t=ht()){return/crios\//i.test(t)}function q_(t=ht()){return/iemobile/i.test(t)}function K_(t=ht()){return/android/i.test(t)}function G_(t=ht()){return/blackberry/i.test(t)}function Q_(t=ht()){return/webos/i.test(t)}function Jh(t=ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VS(t=ht()){var e;return Jh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OS(){return ZI()&&document.documentMode===10}function Y_(t=ht()){return Jh(t)||K_(t)||Q_(t)||G_(t)||/windows phone/i.test(t)||q_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t,e=[]){let n;switch(t){case"Browser":n=ig(ht());break;case"Worker":n=`${ig(ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ni}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(t,e={}){return ri(t,"GET","/v2/passwordPolicy",Yh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=6;class US{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:FS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new og(this),this.idTokenSubscription=new og(this),this.beforeStateQueue=new LS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ds.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await U_(this,{idToken:e}),r=await Rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(An(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ES()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(zr(this));const n=e?vt(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MS(this),n=new US(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nn(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await Ds.create(this,[Nn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function cu(t){return vt(t)}class og{constructor(e){this.auth=e,this.observer=null,this.addObserver=aT(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $S(t){Zh=t}function zS(t){return Zh.loadJS(t)}function HS(){return Zh.gapiScript}function WS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e){const n=Wh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Nl(i,e??{}))return s;_n(s,"already-initialized")}return n.initialize({options:e})}function KS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function GS(t,e,n){const r=cu(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=J_(e),{host:o,port:l}=QS(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),YS()}function J_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QS(t){const e=J_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ag(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ag(o)}}}function ag(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function YS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t,e){return SS(t,"POST","/v1/accounts:signInWithIdp",Yh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="http://localhost";class Xr extends Z_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=qh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Xr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,js(e,n)}buildRequest(){const e={requestUri:XS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends ef{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends $o{constructor(){super("facebook.com")}static credential(e){return Xr._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends $o{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xr._fromParams({providerId:Sn.PROVIDER_ID,signInMethod:Sn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sn.credentialFromTaggedObject(e)}static credentialFromError(e){return Sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Sn.credential(n,r)}catch{return null}}}Sn.GOOGLE_SIGN_IN_METHOD="google.com";Sn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends $o{constructor(){super("github.com")}static credential(e){return Xr._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends $o{constructor(){super("twitter.com")}static credential(e,n){return Xr._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rr.credential(n,r)}catch{return null}}}rr.TWITTER_SIGN_IN_METHOD="twitter.com";rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Rn._fromIdTokenResponse(e,r,s),o=lg(r);return new Ws({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=lg(r);return new Ws({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function lg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends zn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vl(e,n,r,s)}}function ex(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Vl._fromErrorAndOperation(t,i,e,r):i})}async function JS(t,e,n=!1){const r=await So(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ws._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t,e,n=!1){const{auth:r}=t;if(An(r.app))return Promise.reject(zr(r));const s="reauthenticate";try{const i=await So(t,ex(r,s,e,t),n);Z(i.idToken,r,"internal-error");const o=Xh(i.idToken);Z(o,r,"internal-error");const{sub:l}=o;return Z(t.uid===l,r,"user-mismatch"),Ws._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(t,e,n=!1){if(An(t.app))return Promise.reject(zr(t));const r="signIn",s=await ex(t,r,e),i=await Ws._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function tb(t,e,n,r){return vt(t).onIdTokenChanged(e,n,r)}function nb(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function rb(t,e,n,r){return vt(t).onAuthStateChanged(e,n,r)}function sb(t){return vt(t).signOut()}const Ol="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ol,"1"),this.storage.removeItem(Ol),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=1e3,ob=10;class nx extends tx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);OS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ob):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ib)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nx.type="LOCAL";const ab=nx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends tx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rx.type="SESSION";const sx=rx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new du(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),u=await lb(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=tf("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(y.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return window}function cb(t){mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function db(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fb(){return ix()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firebaseLocalStorageDb",pb=1,Ll="firebaseLocalStorage",ax="fbase_key";class zo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hu(t,e){return t.transaction([Ll],e?"readwrite":"readonly").objectStore(Ll)}function mb(){const t=indexedDB.deleteDatabase(ox);return new zo(t).toPromise()}function kd(){const t=indexedDB.open(ox,pb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ll,{keyPath:ax})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ll)?e(r):(r.close(),await mb(),e(await kd()))})})}async function ug(t,e,n){const r=hu(t,!0).put({[ax]:e,value:n});return new zo(r).toPromise()}async function gb(t,e){const n=hu(t,!1).get(e),r=await new zo(n).toPromise();return r===void 0?null:r.value}function cg(t,e){const n=hu(t,!0).delete(e);return new zo(n).toPromise()}const yb=800,vb=3;class lx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ix()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=du._getInstance(fb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await db(),!this.activeServiceWorker)return;this.sender=new ub(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kd();return await ug(e,Ol,"1"),await cg(e,Ol),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ug(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=hu(s,!1).getAll();return new zo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lx.type="LOCAL";const _b=lx;new Bo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e){return e?Nn(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends Z_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xb(t){return eb(t.auth,new nf(t),t.bypassAuthState)}function wb(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),ZS(n,new nf(t),t.bypassAuthState)}async function Eb(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),JS(n,new nf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xb;case"linkViaPopup":case"linkViaRedirect":return Eb;case"reauthViaPopup":case"reauthViaRedirect":return wb;default:_n(this.auth,"internal-error")}}resolve(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=new Bo(2e3,1e4);async function Tb(t,e,n){if(An(t.app))return Promise.reject(rn(t,"operation-not-supported-in-this-environment"));const r=cu(t);_S(t,e,ef);const s=ux(r,n);return new Fr(r,"signInViaPopup",e,s).executeNotNull()}class Fr extends cx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const e=tf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ib.get())};e()}}Fr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="pendingRedirect",Ja=new Map;class bb extends cx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ja.get(this.auth._key());if(!e){try{const r=await Cb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ja.set(this.auth._key(),e)}return this.bypassAuthState||Ja.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Cb(t,e){const n=Rb(e),r=Pb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Ab(t,e){Ja.set(t._key(),e)}function Pb(t){return Nn(t._redirectPersistence)}function Rb(t){return Xa(Sb,t.config.apiKey,t.name)}async function Nb(t,e,n=!1){if(An(t.app))return Promise.reject(zr(t));const r=cu(t),s=ux(r,e),o=await new bb(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=10*60*1e3;class Db{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kb&&this.cachedEventUids.clear(),this.cachedEventUids.has(dg(e))}saveEventToCache(e){this.cachedEventUids.add(dg(e)),this.lastProcessedEventTime=Date.now()}}function dg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lb=/^https?/;async function Mb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Vb(t);for(const n of e)try{if(Fb(n))return}catch{}_n(t,"unauthorized-domain")}function Fb(t){const e=Rd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Lb.test(n))return!1;if(Ob.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new Bo(3e4,6e4);function hg(){const t=mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Bb(t){return new Promise((e,n)=>{var r,s,i;function o(){hg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hg(),n(rn(t,"network-request-failed"))},timeout:Ub.get()})}if(!((s=(r=mn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=mn().gapi)===null||i===void 0)&&i.load)o();else{const l=WS("iframefcb");return mn()[l]=()=>{gapi.load?o():n(rn(t,"network-request-failed"))},zS(`${HS()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Za=null,e})}let Za=null;function $b(t){return Za=Za||Bb(t),Za}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Bo(5e3,15e3),Hb="__/auth/iframe",Wb="emulator/auth/iframe",qb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gb(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qh(e,Wb):`https://${t.config.authDomain}/${Hb}`,r={apiKey:e.apiKey,appName:t.name,v:ni},s=Kb.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Uo(r).slice(1)}`}async function Qb(t){const e=await $b(t),n=mn().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:Gb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qb,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=rn(t,"network-request-failed"),l=mn().setTimeout(()=>{i(o)},zb.get());function u(){mn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xb=500,Jb=600,Zb="_blank",eC="http://localhost";class fg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tC(t,e,n,r=Xb,s=Jb){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Yb),{width:r.toString(),height:s.toString(),top:i,left:o}),h=ht().toLowerCase();n&&(l=W_(h)?Zb:n),z_(h)&&(e=e||eC,u.scrollbars="yes");const f=Object.entries(u).reduce((y,[b,N])=>`${y}${b}=${N},`,"");if(VS(h)&&l!=="_self")return nC(e||"",l),new fg(null);const g=window.open(e||"",l,f);Z(g,t,"popup-blocked");try{g.focus()}catch{}return new fg(g)}function nC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="__/auth/handler",sC="emulator/auth/handler",iC=encodeURIComponent("fac");async function pg(t,e,n,r,s,i){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ni,eventId:s};if(e instanceof ef){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",oT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof $o){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),h=u?`#${iC}=${encodeURIComponent(u)}`:"";return`${oC(t)}?${Uo(l).slice(1)}${h}`}function oC({config:t}){return t.emulator?Qh(t,sC):`https://${t.authDomain}/${rC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="webStorageSupport";class aC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sx,this._completeRedirectFn=Nb,this._overrideRedirectResult=Ab}async _openPopup(e,n,r,s){var i;Fn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await pg(e,n,r,Rd(),s);return tC(e,o,tf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await pg(e,n,r,Rd(),s);return cb(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Fn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Qb(e),r=new Db(e);return n.register("authEvent",s=>(Z(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tc,{type:Tc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Tc];o!==void 0&&n(!!o),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Mb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y_()||H_()||Jh()}}const lC=aC;var mg="@firebase/auth",gg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dC(t){Hs(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X_(t)},h=new BS(r,s,i,u);return KS(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Hs(new Yr("auth-internal",e=>{const n=cu(e.getProvider("auth").getImmediate());return(r=>new uC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(mg,gg,cC(t)),yr(mg,gg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=5*60,fC=A_("authIdTokenMaxAge")||hC;let yg=null;const pC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fC)return;const s=n==null?void 0:n.token;yg!==s&&(yg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function mC(t=k_()){const e=Wh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qS(t,{popupRedirectResolver:lC,persistence:[_b,ab,sx]}),r=A_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=pC(i.toString());nb(n,o,()=>o(n.currentUser)),tb(n,l=>o(l))}}const s=b_("auth");return s&&GS(n,`http://${s}`),n}function gC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$S({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",gC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dC("Browser");var yC="firebase",vC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(yC,vC,"app");var vg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,hx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,m){function x(){}x.prototype=m.prototype,v.D=m.prototype,v.prototype=new x,v.prototype.constructor=v,v.C=function(T,R,D){for(var A=Array(arguments.length-2),J=2;J<arguments.length;J++)A[J-2]=arguments[J];return m.prototype[R].apply(T,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,m,x){x||(x=0);var T=Array(16);if(typeof m=="string")for(var R=0;16>R;++R)T[R]=m.charCodeAt(x++)|m.charCodeAt(x++)<<8|m.charCodeAt(x++)<<16|m.charCodeAt(x++)<<24;else for(R=0;16>R;++R)T[R]=m[x++]|m[x++]<<8|m[x++]<<16|m[x++]<<24;m=v.g[0],x=v.g[1],R=v.g[2];var D=v.g[3],A=m+(D^x&(R^D))+T[0]+3614090360&4294967295;m=x+(A<<7&4294967295|A>>>25),A=D+(R^m&(x^R))+T[1]+3905402710&4294967295,D=m+(A<<12&4294967295|A>>>20),A=R+(x^D&(m^x))+T[2]+606105819&4294967295,R=D+(A<<17&4294967295|A>>>15),A=x+(m^R&(D^m))+T[3]+3250441966&4294967295,x=R+(A<<22&4294967295|A>>>10),A=m+(D^x&(R^D))+T[4]+4118548399&4294967295,m=x+(A<<7&4294967295|A>>>25),A=D+(R^m&(x^R))+T[5]+1200080426&4294967295,D=m+(A<<12&4294967295|A>>>20),A=R+(x^D&(m^x))+T[6]+2821735955&4294967295,R=D+(A<<17&4294967295|A>>>15),A=x+(m^R&(D^m))+T[7]+4249261313&4294967295,x=R+(A<<22&4294967295|A>>>10),A=m+(D^x&(R^D))+T[8]+1770035416&4294967295,m=x+(A<<7&4294967295|A>>>25),A=D+(R^m&(x^R))+T[9]+2336552879&4294967295,D=m+(A<<12&4294967295|A>>>20),A=R+(x^D&(m^x))+T[10]+4294925233&4294967295,R=D+(A<<17&4294967295|A>>>15),A=x+(m^R&(D^m))+T[11]+2304563134&4294967295,x=R+(A<<22&4294967295|A>>>10),A=m+(D^x&(R^D))+T[12]+1804603682&4294967295,m=x+(A<<7&4294967295|A>>>25),A=D+(R^m&(x^R))+T[13]+4254626195&4294967295,D=m+(A<<12&4294967295|A>>>20),A=R+(x^D&(m^x))+T[14]+2792965006&4294967295,R=D+(A<<17&4294967295|A>>>15),A=x+(m^R&(D^m))+T[15]+1236535329&4294967295,x=R+(A<<22&4294967295|A>>>10),A=m+(R^D&(x^R))+T[1]+4129170786&4294967295,m=x+(A<<5&4294967295|A>>>27),A=D+(x^R&(m^x))+T[6]+3225465664&4294967295,D=m+(A<<9&4294967295|A>>>23),A=R+(m^x&(D^m))+T[11]+643717713&4294967295,R=D+(A<<14&4294967295|A>>>18),A=x+(D^m&(R^D))+T[0]+3921069994&4294967295,x=R+(A<<20&4294967295|A>>>12),A=m+(R^D&(x^R))+T[5]+3593408605&4294967295,m=x+(A<<5&4294967295|A>>>27),A=D+(x^R&(m^x))+T[10]+38016083&4294967295,D=m+(A<<9&4294967295|A>>>23),A=R+(m^x&(D^m))+T[15]+3634488961&4294967295,R=D+(A<<14&4294967295|A>>>18),A=x+(D^m&(R^D))+T[4]+3889429448&4294967295,x=R+(A<<20&4294967295|A>>>12),A=m+(R^D&(x^R))+T[9]+568446438&4294967295,m=x+(A<<5&4294967295|A>>>27),A=D+(x^R&(m^x))+T[14]+3275163606&4294967295,D=m+(A<<9&4294967295|A>>>23),A=R+(m^x&(D^m))+T[3]+4107603335&4294967295,R=D+(A<<14&4294967295|A>>>18),A=x+(D^m&(R^D))+T[8]+1163531501&4294967295,x=R+(A<<20&4294967295|A>>>12),A=m+(R^D&(x^R))+T[13]+2850285829&4294967295,m=x+(A<<5&4294967295|A>>>27),A=D+(x^R&(m^x))+T[2]+4243563512&4294967295,D=m+(A<<9&4294967295|A>>>23),A=R+(m^x&(D^m))+T[7]+1735328473&4294967295,R=D+(A<<14&4294967295|A>>>18),A=x+(D^m&(R^D))+T[12]+2368359562&4294967295,x=R+(A<<20&4294967295|A>>>12),A=m+(x^R^D)+T[5]+4294588738&4294967295,m=x+(A<<4&4294967295|A>>>28),A=D+(m^x^R)+T[8]+2272392833&4294967295,D=m+(A<<11&4294967295|A>>>21),A=R+(D^m^x)+T[11]+1839030562&4294967295,R=D+(A<<16&4294967295|A>>>16),A=x+(R^D^m)+T[14]+4259657740&4294967295,x=R+(A<<23&4294967295|A>>>9),A=m+(x^R^D)+T[1]+2763975236&4294967295,m=x+(A<<4&4294967295|A>>>28),A=D+(m^x^R)+T[4]+1272893353&4294967295,D=m+(A<<11&4294967295|A>>>21),A=R+(D^m^x)+T[7]+4139469664&4294967295,R=D+(A<<16&4294967295|A>>>16),A=x+(R^D^m)+T[10]+3200236656&4294967295,x=R+(A<<23&4294967295|A>>>9),A=m+(x^R^D)+T[13]+681279174&4294967295,m=x+(A<<4&4294967295|A>>>28),A=D+(m^x^R)+T[0]+3936430074&4294967295,D=m+(A<<11&4294967295|A>>>21),A=R+(D^m^x)+T[3]+3572445317&4294967295,R=D+(A<<16&4294967295|A>>>16),A=x+(R^D^m)+T[6]+76029189&4294967295,x=R+(A<<23&4294967295|A>>>9),A=m+(x^R^D)+T[9]+3654602809&4294967295,m=x+(A<<4&4294967295|A>>>28),A=D+(m^x^R)+T[12]+3873151461&4294967295,D=m+(A<<11&4294967295|A>>>21),A=R+(D^m^x)+T[15]+530742520&4294967295,R=D+(A<<16&4294967295|A>>>16),A=x+(R^D^m)+T[2]+3299628645&4294967295,x=R+(A<<23&4294967295|A>>>9),A=m+(R^(x|~D))+T[0]+4096336452&4294967295,m=x+(A<<6&4294967295|A>>>26),A=D+(x^(m|~R))+T[7]+1126891415&4294967295,D=m+(A<<10&4294967295|A>>>22),A=R+(m^(D|~x))+T[14]+2878612391&4294967295,R=D+(A<<15&4294967295|A>>>17),A=x+(D^(R|~m))+T[5]+4237533241&4294967295,x=R+(A<<21&4294967295|A>>>11),A=m+(R^(x|~D))+T[12]+1700485571&4294967295,m=x+(A<<6&4294967295|A>>>26),A=D+(x^(m|~R))+T[3]+2399980690&4294967295,D=m+(A<<10&4294967295|A>>>22),A=R+(m^(D|~x))+T[10]+4293915773&4294967295,R=D+(A<<15&4294967295|A>>>17),A=x+(D^(R|~m))+T[1]+2240044497&4294967295,x=R+(A<<21&4294967295|A>>>11),A=m+(R^(x|~D))+T[8]+1873313359&4294967295,m=x+(A<<6&4294967295|A>>>26),A=D+(x^(m|~R))+T[15]+4264355552&4294967295,D=m+(A<<10&4294967295|A>>>22),A=R+(m^(D|~x))+T[6]+2734768916&4294967295,R=D+(A<<15&4294967295|A>>>17),A=x+(D^(R|~m))+T[13]+1309151649&4294967295,x=R+(A<<21&4294967295|A>>>11),A=m+(R^(x|~D))+T[4]+4149444226&4294967295,m=x+(A<<6&4294967295|A>>>26),A=D+(x^(m|~R))+T[11]+3174756917&4294967295,D=m+(A<<10&4294967295|A>>>22),A=R+(m^(D|~x))+T[2]+718787259&4294967295,R=D+(A<<15&4294967295|A>>>17),A=x+(D^(R|~m))+T[9]+3951481745&4294967295,v.g[0]=v.g[0]+m&4294967295,v.g[1]=v.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,v.g[2]=v.g[2]+R&4294967295,v.g[3]=v.g[3]+D&4294967295}r.prototype.u=function(v,m){m===void 0&&(m=v.length);for(var x=m-this.blockSize,T=this.B,R=this.h,D=0;D<m;){if(R==0)for(;D<=x;)s(this,v,D),D+=this.blockSize;if(typeof v=="string"){for(;D<m;)if(T[R++]=v.charCodeAt(D++),R==this.blockSize){s(this,T),R=0;break}}else for(;D<m;)if(T[R++]=v[D++],R==this.blockSize){s(this,T),R=0;break}}this.h=R,this.o+=m},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var m=1;m<v.length-8;++m)v[m]=0;var x=8*this.o;for(m=v.length-8;m<v.length;++m)v[m]=x&255,x/=256;for(this.u(v),v=Array(16),m=x=0;4>m;++m)for(var T=0;32>T;T+=8)v[x++]=this.g[m]>>>T&255;return v};function i(v,m){var x=l;return Object.prototype.hasOwnProperty.call(x,v)?x[v]:x[v]=m(v)}function o(v,m){this.h=m;for(var x=[],T=!0,R=v.length-1;0<=R;R--){var D=v[R]|0;T&&D==m||(x[R]=D,T=!1)}this.g=x}var l={};function u(v){return-128<=v&&128>v?i(v,function(m){return new o([m|0],0>m?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return g;if(0>v)return j(h(-v));for(var m=[],x=1,T=0;v>=x;T++)m[T]=v/x|0,x*=4294967296;return new o(m,0)}function f(v,m){if(v.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(v.charAt(0)=="-")return j(f(v.substring(1),m));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(m,8)),T=g,R=0;R<v.length;R+=8){var D=Math.min(8,v.length-R),A=parseInt(v.substring(R,R+D),m);8>D?(D=h(Math.pow(m,D)),T=T.j(D).add(h(A))):(T=T.j(x),T=T.add(h(A)))}return T}var g=u(0),y=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(S(this))return-j(this).m();for(var v=0,m=1,x=0;x<this.g.length;x++){var T=this.i(x);v+=(0<=T?T:4294967296+T)*m,m*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(N(this))return"0";if(S(this))return"-"+j(this).toString(v);for(var m=h(Math.pow(v,6)),x=this,T="";;){var R=C(x,m).g;x=I(x,R.j(m));var D=((0<x.g.length?x.g[0]:x.h)>>>0).toString(v);if(x=R,N(x))return D+T;for(;6>D.length;)D="0"+D;T=D+T}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function N(v){if(v.h!=0)return!1;for(var m=0;m<v.g.length;m++)if(v.g[m]!=0)return!1;return!0}function S(v){return v.h==-1}t.l=function(v){return v=I(this,v),S(v)?-1:N(v)?0:1};function j(v){for(var m=v.g.length,x=[],T=0;T<m;T++)x[T]=~v.g[T];return new o(x,~v.h).add(y)}t.abs=function(){return S(this)?j(this):this},t.add=function(v){for(var m=Math.max(this.g.length,v.g.length),x=[],T=0,R=0;R<=m;R++){var D=T+(this.i(R)&65535)+(v.i(R)&65535),A=(D>>>16)+(this.i(R)>>>16)+(v.i(R)>>>16);T=A>>>16,D&=65535,A&=65535,x[R]=A<<16|D}return new o(x,x[x.length-1]&-2147483648?-1:0)};function I(v,m){return v.add(j(m))}t.j=function(v){if(N(this)||N(v))return g;if(S(this))return S(v)?j(this).j(j(v)):j(j(this).j(v));if(S(v))return j(this.j(j(v)));if(0>this.l(b)&&0>v.l(b))return h(this.m()*v.m());for(var m=this.g.length+v.g.length,x=[],T=0;T<2*m;T++)x[T]=0;for(T=0;T<this.g.length;T++)for(var R=0;R<v.g.length;R++){var D=this.i(T)>>>16,A=this.i(T)&65535,J=v.i(R)>>>16,Ee=v.i(R)&65535;x[2*T+2*R]+=A*Ee,E(x,2*T+2*R),x[2*T+2*R+1]+=D*Ee,E(x,2*T+2*R+1),x[2*T+2*R+1]+=A*J,E(x,2*T+2*R+1),x[2*T+2*R+2]+=D*J,E(x,2*T+2*R+2)}for(T=0;T<m;T++)x[T]=x[2*T+1]<<16|x[2*T];for(T=m;T<2*m;T++)x[T]=0;return new o(x,0)};function E(v,m){for(;(v[m]&65535)!=v[m];)v[m+1]+=v[m]>>>16,v[m]&=65535,m++}function _(v,m){this.g=v,this.h=m}function C(v,m){if(N(m))throw Error("division by zero");if(N(v))return new _(g,g);if(S(v))return m=C(j(v),m),new _(j(m.g),j(m.h));if(S(m))return m=C(v,j(m)),new _(j(m.g),m.h);if(30<v.g.length){if(S(v)||S(m))throw Error("slowDivide_ only works with positive integers.");for(var x=y,T=m;0>=T.l(v);)x=k(x),T=k(T);var R=P(x,1),D=P(T,1);for(T=P(T,2),x=P(x,2);!N(T);){var A=D.add(T);0>=A.l(v)&&(R=R.add(x),D=A),T=P(T,1),x=P(x,1)}return m=I(v,R.j(m)),new _(R,m)}for(R=g;0<=v.l(m);){for(x=Math.max(1,Math.floor(v.m()/m.m())),T=Math.ceil(Math.log(x)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),D=h(x),A=D.j(m);S(A)||0<A.l(v);)x-=T,D=h(x),A=D.j(m);N(D)&&(D=y),R=R.add(D),v=I(v,A)}return new _(R,v)}t.A=function(v){return C(this,v).h},t.and=function(v){for(var m=Math.max(this.g.length,v.g.length),x=[],T=0;T<m;T++)x[T]=this.i(T)&v.i(T);return new o(x,this.h&v.h)},t.or=function(v){for(var m=Math.max(this.g.length,v.g.length),x=[],T=0;T<m;T++)x[T]=this.i(T)|v.i(T);return new o(x,this.h|v.h)},t.xor=function(v){for(var m=Math.max(this.g.length,v.g.length),x=[],T=0;T<m;T++)x[T]=this.i(T)^v.i(T);return new o(x,this.h^v.h)};function k(v){for(var m=v.g.length+1,x=[],T=0;T<m;T++)x[T]=v.i(T)<<1|v.i(T-1)>>>31;return new o(x,v.h)}function P(v,m){var x=m>>5;m%=32;for(var T=v.g.length-x,R=[],D=0;D<T;D++)R[D]=0<m?v.i(D+x)>>>m|v.i(D+x+1)<<32-m:v.i(D+x);return new o(R,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Hr=o}).apply(typeof vg<"u"?vg:typeof self<"u"?self:typeof window<"u"?window:{});var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fx,Bi,px,el,Dd,mx,gx,yx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,p){return a==Array.prototype||a==Object.prototype||(a[d]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Da=="object"&&Da];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var p=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var V=a[w];if(!(V in p))break e;p=p[V]}a=a[a.length-1],w=p[a],d=d(w),d!=w&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var p=0,w=!1,V={next:function(){if(!w&&p<a.length){var O=p++;return{value:d(O,a[O]),done:!1}}return w=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,p){return a.call.apply(a.bind,arguments)}function g(a,d,p){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,w),a.apply(d,V)}}return function(){return a.apply(d,arguments)}}function y(a,d,p){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,y.apply(null,arguments)}function b(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function N(a,d){function p(){}p.prototype=d.prototype,a.aa=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(w,V,O){for(var $=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)$[_e-2]=arguments[_e];return d.prototype[V].apply(w,$)}}function S(a){const d=a.length;if(0<d){const p=Array(d);for(let w=0;w<d;w++)p[w]=a[w];return p}return[]}function j(a,d){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(u(w)){const V=a.length||0,O=w.length||0;a.length=V+O;for(let $=0;$<O;$++)a[V+$]=w[$]}else a.push(w)}}class I{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function E(a){return/^[\s\xa0]*$/.test(a)}function _(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function C(a){return C[" "](a),a}C[" "]=function(){};var k=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function P(a,d,p){for(const w in a)d.call(p,a[w],w,a)}function v(a,d){for(const p in a)d.call(void 0,a[p],p,a)}function m(a){const d={};for(const p in a)d[p]=a[p];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,d){let p,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(p in w)a[p]=w[p];for(let O=0;O<x.length;O++)p=x[O],Object.prototype.hasOwnProperty.call(w,p)&&(a[p]=w[p])}}function R(a){var d=1;a=a.split(":");const p=[];for(;0<d&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function D(a){l.setTimeout(()=>{throw a},0)}function A(){var a=Y;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class J{constructor(){this.h=this.g=null}add(d,p){const w=Ee.get();w.set(d,p),this.h?this.h.next=w:this.g=w,this.h=w}}var Ee=new I(()=>new je,a=>a.reset());class je{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let We,B=!1,Y=new J,X=()=>{const a=l.Promise.resolve(void 0);We=()=>{a.then(xe)}};var xe=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(p){D(p)}var d=Ee;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}B=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,d),l.removeEventListener("test",p,d)}catch{}return a}();function ye(a,d){if(K.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(k){e:{try{C(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ve[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ye.aa.h.call(this)}}N(ye,K);var ve={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),qt=0;function Ct(a,d,p,w,V){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!w,this.ha=V,this.key=++qt,this.da=this.fa=!1}function Kt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Hn(a){this.src=a,this.g={},this.h=0}Hn.prototype.add=function(a,d,p,w,V){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var $=un(a,d,w,V);return-1<$?(d=a[$],p||(d.fa=!1)):(d=new Ct(d,this.src,O,!!w,V),d.fa=p,a.push(d)),d};function Wn(a,d){var p=d.type;if(p in a.g){var w=a.g[p],V=Array.prototype.indexOf.call(w,d,void 0),O;(O=0<=V)&&Array.prototype.splice.call(w,V,1),O&&(Kt(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function un(a,d,p,w){for(var V=0;V<a.length;++V){var O=a[V];if(!O.da&&O.listener==d&&O.capture==!!p&&O.ha==w)return V}return-1}var li="closure_lm_"+(1e6*Math.random()|0),ui={};function ci(a,d,p,w,V){if(Array.isArray(d)){for(var O=0;O<d.length;O++)ci(a,d[O],p,w,V);return null}return p=le(p),a&&a[pe]?a.K(d,p,h(w)?!!w.capture:!1,V):Jo(a,d,p,!1,w,V)}function Jo(a,d,p,w,V,O){if(!d)throw Error("Invalid event type");var $=h(V)?!!V.capture:!!V,_e=pi(a);if(_e||(a[li]=_e=new Hn(a)),p=_e.add(d,p,w,$,O),p.proxy)return p;if(w=Ar(),p.proxy=w,w.src=a,w.listener=p,a.addEventListener)se||(V=$),V===void 0&&(V=!1),a.addEventListener(d.toString(),w,V);else if(a.attachEvent)a.attachEvent(Zo(d.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ar(){function a(p){return d.call(a.src,a.listener,p)}const d=fi;return a}function di(a,d,p,w,V){if(Array.isArray(d))for(var O=0;O<d.length;O++)di(a,d[O],p,w,V);else w=h(w)?!!w.capture:!!w,p=le(p),a&&a[pe]?(a=a.i,d=String(d).toString(),d in a.g&&(O=a.g[d],p=un(O,p,w,V),-1<p&&(Kt(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete a.g[d],a.h--)))):a&&(a=pi(a))&&(d=a.g[d.toString()],a=-1,d&&(a=un(d,p,w,V)),(p=-1<a?d[a]:null)&&hi(p))}function hi(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[pe])Wn(d.i,a);else{var p=a.type,w=a.proxy;d.removeEventListener?d.removeEventListener(p,w,a.capture):d.detachEvent?d.detachEvent(Zo(p),w):d.addListener&&d.removeListener&&d.removeListener(w),(p=pi(d))?(Wn(p,a),p.h==0&&(p.src=null,d[li]=null)):Kt(a)}}}function Zo(a){return a in ui?ui[a]:ui[a]="on"+a}function fi(a,d){if(a.da)a=!0;else{d=new ye(d,this);var p=a.listener,w=a.ha||a.src;a.fa&&hi(a),a=p.call(w,d)}return a}function pi(a){return a=a[li],a instanceof Hn?a:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(a){return typeof a=="function"?a:(a[Q]||(a[Q]=function(d){return a.handleEvent(d)}),a[Q])}function te(){z.call(this),this.i=new Hn(this),this.M=this,this.F=null}N(te,z),te.prototype[pe]=!0,te.prototype.removeEventListener=function(a,d,p,w){di(this,a,d,p,w)};function fe(a,d){var p,w=a.F;if(w)for(p=[];w;w=w.F)p.push(w);if(a=a.M,w=d.type||d,typeof d=="string")d=new K(d,a);else if(d instanceof K)d.target=d.target||a;else{var V=d;d=new K(w,a),T(d,V)}if(V=!0,p)for(var O=p.length-1;0<=O;O--){var $=d.g=p[O];V=At($,w,!0,d)&&V}if($=d.g=a,V=At($,w,!0,d)&&V,V=At($,w,!1,d)&&V,p)for(O=0;O<p.length;O++)$=d.g=p[O],V=At($,w,!1,d)&&V}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var p=a.g[d],w=0;w<p.length;w++)Kt(p[w]);delete a.g[d],a.h--}}this.F=null},te.prototype.K=function(a,d,p,w){return this.i.add(String(a),d,!1,p,w)},te.prototype.L=function(a,d,p,w){return this.i.add(String(a),d,!0,p,w)};function At(a,d,p,w){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,O=0;O<d.length;++O){var $=d[O];if($&&!$.da&&$.capture==p){var _e=$.listener,Qe=$.ha||$.src;$.fa&&Wn(a.i,$),V=_e.call(Qe,w)!==!1&&V}}return V&&!w.defaultPrevented}function Ot(a,d,p){if(typeof a=="function")p&&(a=y(a,p));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function ft(a){a.g=Ot(()=>{a.g=null,a.i&&(a.i=!1,ft(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Gt extends z{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lt(a){z.call(this),this.h=a,this.g={}}N(Lt,z);var Pu=[];function mi(a){P(a.g,function(d,p){this.g.hasOwnProperty(p)&&hi(d)},a),a.g={}}Lt.prototype.N=function(){Lt.aa.N.call(this),mi(this)},Lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ru=l.JSON.stringify,Uw=l.JSON.parse,Bw=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Nu(){}Nu.prototype.h=null;function Wf(a){return a.h||(a.h=a.i())}function qf(){}var gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ku(){K.call(this,"d")}N(ku,K);function Du(){K.call(this,"c")}N(Du,K);var Pr={},Kf=null;function ea(){return Kf=Kf||new te}Pr.La="serverreachability";function Gf(a){K.call(this,Pr.La,a)}N(Gf,K);function yi(a){const d=ea();fe(d,new Gf(d))}Pr.STAT_EVENT="statevent";function Qf(a,d){K.call(this,Pr.STAT_EVENT,a),this.stat=d}N(Qf,K);function pt(a){const d=ea();fe(d,new Qf(d,a))}Pr.Ma="timingevent";function Yf(a,d){K.call(this,Pr.Ma,a),this.size=d}N(Yf,K);function vi(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function _i(){this.g=!0}_i.prototype.xa=function(){this.g=!1};function $w(a,d,p,w,V,O){a.info(function(){if(a.g)if(O)for(var $="",_e=O.split("&"),Qe=0;Qe<_e.length;Qe++){var de=_e[Qe].split("=");if(1<de.length){var rt=de[0];de=de[1];var st=rt.split("_");$=2<=st.length&&st[1]=="type"?$+(rt+"="+de+"&"):$+(rt+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+d+`
`+p+`
`+$})}function zw(a,d,p,w,V,O,$){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+d+`
`+p+`
`+O+" "+$})}function os(a,d,p,w){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ww(a,p)+(w?" "+w:"")})}function Hw(a,d){a.info(function(){return"TIMEOUT: "+d})}_i.prototype.info=function(){};function Ww(a,d){if(!a.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var w=p[a];if(!(2>w.length)){var V=w[1];if(Array.isArray(V)&&!(1>V.length)){var O=V[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<V.length;$++)V[$]=""}}}}return Ru(p)}catch{return d}}var ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ju;function na(){}N(na,Nu),na.prototype.g=function(){return new XMLHttpRequest},na.prototype.i=function(){return{}},ju=new na;function qn(a,d,p,w){this.j=a,this.i=d,this.l=p,this.R=w||1,this.U=new Lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jf}function Jf(){this.i=null,this.g="",this.h=!1}var Zf={},Vu={};function Ou(a,d,p){a.L=1,a.v=oa(wn(d)),a.m=p,a.P=!0,ep(a,null)}function ep(a,d){a.F=Date.now(),ra(a),a.A=wn(a.v);var p=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),pp(p.i,"t",w),a.C=0,p=a.j.J,a.h=new Jf,a.g=kp(a.j,p?d:null,!a.m),0<a.O&&(a.M=new Gt(y(a.Y,a,a.g),a.O)),d=a.U,p=a.g,w=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Pu[0]=V.toString()),V=Pu);for(var O=0;O<V.length;O++){var $=ci(p,V[O],w||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),yi(),$w(a.i,a.u,a.A,a.l,a.R,a.m)}qn.prototype.ca=function(a){a=a.target;const d=this.M;d&&En(a)==3?d.j():this.Y(a)},qn.prototype.Y=function(a){try{if(a==this.g)e:{const st=En(this.g);var d=this.g.Ba();const us=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||wp(this.g)))){this.J||st!=4||d==7||(d==8||0>=us?yi(3):yi(2)),Lu(this);var p=this.g.Z();this.X=p;t:if(tp(this)){var w=wp(this.g);a="";var V=w.length,O=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),xi(this);var $="";break t}this.h.i=new l.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,a+=this.h.i.decode(w[d],{stream:!(O&&d==V-1)});w.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,zw(this.i,this.u,this.A,this.l,this.R,st,p),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,Qe=this.g;if((_e=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(_e)){var de=_e;break t}}de=null}if(p=de)os(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mu(this,p);else{this.o=!1,this.s=3,pt(12),Rr(this),xi(this);break e}}if(this.P){p=!0;let Qt;for(;!this.J&&this.C<$.length;)if(Qt=qw(this,$),Qt==Vu){st==4&&(this.s=4,pt(14),p=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Zf){this.s=4,pt(15),os(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else os(this.i,this.l,Qt,null),Mu(this,Qt);if(tp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||$.length!=0||this.h.h||(this.s=1,pt(16),p=!1),this.o=this.o&&p,!p)os(this.i,this.l,$,"[Invalid Chunked Response]"),Rr(this),xi(this);else if(0<$.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Hu(rt),rt.M=!0,pt(11))}}else os(this.i,this.l,$,null),Mu(this,$);st==4&&Rr(this),this.o&&!this.J&&(st==4?Ap(this.j,this):(this.o=!1,ra(this)))}else u0(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Rr(this),xi(this)}}}catch{}finally{}};function tp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function qw(a,d){var p=a.C,w=d.indexOf(`
`,p);return w==-1?Vu:(p=Number(d.substring(p,w)),isNaN(p)?Zf:(w+=1,w+p>d.length?Vu:(d=d.slice(w,w+p),a.C=w+p,d)))}qn.prototype.cancel=function(){this.J=!0,Rr(this)};function ra(a){a.S=Date.now()+a.I,np(a,a.I)}function np(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=vi(y(a.ba,a),d)}function Lu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}qn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Hw(this.i,this.A),this.L!=2&&(yi(),pt(17)),Rr(this),this.s=2,xi(this)):np(this,this.S-a)};function xi(a){a.j.G==0||a.J||Ap(a.j,a)}function Rr(a){Lu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,mi(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Mu(a,d){try{var p=a.j;if(p.G!=0&&(p.g==a||Fu(p.h,a))){if(!a.K&&Fu(p.h,a)&&p.G==3){try{var w=p.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)ha(p),ca(p);else break e;zu(p),pt(18)}}else p.za=V[1],0<p.za-p.T&&37500>V[2]&&p.F&&p.v==0&&!p.C&&(p.C=vi(y(p.Za,p),6e3));if(1>=ip(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else kr(p,11)}else if((a.K||p.g==a)&&ha(p),!E(d))for(V=p.Da.g.parse(d),d=0;d<V.length;d++){let de=V[d];if(p.T=de[0],de=de[1],p.G==2)if(de[0]=="c"){p.K=de[1],p.ia=de[2];const rt=de[3];rt!=null&&(p.la=rt,p.j.info("VER="+p.la));const st=de[4];st!=null&&(p.Aa=st,p.j.info("SVER="+p.Aa));const us=de[5];us!=null&&typeof us=="number"&&0<us&&(w=1.5*us,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const Qt=a.g;if(Qt){const pa=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pa){var O=w.h;O.g||pa.indexOf("spdy")==-1&&pa.indexOf("quic")==-1&&pa.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Uu(O,O.h),O.h=null))}if(w.D){const Wu=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Wu&&(w.ya=Wu,Ie(w.I,w.D,Wu))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var $=a;if(w.qa=Np(w,w.J?w.ia:null,w.W),$.K){op(w.h,$);var _e=$,Qe=w.L;Qe&&(_e.I=Qe),_e.B&&(Lu(_e),ra(_e)),w.g=$}else bp(w);0<p.i.length&&da(p)}else de[0]!="stop"&&de[0]!="close"||kr(p,7);else p.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?kr(p,7):$u(p):de[0]!="noop"&&p.l&&p.l.ta(de),p.v=0)}}yi(4)}catch{}}var Kw=class{constructor(a,d){this.g=a,this.map=d}};function rp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ip(a){return a.h?1:a.g?a.g.size:0}function Fu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Uu(a,d){a.g?a.g.add(d):a.h=d}function op(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}rp.prototype.cancel=function(){if(this.i=ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ap(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const p of a.g.values())d=d.concat(p.D);return d}return S(a.i)}function Gw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],p=a.length,w=0;w<p;w++)d.push(a[w]);return d}d=[],p=0;for(w in a)d[p++]=a[w];return d}function Qw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var p=0;p<a;p++)d.push(p);return d}d=[],p=0;for(const w in a)d[p++]=w;return d}}}function lp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var p=Qw(a),w=Gw(a),V=w.length,O=0;O<V;O++)d.call(void 0,w[O],p&&p[O],a)}var up=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yw(a,d){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var w=a[p].indexOf("="),V=null;if(0<=w){var O=a[p].substring(0,w);V=a[p].substring(w+1)}else O=a[p];d(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Nr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Nr){this.h=a.h,sa(this,a.j),this.o=a.o,this.g=a.g,ia(this,a.s),this.l=a.l;var d=a.i,p=new Ii;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),cp(this,p),this.m=a.m}else a&&(d=String(a).match(up))?(this.h=!1,sa(this,d[1]||"",!0),this.o=wi(d[2]||""),this.g=wi(d[3]||"",!0),ia(this,d[4]),this.l=wi(d[5]||"",!0),cp(this,d[6]||"",!0),this.m=wi(d[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}Nr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Ei(d,dp,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ei(d,dp,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Ei(p,p.charAt(0)=="/"?Zw:Jw,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Ei(p,t0)),a.join("")};function wn(a){return new Nr(a)}function sa(a,d,p){a.j=p?wi(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ia(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function cp(a,d,p){d instanceof Ii?(a.i=d,n0(a.i,a.h)):(p||(d=Ei(d,e0)),a.i=new Ii(d,a.h))}function Ie(a,d,p){a.i.set(d,p)}function oa(a){return Ie(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function wi(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ei(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,Xw),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var dp=/[#\/\?@]/g,Jw=/[#\?:]/g,Zw=/[#\?]/g,e0=/[#\?@]/g,t0=/#/g;function Ii(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Kn(a){a.g||(a.g=new Map,a.h=0,a.i&&Yw(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=Ii.prototype,t.add=function(a,d){Kn(this),this.i=null,a=as(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function hp(a,d){Kn(a),d=as(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function fp(a,d){return Kn(a),d=as(a,d),a.g.has(d)}t.forEach=function(a,d){Kn(this),this.g.forEach(function(p,w){p.forEach(function(V){a.call(d,V,w,this)},this)},this)},t.na=function(){Kn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let w=0;w<d.length;w++){const V=a[w];for(let O=0;O<V.length;O++)p.push(d[w])}return p},t.V=function(a){Kn(this);let d=[];if(typeof a=="string")fp(this,a)&&(d=d.concat(this.g.get(as(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)d=d.concat(a[p])}return d},t.set=function(a,d){return Kn(this),this.i=null,a=as(this,a),fp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function pp(a,d,p){hp(a,d),0<p.length&&(a.i=null,a.g.set(as(a,d),S(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var w=d[p];const O=encodeURIComponent(String(w)),$=this.V(w);for(w=0;w<$.length;w++){var V=O;$[w]!==""&&(V+="="+encodeURIComponent(String($[w]))),a.push(V)}}return this.i=a.join("&")};function as(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function n0(a,d){d&&!a.j&&(Kn(a),a.i=null,a.g.forEach(function(p,w){var V=w.toLowerCase();w!=V&&(hp(this,w),pp(this,V,p))},a)),a.j=d}function r0(a,d){const p=new _i;if(l.Image){const w=new Image;w.onload=b(Gn,p,"TestLoadImage: loaded",!0,d,w),w.onerror=b(Gn,p,"TestLoadImage: error",!1,d,w),w.onabort=b(Gn,p,"TestLoadImage: abort",!1,d,w),w.ontimeout=b(Gn,p,"TestLoadImage: timeout",!1,d,w),l.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else d(!1)}function s0(a,d){const p=new _i,w=new AbortController,V=setTimeout(()=>{w.abort(),Gn(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:w.signal}).then(O=>{clearTimeout(V),O.ok?Gn(p,"TestPingServer: ok",!0,d):Gn(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),Gn(p,"TestPingServer: error",!1,d)})}function Gn(a,d,p,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(p)}catch{}}function i0(){this.g=new Bw}function o0(a,d,p){const w=p||"";try{lp(a,function(V,O){let $=V;h(V)&&($=Ru(V)),d.push(w+O+"="+encodeURIComponent($))})}catch(V){throw d.push(w+"type="+encodeURIComponent("_badmap")),V}}function aa(a){this.l=a.Ub||null,this.j=a.eb||!1}N(aa,Nu),aa.prototype.g=function(){return new la(this.l,this.j)},aa.prototype.i=function(a){return function(){return a}}({});function la(a,d){te.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(la,te),t=la.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Si(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function mp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ti(this):Si(this),this.readyState==3&&mp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ti(this))},t.Qa=function(a){this.g&&(this.response=a,Ti(this))},t.ga=function(){this.g&&Ti(this)};function Ti(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Si(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function Si(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function gp(a){let d="";return P(a,function(p,w){d+=w,d+=":",d+=p,d+=`\r
`}),d}function Bu(a,d,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=gp(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Ie(a,d,p))}function ke(a){te.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ke,te);var a0=/^https?$/i,l0=["POST","PUT"];t=ke.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ju.g(),this.v=this.o?Wf(this.o):Wf(ju),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(O){yp(this,O);return}if(a=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)p.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const O of w.keys())p.set(O,w.get(O));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(l0,d,void 0))||w||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of p)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xp(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){yp(this,O)}};function yp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,vp(a),ua(a)}function vp(a){a.A||(a.A=!0,fe(a,"complete"),fe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,fe(this,"complete"),fe(this,"abort"),ua(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ua(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_p(this):this.bb())},t.bb=function(){_p(this)};function _p(a){if(a.h&&typeof o<"u"&&(!a.v[1]||En(a)!=4||a.Z()!=2)){if(a.u&&En(a)==4)Ot(a.Ea,0,a);else if(fe(a,"readystatechange"),En(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var w;if(w=$===0){var V=String(a.D).match(up)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),w=!a0.test(V?V.toLowerCase():"")}p=w}if(p)fe(a,"complete"),fe(a,"success");else{a.m=6;try{var O=2<En(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",vp(a)}}finally{ua(a)}}}}function ua(a,d){if(a.g){xp(a);const p=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||fe(a,"ready");try{p.onreadystatechange=w}catch{}}}function xp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function En(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Uw(d)}};function wp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function u0(a){const d={};a=(a.g&&2<=En(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(E(a[w]))continue;var p=R(a[w]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=d[V]||[];d[V]=O,O.push(p)}v(d,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function Ep(a){this.Aa=0,this.i=[],this.j=new _i,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,a),this.cb=bi("retryDelaySeedMs",1e4,a),this.Wa=bi("forwardChannelMaxRetries",2,a),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new rp(a&&a.concurrentRequestLimit),this.Da=new i0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ep.prototype,t.la=8,t.G=1,t.connect=function(a,d,p,w){pt(0),this.W=a,this.H=d||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=Np(this,null,this.W),da(this)};function $u(a){if(Ip(a),a.G==3){var d=a.U++,p=wn(a.I);if(Ie(p,"SID",a.K),Ie(p,"RID",d),Ie(p,"TYPE","terminate"),Ci(a,p),d=new qn(a,a.j,d),d.L=2,d.v=oa(wn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=d.v,p=!0),p||(d.g=kp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ra(d)}Rp(a)}function ca(a){a.g&&(Hu(a),a.g.cancel(),a.g=null)}function Ip(a){ca(a),a.u&&(l.clearTimeout(a.u),a.u=null),ha(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function da(a){if(!sp(a.h)&&!a.s){a.s=!0;var d=a.Ga;We||X(),B||(We(),B=!0),Y.add(d,a),a.B=0}}function c0(a,d){return ip(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=vi(y(a.Ga,a,d),Pp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new qn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=m(O),T(O,this.S)):O=this.S),this.m!==null||this.O||(V.H=O,O=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Sp(this,V,d),p=wn(this.I),Ie(p,"RID",a),Ie(p,"CVER",22),this.D&&Ie(p,"X-HTTP-Session-Id",this.D),Ci(this,p),O&&(this.O?d="headers="+encodeURIComponent(String(gp(O)))+"&"+d:this.m&&Bu(p,this.m,O)),Uu(this.h,V),this.Ua&&Ie(p,"TYPE","init"),this.P?(Ie(p,"$req",d),Ie(p,"SID","null"),V.T=!0,Ou(V,p,null)):Ou(V,p,d),this.G=2}}else this.G==3&&(a?Tp(this,a):this.i.length==0||sp(this.h)||Tp(this))};function Tp(a,d){var p;d?p=d.l:p=a.U++;const w=wn(a.I);Ie(w,"SID",a.K),Ie(w,"RID",p),Ie(w,"AID",a.T),Ci(a,w),a.m&&a.o&&Bu(w,a.m,a.o),p=new qn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Sp(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Uu(a.h,p),Ou(p,w,d)}function Ci(a,d){a.H&&P(a.H,function(p,w){Ie(d,w,p)}),a.l&&lp({},function(p,w){Ie(d,w,p)})}function Sp(a,d,p){p=Math.min(a.i.length,p);var w=a.l?y(a.l.Na,a.l,a):null;e:{var V=a.i;let O=-1;for(;;){const $=["count="+p];O==-1?0<p?(O=V[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let _e=!0;for(let Qe=0;Qe<p;Qe++){let de=V[Qe].g;const rt=V[Qe].map;if(de-=O,0>de)O=Math.max(0,V[Qe].g-100),_e=!1;else try{o0(rt,$,"req"+de+"_")}catch{w&&w(rt)}}if(_e){w=$.join("&");break e}}}return a=a.i.splice(0,p),d.D=a,w}function bp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;We||X(),B||(We(),B=!0),Y.add(d,a),a.v=0}}function zu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=vi(y(a.Fa,a),Pp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Cp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=vi(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),ca(this),Cp(this))};function Hu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Cp(a){a.g=new qn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=wn(a.qa);Ie(d,"RID","rpc"),Ie(d,"SID",a.K),Ie(d,"AID",a.T),Ie(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ie(d,"TO",a.ja),Ie(d,"TYPE","xmlhttp"),Ci(a,d),a.m&&a.o&&Bu(d,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=oa(wn(d)),p.m=null,p.P=!0,ep(p,a)}t.Za=function(){this.C!=null&&(this.C=null,ca(this),zu(this),pt(19))};function ha(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Ap(a,d){var p=null;if(a.g==d){ha(a),Hu(a),a.g=null;var w=2}else if(Fu(a.h,d))p=d.D,op(a.h,d),w=1;else return;if(a.G!=0){if(d.o)if(w==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var V=a.B;w=ea(),fe(w,new Yf(w,p)),da(a)}else bp(a);else if(V=d.s,V==3||V==0&&0<d.X||!(w==1&&c0(a,d)||w==2&&zu(a)))switch(p&&0<p.length&&(d=a.h,d.i=d.i.concat(p)),V){case 1:kr(a,5);break;case 4:kr(a,10);break;case 3:kr(a,6);break;default:kr(a,2)}}}function Pp(a,d){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*d}function kr(a,d){if(a.j.info("Error code "+d),d==2){var p=y(a.fb,a),w=a.Xa;const V=!w;w=new Nr(w||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||sa(w,"https"),oa(w),V?r0(w.toString(),p):s0(w.toString(),p)}else pt(2);a.G=0,a.l&&a.l.sa(d),Rp(a),Ip(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Rp(a){if(a.G=0,a.ka=[],a.l){const d=ap(a.h);(d.length!=0||a.i.length!=0)&&(j(a.ka,d),j(a.ka,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.ra()}}function Np(a,d,p){var w=p instanceof Nr?wn(p):new Nr(p);if(w.g!="")d&&(w.g=d+"."+w.g),ia(w,w.s);else{var V=l.location;w=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var O=new Nr(null);w&&sa(O,w),d&&(O.g=d),V&&ia(O,V),p&&(O.l=p),w=O}return p=a.D,d=a.ya,p&&d&&Ie(w,p,d),Ie(w,"VER",a.la),Ci(a,w),w}function kp(a,d,p){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new ke(new aa({eb:p})):new ke(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dp(){}t=Dp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fa(){}fa.prototype.g=function(a,d){return new Pt(a,d)};function Pt(a,d){te.call(this),this.g=new Ep(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!E(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ls(this)}N(Pt,te),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){$u(this.g)},Pt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Ru(a),a=p);d.i.push(new Kw(d.Ya++,a)),d.G==3&&da(d)},Pt.prototype.N=function(){this.g.l=null,delete this.j,$u(this.g),delete this.g,Pt.aa.N.call(this)};function jp(a){ku.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}N(jp,ku);function Vp(){Du.call(this),this.status=1}N(Vp,Du);function ls(a){this.g=a}N(ls,Dp),ls.prototype.ua=function(){fe(this.g,"a")},ls.prototype.ta=function(a){fe(this.g,new jp(a))},ls.prototype.sa=function(a){fe(this.g,new Vp)},ls.prototype.ra=function(){fe(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,yx=function(){return new fa},gx=function(){return ea()},mx=Pr,Dd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,el=ta,Xf.COMPLETE="complete",px=Xf,qf.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",te.prototype.listen=te.prototype.K,Bi=qf,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,fx=ke}).apply(typeof Da<"u"?Da:typeof self<"u"?self:typeof window<"u"?window:{});const _g="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let si="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new zh("@firebase/firestore");function Oi(){return Jr.logLevel}function q(t,...e){if(Jr.logLevel<=ae.DEBUG){const n=e.map(rf);Jr.debug(`Firestore (${si}): ${t}`,...n)}}function Un(t,...e){if(Jr.logLevel<=ae.ERROR){const n=e.map(rf);Jr.error(`Firestore (${si}): ${t}`,...n)}}function qs(t,...e){if(Jr.logLevel<=ae.WARN){const n=e.map(rf);Jr.warn(`Firestore (${si}): ${t}`,...n)}}function rf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${si}) INTERNAL ASSERTION FAILED: `+t;throw Un(e),new Error(e)}function ge(t,e){t||ee()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _C{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class xC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wC{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Dn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string"),new vx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new lt(e)}}class EC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class IC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new EC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ge(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string"),this.R=n.token,new TC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=bC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Ks(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new He(0,0))}static max(){return new ne(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends bo{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const CC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends bo{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return CC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Je(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new W(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Se.fromString(e))}static fromName(e){return new G(Se.fromString(e).popFirst(5))}static empty(){return new G(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Se(e.slice()))}}function AC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new wr(s,G.empty(),e)}function PC(t){return new wr(t.readTime,t.key,-1)}class wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wr(ne.min(),G.empty(),-1)}static max(){return new wr(ne.max(),G.empty(),-1)}}function RC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==NC)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function DC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sf.oe=-1;function fu(t){return t==null}function Ml(t){return t===0&&1/t==-1/0}function jC(t){return typeof t=="number"&&Number.isInteger(t)&&!Ml(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ii(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ja(this.root,e,this.comparator,!0)}}class ja{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=s??Xe.EMPTY,this.right=i??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wg(this.data.getIterator())}getIteratorFrom(e){return new wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new en([])}unionWith(e){let n=new et(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ks(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new wx("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const VC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(ge(!!t),typeof t=="string"){let e=0;const n=VC.exec(t);if(ge(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function af(t){const e=t.mapValue.fields.__previous_value__;return of(e)?af(e):e}function Co(t){const e=Er(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,r,s,i,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class Ao{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ao("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ao&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va={mapValue:{}};function es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?of(t)?4:MC(t)?9007199254740991:LC(t)?10:11:ee()}function xn(t,e){if(t===e)return!0;const n=es(t);if(n!==es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Co(t).isEqual(Co(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Er(s.timestampValue),l=Er(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Zr(s.bytesValue).isEqual(Zr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ve(s.geoPointValue.latitude)===Ve(i.geoPointValue.latitude)&&Ve(s.geoPointValue.longitude)===Ve(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ve(s.integerValue)===Ve(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ve(s.doubleValue),l=Ve(i.doubleValue);return o===l?Ml(o)===Ml(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ks(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(xg(o)!==xg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!xn(o[u],l[u])))return!1;return!0}(t,e);default:return ee()}}function Po(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function Gs(t,e){if(t===e)return 0;const n=es(t),r=es(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ve(i.integerValue||i.doubleValue),u=Ve(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Eg(t.timestampValue,e.timestampValue);case 4:return Eg(Co(t),Co(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Zr(i),u=Zr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=he(l[h],u[h]);if(f!==0)return f}return he(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=he(Ve(i.latitude),Ve(o.latitude));return l!==0?l:he(Ve(i.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ig(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,f;const g=i.fields||{},y=o.fields||{},b=(l=g.value)===null||l===void 0?void 0:l.arrayValue,N=(u=y.value)===null||u===void 0?void 0:u.arrayValue,S=he(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return S!==0?S:Ig(b,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Va.mapValue&&o===Va.mapValue)return 0;if(i===Va.mapValue)return 1;if(o===Va.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const y=he(u[g],f[g]);if(y!==0)return y;const b=Gs(l[u[g]],h[f[g]]);if(b!==0)return b}return he(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ee()}}function Eg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Er(t),r=Er(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function Ig(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Gs(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function Qs(t){return jd(t)}function jd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Er(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=jd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${jd(n.fields[o])}`;return s+"}"}(t.mapValue):ee()}function Tg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vd(t){return!!t&&"integerValue"in t}function lf(t){return!!t&&"arrayValue"in t}function Sg(t){return!!t&&"nullValue"in t}function bg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tl(t){return!!t&&"mapValue"in t}function LC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function to(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ii(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=to(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=to(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=to(n)}setAll(e){let n=Je.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=to(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());tl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];tl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ii(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ut(to(this.value))}}function Ex(t){const e=[];return ii(t.fields,(n,r)=>{const s=new Je([n]);if(tl(r)){const i=Ex(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ct(e,0,ne.min(),ne.min(),ne.min(),Ut.empty(),0)}static newFoundDocument(e,n,r,s){return new ct(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new ct(e,2,n,ne.min(),ne.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,ne.min(),ne.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.position=e,this.inclusive=n}}function Cg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Gs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ag(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function FC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{}class Fe extends Ix{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BC(e,n,r):n==="array-contains"?new HC(e,r):n==="in"?new WC(e,r):n==="not-in"?new qC(e,r):n==="array-contains-any"?new KC(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $C(e,r):new zC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gs(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(Gs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends Ix{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new an(e,n)}matches(e){return Tx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Tx(t){return t.op==="and"}function Sx(t){return UC(t)&&Tx(t)}function UC(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function Od(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Qs(t.value);if(Sx(t))return t.filters.map(e=>Od(e)).join(",");{const e=t.filters.map(n=>Od(n)).join(",");return`${t.op}(${e})`}}function bx(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&bx(o,s.filters[l]),!0):!1}(t,e):void ee()}function Cx(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Qs(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(Cx).join(" ,")+"}"}(t):"Filter"}class BC extends Fe{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class $C extends Fe{constructor(e,n){super(e,"in",n),this.keys=Ax("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zC extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=Ax("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ax(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class HC extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lf(n)&&Po(n.arrayValue,this.value)}}class WC extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Po(this.value.arrayValue,n)}}class qC extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Po(this.value.arrayValue,n)}}class KC extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Po(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Pg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new GC(t,e,n,r,s,i,o)}function uf(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Od(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),fu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qs(r)).join(",")),e.ue=n}return e.ue}function cf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ag(t.startAt,e.startAt)&&Ag(t.endAt,e.endAt)}function Ld(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function QC(t,e,n,r,s,i,o,l){return new qo(t,e,n,r,s,i,o,l)}function pu(t){return new qo(t)}function Rg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Px(t){return t.collectionGroup!==null}function no(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new et(Je.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ul(i,r))}),n.has(Je.keyField().canonicalString())||e.ce.push(new Ul(Je.keyField(),r))}return e.ce}function gn(t){const e=re(t);return e.le||(e.le=YC(e,no(t))),e.le}function YC(t,e){if(t.limitType==="F")return Pg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ul(s.field,i)});const n=t.endAt?new Fl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fl(t.startAt.position,t.startAt.inclusive):null;return Pg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Md(t,e){const n=t.filters.concat([e]);return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fd(t,e,n){return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mu(t,e){return cf(gn(t),gn(e))&&t.limitType===e.limitType}function Rx(t){return`${uf(gn(t))}|lt:${t.limitType}`}function ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Cx(s)).join(", ")}]`),fu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Qs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Qs(s)).join(",")),`Target(${r})`}(gn(t))}; limitType=${t.limitType})`}function gu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of no(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Cg(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,no(r),s)||r.endAt&&!function(o,l,u){const h=Cg(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,no(r),s))}(t,e)}function XC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Nx(t){return(e,n)=>{let r=!1;for(const s of no(t)){const i=JC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function JC(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Gs(u,h):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ii(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return xx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new Ne(G.comparator);function Bn(){return ZC}const kx=new Ne(G.comparator);function $i(...t){let e=kx;for(const n of t)e=e.insert(n.key,n);return e}function Dx(t){let e=kx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ur(){return ro()}function jx(){return ro()}function ro(){return new oi(t=>t.toString(),(t,e)=>t.isEqual(e))}const eA=new Ne(G.comparator),tA=new et(G.comparator);function oe(...t){let e=tA;for(const n of t)e=e.add(n);return e}const nA=new et(he);function rA(){return nA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ml(e)?"-0":e}}function Vx(t){return{integerValue:""+t}}function sA(t,e){return jC(e)?Vx(e):df(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(){this._=void 0}}function iA(t,e,n){return t instanceof Ro?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&of(i)&&(i=af(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof No?Lx(t,e):t instanceof ko?Mx(t,e):function(s,i){const o=Ox(s,i),l=Ng(o)+Ng(s.Pe);return Vd(o)&&Vd(s.Pe)?Vx(l):df(s.serializer,l)}(t,e)}function oA(t,e,n){return t instanceof No?Lx(t,e):t instanceof ko?Mx(t,e):n}function Ox(t,e){return t instanceof Bl?function(r){return Vd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ro extends yu{}class No extends yu{constructor(e){super(),this.elements=e}}function Lx(t,e){const n=Fx(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ko extends yu{constructor(e){super(),this.elements=e}}function Mx(t,e){let n=Fx(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class Bl extends yu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ng(t){return Ve(t.integerValue||t.doubleValue)}function Fx(t){return lf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n){this.field=e,this.transform=n}}function lA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof No&&s instanceof No||r instanceof ko&&s instanceof ko?Ks(r.elements,s.elements,xn):r instanceof Bl&&s instanceof Bl?xn(r.Pe,s.Pe):r instanceof Ro&&s instanceof Ro}(t.transform,e.transform)}class uA{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vu{}function Ux(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hf(t.key,sn.none()):new Ko(t.key,t.data,sn.none());{const n=t.data,r=Ut.empty();let s=new et(Je.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new rs(t.key,r,new en(s.toArray()),sn.none())}}function cA(t,e,n){t instanceof Ko?function(s,i,o){const l=s.value.clone(),u=Dg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof rs?function(s,i,o){if(!nl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Dg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Bx(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function so(t,e,n,r){return t instanceof Ko?function(i,o,l,u){if(!nl(i.precondition,o))return l;const h=i.value.clone(),f=jg(i.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof rs?function(i,o,l,u){if(!nl(i.precondition,o))return l;const h=jg(i.fieldTransforms,u,o),f=o.data;return f.setAll(Bx(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,l){return nl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function dA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ox(r.transform,s||null);i!=null&&(n===null&&(n=Ut.empty()),n.set(r.field,i))}return n||null}function kg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ks(r,s,(i,o)=>lA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ko extends vu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class rs extends vu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Bx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Dg(t,e,n){const r=new Map;ge(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,oA(o,l,n[s]))}return r}function jg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,iA(i,o,e))}return r}class hf extends vu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hA extends vu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&cA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=so(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=so(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Ux(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Ks(this.mutations,e.mutations,(n,r)=>kg(n,r))&&Ks(this.baseMutations,e.baseMutations,(n,r)=>kg(n,r))}}class ff{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ge(e.mutations.length===r.length);let s=function(){return eA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ff(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,ue;function gA(t){switch(t){default:return ee();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function $x(t){if(t===void 0)return Un("GRPC error has no .code"),M.UNKNOWN;switch(t){case Le.OK:return M.OK;case Le.CANCELLED:return M.CANCELLED;case Le.UNKNOWN:return M.UNKNOWN;case Le.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Le.INTERNAL:return M.INTERNAL;case Le.UNAVAILABLE:return M.UNAVAILABLE;case Le.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Le.NOT_FOUND:return M.NOT_FOUND;case Le.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Le.ABORTED:return M.ABORTED;case Le.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Le.DATA_LOSS:return M.DATA_LOSS;default:return ee()}}(ue=Le||(Le={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=new Hr([4294967295,4294967295],0);function Vg(t){const e=yA().encode(t),n=new hx;return n.update(e),new Uint8Array(n.digest())}function Og(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([s,i],0)]}class pf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zi(`Invalid padding: ${n}`);if(r<0)throw new zi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Hr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Hr.fromNumber(r)));return s.compare(vA)===1&&(s=new Hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Vg(e),[r,s]=Og(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new pf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Vg(e),[r,s]=Og(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Go.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _u(ne.min(),s,new Ne(he),Bn(),oe())}}class Go{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Go(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class zx{constructor(e,n){this.targetId=e,this.me=n}}class Hx{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Lg{constructor(){this.fe=0,this.ge=Fg(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new Go(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Fg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _A{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bn(),this.qe=Mg(),this.Qe=new Ne(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Ld(i))if(r===0){const o=new G(i.path);this.Ue(n,o,ct.newNoDocument(o,ne.min()))}else ge(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Zr(r).toUint8Array()}catch(u){if(u instanceof wx)return qs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new pf(o,s,i)}catch(u){return qs(u instanceof zi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Ld(l.target)){const u=new G(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ct.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=oe();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new _u(e,n,this.Qe,this.ke,r);return this.ke=Bn(),this.qe=Mg(),this.Qe=new Ne(he),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Lg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Mg(){return new Ne(G.comparator)}function Fg(){return new Ne(G.comparator)}const xA={asc:"ASCENDING",desc:"DESCENDING"},wA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EA={and:"AND",or:"OR"};class IA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ud(t,e){return t.useProto3Json||fu(e)?e:{value:e}}function $l(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TA(t,e){return $l(t,e.toTimestamp())}function yn(t){return ge(!!t),ne.fromTimestamp(function(n){const r=Er(n);return new He(r.seconds,r.nanos)}(t))}function mf(t,e){return Bd(t,e).canonicalString()}function Bd(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qx(t){const e=Se.fromString(t);return ge(Xx(e)),e}function $d(t,e){return mf(t.databaseId,e.path)}function Sc(t,e){const n=qx(e);if(n.get(1)!==t.databaseId.projectId)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(Gx(n))}function Kx(t,e){return mf(t.databaseId,e)}function SA(t){const e=qx(t);return e.length===4?Se.emptyPath():Gx(e)}function zd(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gx(t){return ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ug(t,e,n){return{name:$d(t,e),fields:n.value.mapValue.fields}}function bA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(ge(f===void 0||typeof f=="string"),nt.fromBase64String(f||"")):(ge(f===void 0||f instanceof Buffer||f instanceof Uint8Array),nt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?M.UNKNOWN:$x(h.code);return new W(f,h.message||"")}(o);n=new Hx(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Sc(t,r.document.name),i=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):ne.min(),l=new Ut({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(s,i,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new rl(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Sc(t,r.document),i=r.readTime?yn(r.readTime):ne.min(),o=ct.newNoDocument(s,i),l=r.removedTargetIds||[];n=new rl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Sc(t,r.document),i=r.removedTargetIds||[];n=new rl([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new mA(s,i),l=r.targetId;n=new zx(l,o)}}return n}function CA(t,e){let n;if(e instanceof Ko)n={update:Ug(t,e.key,e.value)};else if(e instanceof hf)n={delete:$d(t,e.key)};else if(e instanceof rs)n={update:Ug(t,e.key,e.data),updateMask:OA(e.fieldMask)};else{if(!(e instanceof hA))return ee();n={verify:$d(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Ro)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof No)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ko)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:TA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function AA(t,e){return t&&t.length>0?(ge(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?yn(s.updateTime):yn(i);return o.isEqual(ne.min())&&(o=yn(i)),new uA(o,s.transformResults||[])}(n,e))):[]}function PA(t,e){return{documents:[Kx(t,e.path)]}}function RA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kx(t,s);const i=function(h){if(h.length!==0)return Yx(an.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:hs(y.field),direction:DA(y.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Ud(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function NA(t){let e=SA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ge(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const y=Qx(g);return y instanceof an&&Sx(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(y=>function(N){return new Ul(fs(N.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(g){let y;return y=typeof g=="object"?g.value:g,fu(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(g){const y=!!g.before,b=g.values||[];return new Fl(b,y)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const y=!g.before,b=g.values||[];return new Fl(b,y)}(n.endAt)),QC(e,s,o,i,l,"F",u,h)}function kA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fs(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=fs(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fs(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fs(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(fs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>Qx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function DA(t){return xA[t]}function jA(t){return wA[t]}function VA(t){return EA[t]}function hs(t){return{fieldPath:t.canonicalString()}}function fs(t){return Je.fromServerFormat(t.fieldPath)}function Yx(t){return t instanceof Fe?function(n){if(n.op==="=="){if(bg(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NAN"}};if(Sg(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bg(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NAN"}};if(Sg(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(n.field),op:jA(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(s=>Yx(s));return r.length===1?r[0]:{compositeFilter:{op:VA(n.op),filters:r}}}(t):ee()}function OA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Xx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r,s,i=ne.min(),o=ne.min(),l=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.ct=e}}function MA(t){const e=NA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.un=new UA}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(wr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class UA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ys(0)}static kn(){return new Ys(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.changes=new oi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&so(r.mutation,s,en.empty(),He.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=Ur();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=$i();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ur();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Bn();const o=ro(),l=function(){return ro()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof rs)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),so(f.mutation,h,f.mutation.getFieldMask(),He.now())):o.set(h.key,en.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var g;return l.set(h,new $A(f,(g=o.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ro();let s=new Ne((o,l)=>o-l),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||en.empty();f=l.applyToLocalView(h,f),r.set(u,f);const g=(s.get(l.batchId)||oe()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,g=jx();f.forEach(y=>{if(!i.has(y)){const b=Ux(n.get(y),r.get(y));b!==null&&g.set(y,b),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Px(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Ur());let l=-1,u=i;return o.next(h=>F.forEach(h,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,oe())).next(f=>({batchId:l,changes:Dx(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=$i();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=$i();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const h=function(g,y){return new qo(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,ct.newInvalidDocument(f)))});let l=$i();return o.forEach((u,h)=>{const f=i.get(u);f!==void 0&&so(f.mutation,h,en.empty(),He.now()),gu(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:yn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:MA(s.bundledQuery),readTime:yn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.overlays=new Ne(G.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ur();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Ur(),i=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=Ur(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Ur(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pA(n,r));let i=this.Ir.get(n);i===void 0&&(i=oe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this.Tr=new et(qe.Er),this.dr=new et(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Se([])),r=new qe(n,e),s=new qe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Se([])),r=new qe(n,e),s=new qe(n,e+1);let i=oe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(qe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fA(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),s=new qe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(he);return n.forEach(s=>{const i=new qe(s,0),o=new qe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new qe(new G(i),0);let l=new et(he);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ge(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.Mr=e,this.docs=function(){return new Ne(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ct.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Bn();const o=n.path,l=new G(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||RC(PC(f),r)<=0||(s.has(f.key)||gu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new QA(this)}getSize(e){return F.resolve(this.size)}}class QA extends BA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.persistence=e,this.Nr=new oi(n=>uf(n),cf),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gf,this.targetCount=0,this.kr=Ys.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ys(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sf(0),this.Kr=!1,this.Kr=!0,this.$r=new qA,this.referenceDelegate=e(this),this.Ur=new YA(this),this.indexManager=new FA,this.remoteDocumentCache=function(s){return new GA(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new LA(n),this.Gr=new HA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new KA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new JA(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class JA extends kC{constructor(e){super(),this.currentSequenceNumber=e}}class yf{constructor(e){this.persistence=e,this.Jr=new gf,this.Yr=null}static Zr(e){return new yf(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=G.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return eT()?8:DC(ht())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new ZA;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Oi()<=ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Oi()<=ae.DEBUG&&q("QueryEngine","Query:",ds(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Oi()<=ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):F.resolve())}Yi(e,n){if(Rg(n))return F.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fd(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Fd(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return Rg(n)||s.isEqual(ne.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Oi()<=ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ds(n)),this.rs(e,o,n,AC(s,-1)).next(l=>l))})}ts(e,n){let r=new et(Nx(e));return n.forEach((s,i)=>{gu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Oi()<=ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,wr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ne(he),this._s=new oi(i=>uf(i),cf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function nP(t,e,n,r){return new tP(t,e,n,r)}async function Jx(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=oe();for(const h of s){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function rP(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const g=h.batch,y=g.keys();let b=F.resolve();return y.forEach(N=>{b=b.next(()=>f.getEntry(u,N)).next(S=>{const j=h.docVersions.get(N);ge(j!==null),S.version.compareTo(j)<0&&(g.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),f.addEntry(S)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=oe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Zx(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function sP(t,e){const n=re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const y=s.get(g);if(!y)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let b=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(nt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(f.resumeToken,r)),s=s.insert(g,b),function(S,j,I){return S.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,b,f)&&l.push(n.Ur.updateTargetData(i,b))});let u=Bn(),h=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(iP(i,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(ne.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function iP(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Bn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function oP(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aP(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new or(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Hd(t,e,n){const r=re(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Wo(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Bg(t,e,n){const r=re(t);let s=ne.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const g=re(u),y=g._s.get(f);return y!==void 0?F.resolve(g.os.get(y)):g.Ur.getTargetData(h,f)}(r,o,gn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:oe())).next(l=>(lP(r,XC(e),l),{documents:l,Ts:i})))}function lP(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class $g{constructor(){this.activeTargetIds=rA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uP{constructor(){this.so=new $g,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $g,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa=null;function bc(){return Oa===null?Oa=function(){return 268435456+Math.round(2147483648*Math.random())}():Oa++,"0x"+Oa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class fP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=bc(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(f=>(q("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw qs("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+si}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=dP[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=bc();return new Promise((o,l)=>{const u=new fx;u.setWithCredentials(!0),u.listenOnce(px.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case el.NO_ERROR:const f=u.getResponseJson();q(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case el.TIMEOUT:q(at,`RPC '${e}' ${i} timed out`),l(new W(M.DEADLINE_EXCEEDED,"Request time out"));break;case el.HTTP_ERROR:const g=u.getStatus();if(q(at,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const N=function(j){const I=j.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(I)>=0?I:M.UNKNOWN}(b.status);l(new W(N,b.message))}else l(new W(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(M.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{q(at,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);q(at,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=bc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yx(),l=gx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");q(at,`Creating RPC '${e}' stream ${s}: ${f}`,u);const g=o.createWebChannel(f,u);let y=!1,b=!1;const N=new hP({Io:j=>{b?q(at,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(y||(q(at,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),q(at,`RPC '${e}' stream ${s} sending:`,j),g.send(j))},To:()=>g.close()}),S=(j,I,E)=>{j.listen(I,_=>{try{E(_)}catch(C){setTimeout(()=>{throw C},0)}})};return S(g,Bi.EventType.OPEN,()=>{b||(q(at,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),S(g,Bi.EventType.CLOSE,()=>{b||(b=!0,q(at,`RPC '${e}' stream ${s} transport closed`),N.So())}),S(g,Bi.EventType.ERROR,j=>{b||(b=!0,qs(at,`RPC '${e}' stream ${s} transport errored:`,j),N.So(new W(M.UNAVAILABLE,"The operation could not be completed")))}),S(g,Bi.EventType.MESSAGE,j=>{var I;if(!b){const E=j.data[0];ge(!!E);const _=E,C=_.error||((I=_[0])===null||I===void 0?void 0:I.error);if(C){q(at,`RPC '${e}' stream ${s} received error:`,C);const k=C.status;let P=function(x){const T=Le[x];if(T!==void 0)return $x(T)}(k),v=C.message;P===void 0&&(P=M.INTERNAL,v="Unknown error status: "+k+" with message "+C.message),b=!0,N.So(new W(P,v)),g.close()}else q(at,`RPC '${e}' stream ${s} received:`,E),N.bo(E)}}),S(l,mx.STAT_EVENT,j=>{j.stat===Dd.PROXY?q(at,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===Dd.NOPROXY&&q(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Cc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){return new IA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ew(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pP extends tw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=bA(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?yn(o.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=zd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Ld(u)?{documents:PA(i,u)}:{query:RA(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Wx(i,o.resumeToken);const h=Ud(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=$l(i,o.snapshotVersion.toTimestamp());const h=Ud(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=kA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=zd(this.serializer),n.removeTarget=e,this.a_(n)}}class mP extends tw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ge(!!e.streamToken),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=AA(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=zd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>CA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Bd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Bd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Un(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ss(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=re(u);h.L_.add(4),await Qo(h),h.q_.set("Unknown"),h.L_.delete(4),await wu(h)}(this))})}),this.q_=new yP(r,s)}}async function wu(t){if(ss(t))for(const e of t.B_)await e(!0)}async function Qo(t){for(const e of t.B_)await e(!1)}function nw(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ef(n)?wf(n):ai(n).r_()&&xf(n,e))}function _f(t,e){const n=re(t),r=ai(n);n.N_.delete(e),r.r_()&&rw(n,e),n.N_.size===0&&(r.r_()?r.o_():ss(n)&&n.q_.set("Unknown"))}function xf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ai(t).A_(e)}function rw(t,e){t.Q_.xe(e),ai(t).R_(e)}function wf(t){t.Q_=new _A({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ai(t).start(),t.q_.v_()}function Ef(t){return ss(t)&&!ai(t).n_()&&t.N_.size>0}function ss(t){return re(t).L_.size===0}function sw(t){t.Q_=void 0}async function _P(t){t.q_.set("Online")}async function xP(t){t.N_.forEach((e,n)=>{xf(t,e)})}async function wP(t,e){sw(t),Ef(t)?(t.q_.M_(e),wf(t)):t.q_.set("Unknown")}async function EP(t,e,n){if(t.q_.set("Online"),e instanceof Hx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zl(t,r)}else if(e instanceof rl?t.Q_.Ke(e):e instanceof zx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await Zx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(h);f&&i.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),rw(i,u);const g=new or(f.target,u,h,f.sequenceNumber);xf(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await zl(t,r)}}async function zl(t,e,n){if(!Wo(e))throw e;t.L_.add(1),await Qo(t),t.q_.set("Offline"),n||(n=()=>Zx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wu(t)})}function iw(t,e){return e().catch(n=>zl(t,n,e))}async function Eu(t){const e=re(t),n=Ir(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;IP(e);)try{const s=await oP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,TP(e,s)}catch(s){await zl(e,s)}ow(e)&&aw(e)}function IP(t){return ss(t)&&t.O_.length<10}function TP(t,e){t.O_.push(e);const n=Ir(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ow(t){return ss(t)&&!Ir(t).n_()&&t.O_.length>0}function aw(t){Ir(t).start()}async function SP(t){Ir(t).p_()}async function bP(t){const e=Ir(t);for(const n of t.O_)e.m_(n.mutations)}async function CP(t,e,n){const r=t.O_.shift(),s=ff.from(r,e,n);await iw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Eu(t)}async function AP(t,e){e&&Ir(t).V_&&await async function(r,s){if(function(o){return gA(o)&&o!==M.ABORTED}(s.code)){const i=r.O_.shift();Ir(r).s_(),await iw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Eu(r)}}(t,e),ow(t)&&aw(t)}async function Hg(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=ss(n);n.L_.add(3),await Qo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wu(n)}async function PP(t,e){const n=re(t);e?(n.L_.delete(2),await wu(n)):e||(n.L_.add(2),await Qo(n),n.q_.set("Unknown"))}function ai(t){return t.K_||(t.K_=function(n,r,s){const i=re(n);return i.w_(),new pP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:_P.bind(null,t),Ro:xP.bind(null,t),mo:wP.bind(null,t),d_:EP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ef(t)?wf(t):t.q_.set("Unknown")):(await t.K_.stop(),sw(t))})),t.K_}function Ir(t){return t.U_||(t.U_=function(n,r,s){const i=re(n);return i.w_(),new mP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SP.bind(null,t),mo:AP.bind(null,t),f_:bP.bind(null,t),g_:CP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Eu(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new If(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tf(t,e){if(Un("AsyncQueue",`${e}: ${t}`),Wo(t))return new W(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=$i(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Vs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.W_=new Ne(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xs{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Xs(e,n,Vs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class NP{constructor(){this.queries=qg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=qg(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new W(M.ABORTED,"Firestore shutting down"))}}function qg(){return new oi(t=>Rx(t),mu)}async function Sf(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new RP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Tf(o,`Initialization of query '${ds(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Cf(n)}async function bf(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kP(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Cf(n)}function DP(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Cf(t){t.Y_.forEach(e=>{e.next()})}var Wd,Kg;(Kg=Wd||(Wd={})).ea="default",Kg.Cache="cache";class Af{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.key=e}}class uw{constructor(e){this.key=e}}class jP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=Nx(e),this.Ra=new Vs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Wg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const y=s.get(f),b=gu(this.query,g)?g:null,N=!!y&&this.mutatedKeys.has(y.key),S=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let j=!1;y&&b?y.data.isEqual(b.data)?N!==S&&(r.track({type:3,doc:b}),j=!0):this.ga(y,b)||(r.track({type:2,doc:b}),j=!0,(u&&this.Aa(b,u)>0||h&&this.Aa(b,h)<0)&&(l=!0)):!y&&b?(r.track({type:0,doc:b}),j=!0):y&&!b&&(r.track({type:1,doc:y}),j=!0,(u||h)&&(l=!0)),j&&(b?(o=o.add(b),i=S?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(b,N){const S=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return S(b)-S(N)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Xs(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new uw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new lw(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OP{constructor(e){this.key=e,this.va=!1}}class LP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new oi(l=>Rx(l),mu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(G.comparator),this.Na=new Map,this.La=new gf,this.Ba={},this.ka=new Map,this.qa=Ys.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function MP(t,e,n=!0){const r=mw(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await cw(r,e,n,!0),s}async function FP(t,e){const n=mw(t);await cw(n,e,!0,!1)}async function cw(t,e,n,r){const s=await aP(t.localStore,gn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await UP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&nw(t.remoteStore,s),l}async function UP(t,e,n,r,s){t.Ka=(g,y,b)=>async function(S,j,I,E){let _=j.view.ma(I);_.ns&&(_=await Bg(S.localStore,j.query,!1).then(({documents:v})=>j.view.ma(v,_)));const C=E&&E.targetChanges.get(j.targetId),k=E&&E.targetMismatches.get(j.targetId)!=null,P=j.view.applyChanges(_,S.isPrimaryClient,C,k);return Qg(S,j.targetId,P.wa),P.snapshot}(t,g,y,b);const i=await Bg(t.localStore,e,!0),o=new jP(e,i.Ts),l=o.ma(i.documents),u=Go.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Qg(t,n,h.wa);const f=new VP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function BP(t,e,n){const r=re(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!mu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Hd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_f(r.remoteStore,s.targetId),qd(r,s.targetId)}).catch(Ho)):(qd(r,s.targetId),await Hd(r.localStore,s.targetId,!0))}async function $P(t,e){const n=re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_f(n.remoteStore,r.targetId))}async function zP(t,e,n){const r=YP(t);try{const s=await function(o,l){const u=re(o),h=He.now(),f=l.reduce((b,N)=>b.add(N.key),oe());let g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let N=Bn(),S=oe();return u.cs.getEntries(b,f).next(j=>{N=j,N.forEach((I,E)=>{E.isValidDocument()||(S=S.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,N)).next(j=>{g=j;const I=[];for(const E of l){const _=dA(E,g.get(E.key).overlayedDocument);_!=null&&I.push(new rs(E.key,_,Ex(_.value.mapValue),sn.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,I,l)}).next(j=>{y=j;const I=j.applyToLocalDocumentSet(g,S);return u.documentOverlayCache.saveOverlays(b,j.batchId,I)})}).then(()=>({batchId:y.batchId,changes:Dx(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ne(he)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Yo(r,s.changes),await Eu(r.remoteStore)}catch(s){const i=Tf(s,"Failed to persist write");n.reject(i)}}async function dw(t,e){const n=re(t);try{const r=await sP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ge(o.va):s.removedDocuments.size>0&&(ge(o.va),o.va=!1))}),await Yo(n,r,e)}catch(r){await Ho(r)}}function Gg(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=re(o);u.onlineState=l;let h=!1;u.queries.forEach((f,g)=>{for(const y of g.j_)y.Z_(l)&&(h=!0)}),h&&Cf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HP(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ne(G.comparator);o=o.insert(i,ct.newNoDocument(i,ne.min()));const l=oe().add(i),u=new _u(ne.min(),new Map,new Ne(he),o,l);await dw(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Pf(r)}else await Hd(r.localStore,e,!1).then(()=>qd(r,e,n)).catch(Ho)}async function WP(t,e){const n=re(t),r=e.batch.batchId;try{const s=await rP(n.localStore,e);fw(n,r,null),hw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yo(n,s)}catch(s){await Ho(s)}}async function qP(t,e,n){const r=re(t);try{const s=await function(o,l){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ge(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);fw(r,e,n),hw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yo(r,s)}catch(s){await Ho(s)}}function hw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function fw(t,e,n){const r=re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function qd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||pw(t,r)})}function pw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_f(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Pf(t))}function Qg(t,e,n){for(const r of n)r instanceof lw?(t.La.addReference(r.key,e),KP(t,r)):r instanceof uw?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||pw(t,r.key)):ee()}function KP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Pf(t))}function Pf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new OP(n)),t.Oa=t.Oa.insert(n,r),nw(t.remoteStore,new or(gn(pu(n.path)),r,"TargetPurposeLimboResolution",sf.oe))}}async function Yo(t,e,n){const r=re(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=vf.Wi(u.targetId,h);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const f=re(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>F.forEach(h,y=>F.forEach(y.$i,b=>f.persistence.referenceDelegate.addReference(g,y.targetId,b)).next(()=>F.forEach(y.Ui,b=>f.persistence.referenceDelegate.removeReference(g,y.targetId,b)))))}catch(g){if(!Wo(g))throw g;q("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const b=f.os.get(y),N=b.snapshotVersion,S=b.withLastLimboFreeSnapshotVersion(N);f.os=f.os.insert(y,S)}}}(r.localStore,i))}async function GP(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await Jx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new W(M.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yo(n,r.hs)}}function QP(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let s=oe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function mw(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HP.bind(null,e),e.Ca.d_=kP.bind(null,e.eventManager),e.Ca.$a=DP.bind(null,e.eventManager),e}function YP(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qP.bind(null,e),e}class Hl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return nP(this.persistence,new eP,e.initialUser,this.serializer)}Ga(e){return new XA(yf.Zr,this.serializer)}Wa(e){return new uP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hl.provider={build:()=>new Hl};class Kd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GP.bind(null,this.syncEngine),await PP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NP}()}createDatastore(e){const n=xu(e.databaseInfo.databaseId),r=function(i){return new fP(i)}(e.databaseInfo);return function(i,o,l,u){return new gP(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new vP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Gg(this.syncEngine,n,0),function(){return zg.D()?new zg:new cP}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,f){const g=new LP(s,i,o,l,u,h);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Qo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Kd.provider={build:()=>new Kd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=_x.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ac(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Jx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JP(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Hg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Hg(e.remoteStore,s)),t._onlineComponents=e}async function JP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ac(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;qs("Error using user provided cache. Falling back to memory cache: "+n),await Ac(t,new Hl)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Ac(t,new Hl);return t._offlineComponents}async function gw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Yg(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Yg(t,new Kd))),t._onlineComponents}function ZP(t){return gw(t).then(e=>e.syncEngine)}async function Wl(t){const e=await gw(t),n=e.eventManager;return n.onListen=MP.bind(null,e.syncEngine),n.onUnlisten=BP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$P.bind(null,e.syncEngine),n}function e1(t,e,n={}){const r=new Dn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const f=new Rf({next:y=>{f.Za(),o.enqueueAndForget(()=>bf(i,g));const b=y.docs.has(l);!b&&y.fromCache?h.reject(new W(M.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&u&&u.source==="server"?h.reject(new W(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new Af(pu(l.path),f,{includeMetadataChanges:!0,_a:!0});return Sf(i,g)}(await Wl(t),t.asyncQueue,e,n,r)),r.promise}function t1(t,e,n={}){const r=new Dn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const f=new Rf({next:y=>{f.Za(),o.enqueueAndForget(()=>bf(i,g)),y.fromCache&&u.source==="server"?h.reject(new W(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new Af(l,f,{includeMetadataChanges:!0,_a:!0});return Sf(i,g)}(await Wl(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e,n){if(!n)throw new W(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function n1(t,e,n,r){if(e===!0&&r===!0)throw new W(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jg(t){if(!G.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zg(t){if(G.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Iu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Iu(t);throw new W(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ey({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ey(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _C;switch(r.type){case"firstParty":return new IC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xg.get(n);r&&(q("ComponentProvider","Removing Datastore"),Xg.delete(n),r.terminate())}(this),Promise.resolve()}}function r1(t,e,n,r={}){var s;const i=(t=zt(t,Tu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=lt.MOCK_USER;else{l=KI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new W(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lt(h)}t._authCredentials=new xC(new vx(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}}class vr extends is{constructor(e,n,r){super(e,n,pu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new G(e))}withConverter(e){return new vr(this.firestore,e,this._path)}}function vn(t,e,...n){if(t=vt(t),vw("collection","path",e),t instanceof Tu){const r=Se.fromString(e,...n);return Zg(r),new vr(t,null,r)}{if(!(t instanceof yt||t instanceof vr))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Zg(r),new vr(t.firestore,null,r)}}function ln(t,e,...n){if(t=vt(t),arguments.length===1&&(e=_x.newId()),vw("doc","path",e),t instanceof Tu){const r=Se.fromString(e,...n);return Jg(r),new yt(t,null,new G(r))}{if(!(t instanceof yt||t instanceof vr))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Jg(r),new yt(t.firestore,t instanceof vr?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ew(this,"async_queue_retry"),this.Vu=()=>{const r=Cc();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Cc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Cc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Dn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wo(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Un("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=If.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function ny(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Tr extends Tu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ty,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ty(e),this._firestoreClient=void 0,await e}}}function s1(t,e){const n=typeof t=="object"?t:k_(),r=typeof t=="string"?t:"(default)",s=Wh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=WI("firestore");i&&r1(s,...i)}return s}function Su(t){if(t._terminated)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||i1(t),t._firestoreClient}function i1(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,f){return new OC(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yw(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new XP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(nt.fromBase64String(e))}catch(n){throw new W(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Js(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=/^__.*__$/;class a1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ko(e,this.data,n,this.fieldTransforms)}}function _w(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class Vf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ql(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_w(this.Cu)&&o1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class l1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xu(e)}Qu(e,n,r,s=!1){return new Vf({Cu:e,methodName:n,qu:r,path:Je.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Of(t){const e=t._freezeSettings(),n=xu(t._databaseId);return new l1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Iw("Data must be an object, but it was:",o,r);const l=ww(r,o);let u,h;if(i.merge)u=new en(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const y=c1(e,g,n);if(!o.contains(y))throw new W(M.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);h1(f,y)||f.push(y)}u=new en(f),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new a1(new Ut(l),u,h)}class Lf extends kf{_toFieldTransform(e){return new aA(e.path,new Ro)}isEqual(e){return e instanceof Lf}}function u1(t,e,n,r=!1){return Mf(n,t.Qu(r?4:3,e))}function Mf(t,e){if(Ew(t=vt(t)))return Iw("Unsupported field value:",e,t),ww(t,e);if(t instanceof kf)return function(r,s){if(!_w(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Mf(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=He.fromDate(r);return{timestampValue:$l(s.serializer,i)}}if(r instanceof He){const i=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$l(s.serializer,i)}}if(r instanceof Df)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Js)return{bytesValue:Wx(s.serializer,r._byteString)};if(r instanceof yt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return df(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Iu(r)}`)}(t,e)}function ww(t,e){const n={};return xx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ii(t,(r,s)=>{const i=Mf(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Ew(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof Df||t instanceof Js||t instanceof yt||t instanceof kf||t instanceof jf)}function Iw(t,e,n){if(!Ew(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Iu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function c1(t,e,n){if((e=vt(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return Tw(t,e);throw ql("Field path arguments must be of type string or ",t,!1,void 0,n)}const d1=new RegExp("[~\\*/\\[\\]]");function Tw(t,e,n){if(e.search(d1)>=0)throw ql(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nf(...e.split("."))._internalPath}catch{throw ql(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ql(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(M.INVALID_ARGUMENT,l+t+u)}function h1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ff("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class f1 extends Sw{data(){return super.data()}}function Ff(t,e){return typeof e=="string"?Tw(t,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class p1 extends Uf{}function Gd(t,e,...n){let r=[];e instanceof Uf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Bf).length,l=i.filter(u=>u instanceof bu).length;if(o>1||o>0&&l>0)throw new W(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class bu extends p1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bu(e,n,r)}_apply(e){const n=this._parse(e);return Cw(e._query,n),new is(e.firestore,e.converter,Md(e._query,n))}_parse(e){const n=Of(e.firestore);return function(i,o,l,u,h,f,g){let y;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){sy(g,f);const b=[];for(const N of g)b.push(ry(u,i,N));y={arrayValue:{values:b}}}else y=ry(u,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||sy(g,f),y=u1(l,o,g,f==="in"||f==="not-in");return Fe.create(h,f,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function m1(t,e,n){const r=e,s=Ff("where",t);return bu._create(s,r,n)}class Bf extends Uf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)Cw(o,u),o=Md(o,u)}(e._query,n),new is(e.firestore,e.converter,Md(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ry(t,e,n){if(typeof(n=vt(n))=="string"){if(n==="")throw new W(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Px(e)&&n.indexOf("/")!==-1)throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!G.isDocumentKey(r))throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tg(t,new G(r))}if(n instanceof yt)return Tg(t,n._key);throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(n)}.`)}function sy(t,e){if(!Array.isArray(t)||t.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class g1{convertValue(e,n="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ii(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ve(o.doubleValue));return new jf(i)}convertGeoPoint(e){return new Df(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=af(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Co(e));default:return null}}convertTimestamp(e){const n=Er(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);ge(Xx(r));const s=new Ao(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pw extends Sw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ff("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sl extends Pw{data(e={}){return super.data(e)}}class Rw{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Hi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sl(this._firestore,this._userDataWriter,r.key,r,new Hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new sl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Hi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new sl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Hi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:y1(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function y1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){t=zt(t,yt);const e=zt(t.firestore,Tr);return e1(Su(e),t._key).then(n=>Dw(e,t,n))}class $f extends g1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}}function il(t){t=zt(t,is);const e=zt(t.firestore,Tr),n=Su(e),r=new $f(e);return bw(t._query),t1(n,t._query).then(s=>new Rw(e,r,t,s))}function Xo(t,e,n){t=zt(t,yt);const r=zt(t.firestore,Tr),s=Aw(t.converter,e,n);return zf(r,[xw(Of(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,sn.none())])}function Nw(t){return zf(zt(t.firestore,Tr),[new hf(t._key,sn.none())])}function kw(t,e){const n=zt(t.firestore,Tr),r=ln(t),s=Aw(t.converter,e);return zf(n,[xw(Of(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function Os(t,...e){var n,r,s;t=vt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ny(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ny(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,h,f;if(t instanceof yt)h=zt(t.firestore,Tr),f=pu(t._key.path),u={next:g=>{e[o]&&e[o](Dw(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=zt(t,is);h=zt(g.firestore,Tr),f=g._query;const y=new $f(h);u={next:b=>{e[o]&&e[o](new Rw(h,y,g,b))},error:e[o+1],complete:e[o+2]},bw(t._query)}return function(y,b,N,S){const j=new Rf(S),I=new Af(b,j,N);return y.asyncQueue.enqueueAndForget(async()=>Sf(await Wl(y),I)),()=>{j.Za(),y.asyncQueue.enqueueAndForget(async()=>bf(await Wl(y),I))}}(Su(h),f,l,u)}function zf(t,e){return function(r,s){const i=new Dn;return r.asyncQueue.enqueueAndForget(async()=>zP(await ZP(r),s,i)),i.promise}(Su(t),e)}function Dw(t,e,n){const r=n.docs.get(e._key),s=new $f(t);return new Pw(t,s,e._key,r,new Hi(n.hasPendingWrites,n.fromCache),e.converter)}function _1(){return new Lf("serverTimestamp")}(function(e,n=!0){(function(s){si=s})(ni),Hs(new Yr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Tr(new wC(r.getProvider("auth-internal")),new SC(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new W(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ao(h.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),yr(_g,"4.7.3",e),yr(_g,"4.7.3","esm2017")})();const x1={apiKey:"AIzaSyDfsK4K4vhOmSSGeVHOlLnJuNlHGNha4LU",authDomain:"storycraft-a5f7e.firebaseapp.com",projectId:"storycraft-a5f7e",storageBucket:"storycraft-a5f7e.firebasestorage.app",messagingSenderId:"727724875985",appId:"1:727724875985:web:97411448885c68c289e5f0",measurementId:"G-JH03Y2NZDK"},jw=N_(x1),Pc=mC(jw),Ue=s1(jw),w1="1:727724875985:web:97411448885c68c289e5f0",Vw=L.createContext(),E1=({children:t})=>{const[e,n]=L.useState(null),[r,s]=L.useState(!1),[i,o]=L.useState(!0);L.useEffect(()=>{const f=rb(Pc,g=>{n(g),g||(o(!1),s(!1))});return()=>f()},[]),L.useEffect(()=>{if(e){const f=ln(Ue,`artifacts2/${w1}/users/${e.uid}`),g=Os(f,async y=>{if(y.exists()){const b=y.data().isMaster===!0;s(b),console.log("%c[DIAGNÓSTICO AUTH]","color: #00A8E8; font-weight: bold;",{isMaster:b,userData:y.data()})}else try{await Xo(f,{displayName:e.displayName,email:e.email,isMaster:!1}),s(!1)}catch(b){console.error("Erro ao criar o documento do utilizador:",b)}o(!1)},y=>{console.error("Erro ao escutar documento do utilizador:",y),o(!1)});return()=>g()}s(!1)},[e]);const h={user:e,loading:i,isMaster:r,googleSignIn:()=>{const f=new Sn;return Tb(Pc,f)},googleSignOut:()=>sb(Pc)};return c.jsx(Vw.Provider,{value:h,children:!i&&t})},Be=()=>{const t=L.useContext(Vw);if(!t)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return t},iy="1:727724875985:web:97411448885c68c289e5f0",I1=(t,e)=>{const[n,r]=L.useState(null),[s,i]=L.useState(!0);L.useEffect(()=>{if(!t||!e){i(!1);return}const u=ln(Ue,`artifacts2/${iy}/users/${e}/characterSheets/${t}`),h=Os(u,f=>{if(f.exists()){const y={...f.data()};Object.keys(y).forEach(b=>{if(typeof y[b]=="string")try{y[b]=JSON.parse(y[b])}catch{}}),r({id:f.id,...y})}else console.error("Personagem não encontrado!"),r(null);i(!1)},f=>{console.error("Erro ao carregar o personagem:",f),i(!1)});return()=>h()},[t,e]);const o=L.useCallback(async(u,h)=>{if(!t||!e)return;const f=ln(Ue,`artifacts2/${iy}/users/${e}/characterSheets/${t}`),g=typeof h=="object"&&h!==null?JSON.stringify(h):h;try{await Xo(f,{[u]:g},{merge:!0})}catch(y){console.error(`Erro ao atualizar o campo ${u}:`,y)}},[t,e]),l=L.useCallback(u=>{var h;if(n){const f=((h=n.collapsedStates)==null?void 0:h[u])??!1,g={...n.collapsedStates,[u]:!f};o("collapsedStates",g)}},[n,o]);return{character:n,loading:s,updateCharacterField:o,toggleSection:l}},Ow=L.createContext(),Cu=()=>L.useContext(Ow),T1="1:727724875985:web:97411448885c68c289e5f0",S1=({children:t})=>{const[e,n]=L.useState(null),r=L.useMemo(()=>{switch(e){case"v1":return"artifacts2";case"v2":return"storycraft-v2";default:return"artifacts2"}},[e]),s={currentSystem:e,setCurrentSystem:n,characterDataCollectionRoot:r,GLOBAL_APP_IDENTIFIER:T1};return c.jsx(Ow.Provider,{value:s,children:t})},b1=({character:t,onExport:e,onReset:n})=>c.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mt-8 p-4 bg-bgSurface/80 backdrop-blur-sm rounded-xl border border-bgElement",children:[c.jsx("button",{onClick:e,className:"px-6 py-3 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t,children:"Exportar Ficha (JSON)"}),c.jsx("button",{onClick:n,className:"px-8 py-3 bg-red-700 hover:bg-red-800 text-white font-bold rounded-lg shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t,children:"Resetar Ficha"})]}),bt=({title:t,isCollapsed:e,toggleSection:n,actions:r,children:s,isComplexTitle:i})=>c.jsxs("section",{className:"mb-8 p-6 bg-bgSurface backdrop-blur-sm rounded-xl shadow-inner border border-bgElement",children:[c.jsxs("div",{className:"text-2xl font-bold text-textAccent mb-4 border-b-2 border-borderAccent pb-2 cursor-pointer flex justify-between items-center",onClick:n,children:[c.jsx("h2",{className:`flex-grow ${i?"":"truncate"}`.trim(),children:t}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{onClick:o=>o.stopPropagation(),children:r}),c.jsx("span",{children:e?"▼":"▲"})]})]}),!e&&c.jsx("div",{className:"mt-4",children:s})]}),C1=({value:t,onChange:e,onBlur:n,placeholder:r,className:s,disabled:i})=>{const o=L.useRef(null);return xy.useEffect(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=o.current.scrollHeight+"px")},[t]),c.jsx("textarea",{ref:o,value:t,onChange:e,onBlur:n,placeholder:r,className:`${s} resize-none overflow-hidden`,rows:"1",disabled:i})},A1=({character:t,isMaster:e,isCollapsed:n,toggleSection:r,onOpenActionModal:s,allAttributes:i,onUpdate:o,onExecuteFormula:l,isEditMode:u})=>{const{user:h}=Be();if(!t||!h)return null;const f=h.uid===t.ownerUid||e,[g,y]=L.useState(t.formulaActions||[]);L.useEffect(()=>{y(t.formulaActions||[])},[t.formulaActions]);const b=()=>{const P={id:crypto.randomUUID(),name:"Nova Ação",components:[{id:crypto.randomUUID(),type:"dice",value:"1d6"}],multiplier:1,discordText:"",isCollapsed:!1,costValue:0,costType:"",recoverHP:!1,recoverMP:!1};o("formulaActions",[...t.formulaActions||[],P])},N=P=>{o("formulaActions",(t.formulaActions||[]).filter(v=>v.id!==P))},S=(P,v,m)=>{y(x=>x.map(T=>T.id===P?{...T,[v]:m}:T))},j=L.useCallback((P,v,m)=>{const x=g.find(R=>R.id===P),T=(t.formulaActions||[]).find(R=>R.id===P);if(x&&T){const R=m!==void 0?m:x[v];R!==T[v]&&o("formulaActions",(t.formulaActions||[]).map(D=>D.id===P?{...D,[v]:R}:D))}},[g,t.formulaActions,o]),I=(P,v)=>{let m;v==="dice"?m={id:crypto.randomUUID(),type:v,value:"1d6"}:v==="attribute"?m={id:crypto.randomUUID(),type:v,value:""}:v==="critDice"&&(m={id:crypto.randomUUID(),type:v,value:"1d6",critValue:6,critBonusAttribute:"",critBonusMultiplier:1}),o("formulaActions",(t.formulaActions||[]).map(x=>x.id===P?{...x,components:[...x.components||[],m]}:x))},E=(P,v)=>{o("formulaActions",(t.formulaActions||[]).map(m=>m.id===P?{...m,components:(m.components||[]).filter(x=>x.id!==v)}:m))},_=(P,v,m,x)=>{y(T=>T.map(R=>R.id===P?{...R,components:R.components.map(D=>D.id===v?{...D,[m]:x}:D)}:R))},C=L.useCallback((P,v,m,x)=>{const T=g.find(J=>J.id===P),R=T==null?void 0:T.components.find(J=>J.id===v),D=(t.formulaActions||[]).find(J=>J.id===P),A=D==null?void 0:D.components.find(J=>J.id===v);if(R&&A){const J=x!==void 0?x:R[m];J!==A[m]&&o("formulaActions",(t.formulaActions||[]).map(Ee=>Ee.id===P?{...Ee,components:Ee.components.map(je=>je.id===v?{...je,[m]:J}:je)}:Ee))}},[g,t.formulaActions,o]),k=P=>{o("formulaActions",(t.formulaActions||[]).map(v=>v.id===P?{...v,isCollapsed:!v.isCollapsed}:v))};return c.jsx(bt,{title:"Ações",isCollapsed:n,toggleSection:r,children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 pb-4 border-b border-bgElement",children:[c.jsx("button",{onClick:()=>s("heal"),className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md",children:"Curar"}),c.jsx("button",{onClick:()=>s("damage"),className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg shadow-md",children:"Receber Dano"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-textAccent/80 mb-3",children:"Construtor de Ações Rápidas"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:(g||[]).map(P=>P.isCollapsed!==!1?c.jsxs("div",{className:"p-3 bg-bgElement rounded-md shadow-sm border border-bgInput flex justify-between items-center",children:[c.jsx("span",{className:"font-semibold text-lg cursor-pointer text-textPrimary flex-grow truncate",onClick:()=>k(P.id),children:P.name||"Ação Sem Nome"}),c.jsx("button",{onClick:()=>l(P),className:"px-4 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg whitespace-nowrap ml-2 text-sm",children:"Usar"})]},P.id):c.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3 p-4 bg-bgElement rounded-md shadow-sm border border-bgInput",children:[c.jsxs("div",{className:"flex justify-between items-center gap-2 mb-3",children:[c.jsx("span",{className:"font-semibold text-lg cursor-pointer text-textPrimary flex-grow",onClick:()=>k(P.id),children:P.name||"Ação Sem Nome"}),c.jsx("button",{onClick:()=>l(P),className:"px-5 py-2 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg whitespace-nowrap",children:"Usar"}),f&&u&&c.jsx("span",{className:"text-textSecondary text-xs whitespace-nowrap cursor-pointer",onClick:()=>k(P.id),children:"Recolher ▲"})]}),f&&u&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-bgInput pt-3 mt-3 flex-grow",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-textSecondary block mb-1",children:"Nome da Ação:"}),c.jsx("input",{type:"text",placeholder:"Nome da Ação",value:P.name,onChange:m=>S(P.id,"name",m.target.value),onBlur:()=>j(P.id,"name"),className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary font-semibold mb-3",disabled:!f||!u}),c.jsx("label",{className:"text-sm font-medium text-textSecondary block mb-2",children:"Componentes da Fórmula:"}),c.jsx("div",{className:"space-y-2 mb-3",children:(P.components||[]).map(m=>c.jsx("div",{className:"flex flex-col gap-2 p-2 rounded-md border border-dashed border-textSecondary/30",children:m.type==="dice"?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",placeholder:"1d6 ou 10",value:m.value,onChange:x=>_(P.id,m.id,"value",x.target.value),onBlur:()=>C(P.id,m.id,"value"),className:"flex-grow p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!f||!u}),c.jsx("div",{className:"text-textSecondary flex-shrink-0",children:"Dado/Nº"}),f&&u&&c.jsx("button",{onClick:()=>E(P.id,m.id),className:"w-6 h-6 bg-red-600 text-white text-xs rounded-full flex items-center justify-center font-bold flex-shrink-0",children:"-"})]}):m.type==="attribute"?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:m.value,onChange:x=>_(P.id,m.id,"value",x.target.value),onBlur:()=>C(P.id,m.id,"value"),className:"flex-grow p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!f||!u,children:[c.jsx("option",{value:"",children:"Selecione Atributo"}),i.map(x=>c.jsx("option",{value:x,children:x},x))]}),c.jsx("div",{className:"text-textSecondary flex-shrink-0",children:"Atributo"}),f&&u&&c.jsx("button",{onClick:()=>E(P.id,m.id),className:"w-6 h-6 bg-red-600 text-white text-xs rounded-full flex items-center justify-center font-bold flex-shrink-0",children:"-"})]}):m.type==="critDice"?c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",placeholder:"1d6",value:m.value,onChange:x=>_(P.id,m.id,"value",x.target.value),onBlur:()=>C(P.id,m.id,"value"),className:"flex-grow p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!f||!u}),c.jsx("div",{className:"text-textSecondary flex-shrink-0",children:"Dado Crítico"}),f&&u&&c.jsx("button",{onClick:()=>E(P.id,m.id),className:"w-6 h-6 bg-red-600 text-white text-xs rounded-full flex items-center justify-center font-bold flex-shrink-0",children:"-"})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-textSecondary",children:[c.jsx("span",{className:"flex-shrink-0",children:"Crit. ≥"}),c.jsx("input",{type:"number",placeholder:"6",value:m.critValue||"",onChange:x=>_(P.id,m.id,"critValue",x.target.value),onBlur:()=>C(P.id,m.id,"critValue"),className:"w-12 p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!f||!u}),c.jsx("span",{className:"flex-shrink-0",children:"Bônus:"}),c.jsxs("select",{value:m.critBonusAttribute||"",onChange:x=>_(P.id,m.id,"critBonusAttribute",x.target.value),onBlur:()=>C(P.id,m.id,"critBonusAttribute"),className:"flex-grow p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!f||!u,children:[c.jsx("option",{value:"",children:"Nenhum"}),i.map(x=>c.jsx("option",{value:x,children:x},x))]}),c.jsx("span",{className:"flex-shrink-0",children:"x"}),c.jsx("input",{type:"number",placeholder:"1",value:m.critBonusMultiplier||"",onChange:x=>_(P.id,m.id,"critBonusMultiplier",x.target.value),onBlur:()=>C(P.id,m.id,"critBonusMultiplier"),className:"w-12 p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!f||!u})]})]}):null},m.id))}),f&&u&&c.jsxs("div",{className:"flex gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>I(P.id,"dice"),className:"px-2 py-1 text-xs bg-btnHighlightBg text-btnHighlightText rounded-md",children:"+ Dado/Nº"}),c.jsx("button",{onClick:()=>I(P.id,"attribute"),className:"px-2 py-1 text-xs bg-btnHighlightBg text-btnHighlightText rounded-md",children:"+ Atributo"}),c.jsx("button",{onClick:()=>I(P.id,"critDice"),className:"px-2 py-1 text-xs bg-purple-600 text-white rounded-md",children:"+ Dado Crítico"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-textSecondary block mb-2",children:"Multiplicador:"}),c.jsx("input",{type:"number",value:P.multiplier||"",onChange:m=>S(P.id,"multiplier",m.target.value),onBlur:()=>j(P.id,"multiplier"),className:"w-20 p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary mb-3",placeholder:"1",disabled:!f||!u}),c.jsx("label",{className:"text-sm font-medium text-textSecondary block mb-2",children:"Descrição da Ação:"}),c.jsx(C1,{placeholder:"Descrição...",value:P.discordText,onChange:m=>S(P.id,"discordText",m.target.value),onBlur:()=>j(P.id,"discordText"),className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary text-sm",disabled:!f||!u}),c.jsx("label",{className:"text-sm font-medium text-textSecondary block mb-2 mt-3",children:"Custo da Ação:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",placeholder:"Custo",value:P.costValue||"",onChange:m=>S(P.id,"costValue",m.target.value),onBlur:()=>j(P.id,"costValue"),className:"w-20 p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!f||!u}),c.jsxs("select",{value:P.costType,onChange:m=>S(P.id,"costType",m.target.value),onBlur:()=>j(P.id,"costType"),className:"p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!f||!u,children:[c.jsx("option",{value:"",children:"N/A"}),c.jsx("option",{value:"HP",children:"HP"}),c.jsx("option",{value:"MP",children:"MP"})]})]}),f&&c.jsxs("div",{className:"flex gap-4 mt-4",style:{display:u?"flex":"none"},children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`recover-hp-${P.id}`,checked:P.recoverHP||!1,onChange:m=>j(P.id,"recoverHP",m.target.checked),className:"form-checkbox text-green-500 rounded-sm",disabled:!f}),c.jsx("label",{htmlFor:`recover-hp-${P.id}`,className:"ml-2 text-sm text-textSecondary",children:"Recuperar HP"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`recover-mp-${P.id}`,checked:P.recoverMP||!1,onChange:m=>j(P.id,"recoverMP",m.target.checked),className:"form-checkbox text-blue-500 rounded-sm",disabled:!f}),c.jsx("label",{htmlFor:`recover-mp-${P.id}`,className:"ml-2 text-sm text-textSecondary",children:"Recuperar MP"})]})]})]})]}),f&&u&&c.jsx("div",{className:"flex justify-end mt-4 pt-4 border-t border-bgInput/50",children:c.jsx("button",{onClick:()=>N(P.id),className:"p-2 rounded-md text-textSecondary hover:bg-red-600/50 hover:text-white",title:"Remover Ação",children:c.jsx("span",{role:"img","aria-label":"Remover",className:"text-xl",children:"🗑️"})})})]},P.id))}),f&&u&&c.jsx("div",{className:"flex justify-center mt-4",children:c.jsx("button",{onClick:b,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md",children:"+ Adicionar Ação Rápida"})})]})]})})},P1=({character:t,isMaster:e,onUpdate:n,allAttributes:r,isCollapsed:s,toggleSection:i,isEditMode:o})=>{const{user:l}=Be();if(!t||!l)return c.jsx("div",{className:"p-6 text-center text-textSecondary",children:"A carregar buffs..."});const u=l.uid===t.ownerUid||e,[h,f]=L.useState(t.buffs||[]);L.useEffect(()=>{f(t.buffs||[])},[t.buffs]);const g=()=>{const k={id:crypto.randomUUID(),name:"Novo Buff",effects:[],isActive:!1,isCollapsed:!1,costValue:0,costType:""};n("buffs",[...h,k])},y=k=>n("buffs",(t.buffs||[]).filter(P=>P.id!==k)),b=k=>n("buffs",(t.buffs||[]).map(P=>P.id===k?{...P,isActive:!P.isActive}:P)),N=k=>n("buffs",(t.buffs||[]).map(P=>P.id===k?{...P,isCollapsed:!P.isCollapsed}:P)),S=(k,P,v)=>{f(m=>m.map(x=>x.id===k?{...x,[P]:v}:x))},j=L.useCallback((k,P)=>{const v=h.find(x=>x.id===k),m=(t.buffs||[]).find(x=>x.id===k);if(v&&m&&v[P]!==m[P]){const x=P==="costValue"?parseInt(v[P],10)||0:v[P];n("buffs",(t.buffs||[]).map(T=>T.id===k?{...T,[P]:x}:T))}},[h,t.buffs,n]),I=(k,P)=>{const v={id:crypto.randomUUID(),type:P,target:"",value:P==="attribute"?0:"1d6"};n("buffs",(t.buffs||[]).map(m=>m.id===k?{...m,effects:[...m.effects||[],v]}:m))},E=(k,P)=>{n("buffs",(t.buffs||[]).map(v=>v.id===k?{...v,effects:(v.effects||[]).filter(m=>m.id!==P)}:v))},_=(k,P,v,m)=>{f(x=>x.map(T=>T.id===k?{...T,effects:T.effects.map(R=>{if(R.id===P){const D={...R,[v]:m};return v==="type"&&(D.target="",D.value=m==="attribute"?0:"1d6"),D}return R})}:T))},C=L.useCallback((k,P,v)=>{const m=h.find(D=>D.id===k),x=m==null?void 0:m.effects.find(D=>D.id===P),T=(t.buffs||[]).find(D=>D.id===k),R=T==null?void 0:T.effects.find(D=>D.id===P);x&&R&&x[v]!==R[v]&&n("buffs",(t.buffs||[]).map(D=>D.id===k?{...D,effects:D.effects.map(A=>A.id===P?{...A,[v]:x[v]}:A)}:D))},[h,t.buffs,n]);return c.jsx(bt,{title:"Buffs",isCollapsed:s,toggleSection:i,children:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:(h||[]).map(k=>k.isCollapsed!==!1?c.jsxs("div",{className:"p-3 bg-bgElement rounded-md shadow-sm border border-bgInput flex justify-between items-center",children:[c.jsx("span",{className:"font-semibold text-lg cursor-pointer text-textPrimary flex-grow truncate",onClick:()=>N(k.id),children:k.name||"Buff Sem Nome"}),c.jsx("label",{className:"flex items-center cursor-pointer ml-2",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",checked:k.isActive,onChange:()=>b(k.id),className:"sr-only",disabled:!u}),c.jsx("div",{className:`block w-12 h-6 rounded-full ${k.isActive?"bg-green-500":"bg-bgInput"}`}),c.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${k.isActive?"transform translate-x-6":""}`})]})})]},k.id):c.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3 p-4 bg-bgElement rounded-md shadow-sm border border-bgInput",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("span",{className:"font-semibold text-lg cursor-pointer text-textPrimary flex-grow",onClick:()=>N(k.id),children:k.name||"Buff Sem Nome"}),c.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[c.jsx("label",{className:"flex items-center cursor-pointer",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",checked:k.isActive,onChange:()=>b(k.id),className:"sr-only",disabled:!u}),c.jsx("div",{className:`block w-14 h-8 rounded-full ${k.isActive?"bg-green-500":"bg-bgInput"}`}),c.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform ${k.isActive?"transform translate-x-6":""}`})]})}),c.jsx("span",{className:"text-textSecondary text-xs whitespace-nowrap cursor-pointer",onClick:()=>N(k.id),children:"Recolher ▲"})]})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-bgInput/50 space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-textSecondary block mb-1",children:"Nome do Buff:"}),c.jsx("input",{type:"text",placeholder:"Nome do Buff",value:k.name,onChange:v=>S(k.id,"name",v.target.value),onBlur:()=>j(k.id,"name"),className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary font-semibold mb-4",disabled:!u}),c.jsx("label",{className:"text-sm font-medium text-textSecondary block mb-1",children:"Custo de Manutenção:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",placeholder:"0",value:k.costValue||"",onChange:v=>S(k.id,"costValue",v.target.value),onBlur:()=>j(k.id,"costValue"),className:"w-20 p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!u}),c.jsxs("select",{value:k.costType,onChange:v=>S(k.id,"costType",v.target.value),onBlur:()=>j(k.id,"costType"),className:"p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!u,children:[c.jsx("option",{value:"",children:"N/A"}),c.jsx("option",{value:"HP",children:"HP"}),c.jsx("option",{value:"MP",children:"MP"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-textSecondary block mb-1",children:"Efeitos do Buff:"}),c.jsx("div",{className:"space-y-2",children:(k.effects||[]).map(v=>c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("select",{value:v.type,onChange:m=>_(k.id,v.id,"type",m.target.value),onBlur:()=>C(k.id,v.id,"type"),className:"p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary col-span-3 sm:col-span-1",disabled:!u,children:[c.jsx("option",{value:"attribute",children:"Modificar Atributo"}),c.jsx("option",{value:"dice",children:"Adicionar Dado/Nº"})]}),v.type==="attribute"?c.jsxs("select",{value:v.target,onChange:m=>_(k.id,v.id,"target",m.target.value),onBlur:()=>C(k.id,v.id,"target"),className:"p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary col-span-3 sm:col-span-1",disabled:!u,children:[c.jsx("option",{value:"",children:"Selecione Atributo"}),r.map(m=>c.jsx("option",{value:m,children:m},m))]}):c.jsx("div",{className:"p-2 bg-bgPage border-bgElement rounded-md text-textSecondary text-center italic col-span-3 sm:col-span-1",children:"Não aplicável"}),c.jsxs("div",{className:"flex items-center gap-2 col-span-3 sm:col-span-1",children:[c.jsx("input",{type:"text",placeholder:v.type==="attribute"?"Valor (+/-)":"1d6 ou 6",value:v.value||"",onChange:m=>_(k.id,v.id,"value",m.target.value),onBlur:()=>C(k.id,v.id,"value"),className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary text-center",disabled:!u}),u&&c.jsx("button",{onClick:()=>E(k.id,v.id),className:"p-2 rounded-md text-textSecondary hover:bg-red-600/50 hover:text-white",title:"Remover Efeito",children:c.jsx("span",{role:"img","aria-label":"Remover",children:"🗑️"})})]})]},v.id))}),u&&o&&c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsx("button",{onClick:()=>I(k.id,"attribute"),className:"px-2 py-1 text-xs bg-btnHighlightBg text-btnHighlightText rounded-md",children:"+ Atributo"}),c.jsx("button",{onClick:()=>I(k.id,"dice"),className:"px-2 py-1 text-xs bg-btnHighlightBg text-btnHighlightText rounded-md",children:"+ Dado/Nº"})]})]})]}),u&&o&&c.jsx("div",{className:"flex justify-end mt-4 pt-4 border-t border-bgInput/50",children:c.jsx("button",{onClick:()=>y(k.id),className:"p-2 rounded-md text-textSecondary hover:bg-red-600/50 hover:text-white",title:"Remover Buff",children:c.jsx("span",{role:"img","aria-label":"Remover",className:"text-xl",children:"🗑️"})})})]})]},k.id))}),(h||[]).length===0&&c.jsx("p",{className:"text-textSecondary italic",children:"Nenhum buff criado."}),u&&o&&c.jsx("div",{className:"flex justify-center mt-4",children:c.jsx("button",{onClick:g,className:"w-10 h-10 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-2xl font-bold rounded-full shadow-lg flex items-center justify-center",children:"+"})})]})})},R1=({user:t,onSelectCharacter:e,handleCreateClick:n,handleImportClick:r,handleDeleteClick:s,characters:i,isMaster:o,viewingAll:l,onToggleView:u})=>c.jsxs("div",{className:"bg-bgSurface/80 backdrop-blur-sm p-6 rounded-lg shadow-lg border border-bgElement w-full",children:[c.jsx("h2",{className:"text-2xl font-bold text-textAccent mb-4 border-b-2 border-borderAccent pb-2",children:l?"Todas as Fichas":"Meus Personagens"}),c.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[c.jsx("button",{onClick:n,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md",children:"Criar Novo Personagem"}),c.jsx("button",{onClick:r,className:"px-6 py-3 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg shadow-md",children:"Importar Ficha (JSON)"}),o&&c.jsx("button",{onClick:()=>u(!l),className:"px-6 py-3 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg shadow-md",children:l?"Ver Apenas Minhas Fichas":"Ver Todas as Fichas"})]}),i.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(h=>c.jsxs("div",{className:"bg-bgElement p-4 rounded-lg shadow-md flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-textPrimary mb-1",children:h.name}),c.jsxs("p",{className:"text-sm text-textSecondary",children:["Nível: ",h.level||"1"]}),o&&l&&c.jsxs("p",{className:"text-xs text-textSecondary mt-2 break-all",children:["Dono: ",h.ownerUid]})]}),c.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[c.jsx("button",{onClick:()=>e(h),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg",children:"Ver/Editar"}),t&&(t.uid===h.ownerUid||o)&&c.jsx("button",{onClick:()=>s(h),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-bold rounded-lg",children:"Excluir"})]})]},h.id))}):c.jsx("p",{className:"text-textSecondary italic",children:"Nenhum personagem encontrado."})]}),Lw=L.createContext(),Au=()=>L.useContext(Lw),N1=({children:t})=>{const[e,n]=L.useState([]),r=L.useCallback(o=>{const l={...o,type:"roll",id:Date.now()+Math.random(),timestamp:new Date};n(u=>[l,...u].slice(0,50))},[]),s=L.useCallback(o=>{const l={...o,type:"message",id:Date.now()+Math.random(),timestamp:new Date};n(u=>[l,...u].slice(0,50))},[]),i={feedItems:e,addRollToFeed:r,addMessageToFeed:s};return c.jsx(Lw.Provider,{value:i,children:t})},io="1:727724875985:web:97411448885c68c289e5f0",k1=async(t,e=!1)=>{if(!t)return[];try{let n=[];if(e){const r=vn(Ue,`artifacts2/${io}/users`),s=await il(r);for(const i of s.docs){const o=vn(Ue,`artifacts2/${io}/users/${i.id}/characterSheets`),l=Gd(o);(await il(l)).forEach(h=>{n.push({id:h.id,ownerUid:i.id,...h.data()})})}}else{const r=vn(Ue,`artifacts2/${io}/users/${t}/characterSheets`),s=Gd(r);(await il(s)).forEach(o=>{n.push({id:o.id,...o.data()})})}return n}catch(n){return console.error("Erro ao buscar personagens:",n),[]}},D1=async t=>{if(!t)return null;const e=prompt("Qual o nome do novo personagem?");if(!e)return null;try{const n=vn(Ue,`artifacts2/${io}/users/${t}/characterSheets`),r={name:e,ownerUid:t,createdAt:_1(),level:1,mainAttributes:{hp:{current:100,max:100,temp:0},mp:{current:50,max:50}}};return{id:(await kw(n,r)).id,...r}}catch(n){return console.error("Erro ao criar novo personagem:",n),null}},j1=async(t,e)=>{if(!t||!e)return!1;try{const n=ln(Ue,`artifacts2/${io}/users/${t}/characterSheets/${e}`);return await Nw(n),console.log("Ficha deletada com sucesso!"),!0}catch(n){return console.error("Erro ao deletar personagem:",n),!1}},V1="1:727724875985:web:97411448885c68c289e5f0",Rc=async t=>{if(!t)return[];try{const e=vn(Ue,"themes"),n=Gd(e,m1("ownerUid","==",t)),r=await il(n),s=[];return r.forEach(i=>{s.push({id:i.id,...i.data()})}),s}catch(e){return console.error("Erro ao buscar temas:",e),[]}},oy=async t=>{if(!t)return null;try{const e=ln(Ue,"themes",t),n=await v1(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Erro ao buscar tema por ID:",e),null}},ay=async t=>{try{if(t.id){const e=ln(Ue,"themes",t.id);return await Xo(e,t,{merge:!0}),t.id}else{const e=vn(Ue,"themes");return(await kw(e,t)).id}}catch(e){return console.error("Erro ao salvar tema:",e),null}},O1=async t=>{if(!t)return!1;try{const e=ln(Ue,"themes",t);return await Nw(e),!0}catch(e){return console.error("Erro ao deletar tema:",e),!1}},L1=async(t,e,n,r)=>{if(!(!t||!e))try{const s=ln(Ue,`${r}/${V1}/users/${t}/characterSheets/${e}`);await Xo(s,{activeThemeId:n},{merge:!0})}catch(s){console.error("Erro ao aplicar tema ao personagem:",s)}},Mw=L.createContext(),M1=()=>L.useContext(Mw),F1=({children:t})=>{const{user:e,isMaster:n}=Be(),{characterDataCollectionRoot:r,GLOBAL_APP_IDENTIFIER:s}=Cu(),[i,o]=L.useState([]),[l,u]=L.useState([]),[h,f]=L.useState(!0);L.useEffect(()=>{if(!e){o([]),f(!1);return}f(!0);const N=new Map,S=(j,I)=>{let E=!1;if(j.docChanges().forEach(_=>{const C=_.doc.data();let k=C.mainAttributes;if(typeof k=="string")try{k=JSON.parse(k)}catch(v){console.error(`Erro ao parsear mainAttributes para o personagem ${_.doc.id}:`,v)}const P={id:_.doc.id,ownerUid:I,...C,mainAttributes:k};_.type==="added"||_.type==="modified"?(N.set(P.id,P),E=!0):_.type==="removed"&&(N.delete(P.id),E=!0)}),E){const _=Array.from(N.values());o(_)}f(!1)};if(n){let j=[];const I=vn(Ue,`${r}/${s}/users`),E=Os(I,_=>{if(j.forEach(C=>C()),j=[],_.empty){N.clear(),o([]),f(!1);return}_.docs.forEach(C=>{const k=C.id,P=vn(Ue,`${r}/${s}/users/${k}/characterSheets`),v=Os(P,m=>S(m,k),m=>{console.error(`Erro ao ouvir fichas do usuário ${k}:`,m),f(!1)});j.push(v)})},_=>{console.error("Erro ao ouvir coleção de usuários:",_),f(!1)});return()=>{E(),j.forEach(_=>_())}}else{const j=vn(Ue,`${r}/${s}/users/${e.uid}/characterSheets`),I=Os(j,E=>S(E,e.uid),E=>{console.error("Erro ao ouvir as próprias fichas:",E),f(!1)});return()=>I()}},[e,n,r,s]);const g=L.useMemo(()=>i.filter(N=>l.includes(N.id)),[i,l]),y=L.useCallback(N=>{u(S=>S.includes(N)?S.filter(j=>j!==N):[...S,N])},[]),b={allCharacters:i,selectedCharIds:l,partyHealthData:g,isLoading:h,toggleCharacterSelection:y};return c.jsx(Mw.Provider,{value:b,children:t})},U1=()=>{const{feedItems:t}=Au(),[e,n]=L.useState(!0),r=l=>l?l.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"",s=l=>c.jsxs("div",{className:"p-3 mb-2",children:[c.jsxs("div",{className:"flex justify-between items-center text-xs text-textSecondary mb-1",children:[c.jsx("span",{className:"font-bold",children:l.characterName}),c.jsx("span",{children:r(l.timestamp)})]}),c.jsx("p",{className:"text-sm text-textPrimary break-words",children:l.text})]},l.id),i=l=>{const u=l.results.reduce((f,g)=>f+g.value,0),h=l.results.map(f=>f.displayValue).join(" + ");return c.jsxs("div",{className:"p-3 bg-bgElement rounded-md border border-bgInput mb-2",children:[c.jsxs("div",{className:"flex justify-between items-center text-xs text-textSecondary mb-1",children:[c.jsx("span",{children:l.characterName}),c.jsx("span",{children:r(l.timestamp)})]}),c.jsx("p",{className:"font-semibold text-textPrimary",children:l.rollName}),c.jsxs("p",{className:"text-sm text-textSecondary break-all",children:[h," = ",c.jsx("span",{className:"font-bold text-lg text-textAccent",children:u})]}),l.discordText&&c.jsxs("p",{className:"text-xs italic text-textSecondary mt-1",children:['"',l.discordText,'"']})]},l.id)},o=l=>{switch(l.type){case"roll":return i(l);case"message":return s(l);default:return null}};return e?c.jsx("div",{className:"fixed bottom-4 left-4 bg-btnHighlightBg text-btnHighlightText p-3 rounded-full shadow-lg cursor-pointer hover:opacity-90 z-50",onClick:()=>n(!1),children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}):c.jsxs("div",{className:"fixed bottom-4 left-4 w-full max-w-sm h-[60vh] bg-bgSurface/90 backdrop-blur-md rounded-lg shadow-2xl border border-bgElement flex flex-col z-50",children:[c.jsxs("div",{className:"flex justify-between items-center p-3 bg-bgElement cursor-pointer",onClick:()=>n(!0),children:[c.jsx("h3",{className:"font-bold text-textAccent",children:"Feed de Rolagens"}),c.jsx("button",{className:"text-textSecondary hover:text-textPrimary",children:"—"})]}),c.jsxs("div",{className:"flex-grow p-3 overflow-y-auto",children:[t.length===0&&c.jsx("p",{className:"text-textSecondary italic",children:"Nenhuma rolagem ou mensagem ainda..."}),t.map(o)]}),c.jsx(q1,{})]})},B1=({message:t,onConfirm:e,onCancel:n,type:r,showCopyButton:s,copyText:i})=>{const[o,l]=L.useState(""),u=()=>{navigator.clipboard.writeText(i).then(()=>{l("Copiado!"),setTimeout(()=>l(""),2e3)},()=>{l("Falhou em copiar.")})},h=r==="confirm"?"Confirmar":"OK",f=r==="confirm"?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700";return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-lg text-textPrimary mb-4 text-center whitespace-pre-wrap",children:t}),s&&c.jsxs("div",{className:"my-4 p-2 bg-bgElement rounded-md text-center",children:[c.jsx("p",{className:"text-textSecondary text-sm mb-1",children:"Comando para Discord/Roll20:"}),c.jsx("code",{className:"text-textAccent break-words",children:i}),c.jsx("button",{onClick:u,className:"ml-4 px-3 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-xs font-bold rounded-md",children:o||"Copiar"})]}),c.jsxs("div",{className:"flex justify-around gap-4 mt-4",children:[c.jsx("button",{onClick:e,className:`px-5 py-2 rounded-lg font-bold shadow-md text-white ${f}`,children:h}),r!=="info"&&c.jsx("button",{onClick:n,className:"px-5 py-2 bg-bgElement hover:opacity-80 text-textPrimary font-bold rounded-lg shadow-md",children:"Cancelar"})]})]})},$1=({title:t,onConfirm:e,onClose:n,type:r})=>{const[s,i]=L.useState(""),[o,l]=L.useState("HP"),u=()=>{const f=parseInt(s,10);!isNaN(f)&&f>0?e(f,o):console.error("Valor inválido.")},h=f=>{f.key==="Enter"&&u()};return c.jsxs(c.Fragment,{children:[c.jsx("h3",{className:"text-xl text-textAccent font-bold mb-4 text-center",children:t}),c.jsx("input",{type:"number",value:s,onChange:f=>i(f.target.value),onKeyDown:h,className:"w-full p-2 mb-4 bg-bgInput border border-bgElement rounded-md text-textPrimary text-center text-lg focus:ring-btnHighlightBg focus:border-btnHighlightBg",placeholder:"Valor",autoFocus:!0}),c.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[c.jsxs("label",{className:"flex items-center gap-2 text-textPrimary cursor-pointer",children:[c.jsx("input",{type:"radio",name:"target",value:"HP",checked:o==="HP",onChange:()=>l("HP"),className:"form-radio text-btnHighlightBg"})," HP"]}),r==="heal"&&c.jsxs("label",{className:"flex items-center gap-2 text-textPrimary cursor-pointer",children:[c.jsx("input",{type:"radio",name:"target",value:"HP Bonus",checked:o==="HP Bonus",onChange:()=>l("HP Bonus"),className:"form-radio text-btnHighlightBg"})," HP Bonus"]}),c.jsxs("label",{className:"flex items-center gap-2 text-textPrimary cursor-pointer",children:[c.jsx("input",{type:"radio",name:"target",value:"MP",checked:o==="MP",onChange:()=>l("MP"),className:"form-radio text-btnHighlightBg"})," MP"]})]}),c.jsxs("div",{className:"flex justify-around gap-4",children:[c.jsx("button",{onClick:u,className:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md",children:"Confirmar"}),c.jsx("button",{onClick:n,className:"px-5 py-2 bg-bgElement hover:opacity-80 text-textPrimary font-bold rounded-lg shadow-md",children:"Cancelar"})]})]})},z1=({attributeName:t,onConfirm:e,onClose:n})=>{const[r,s]=L.useState("1d20"),[i,o]=L.useState(""),l=()=>e(r,parseInt(i,10)||0),u=h=>{h.key==="Enter"&&l()};return c.jsxs(c.Fragment,{children:[c.jsxs("h3",{className:"text-xl text-textAccent font-bold mb-4 text-center",children:["Rolar ",t]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"dice-input",className:"block text-sm font-medium text-textSecondary mb-1",children:"Dado:"}),c.jsx("input",{id:"dice-input",type:"text",value:r,onChange:h=>s(h.target.value),onKeyDown:u,className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary text-center text-lg",placeholder:"Ex: 1d20, 2d6",autoFocus:!0})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{htmlFor:"bonus-input",className:"block text-sm font-medium text-textSecondary mb-1",children:"Bónus Adicional:"}),c.jsx("input",{id:"bonus-input",type:"number",value:i,onChange:h=>o(h.target.value),onKeyDown:u,className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary text-center text-lg",placeholder:"0"})]}),c.jsxs("div",{className:"flex justify-around gap-4",children:[c.jsx("button",{onClick:l,className:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md",children:"Confirmar"}),c.jsx("button",{onClick:n,className:"px-5 py-2 bg-bgElement hover:opacity-80 text-textPrimary font-bold rounded-lg shadow-md",children:"Cancelar"})]})]})},Hf=({modalState:t,closeModal:e})=>{if(!t.type)return null;const n=()=>{const{type:r,props:s}=t;switch(r){case"info":case"confirm":return c.jsx(B1,{...s});case"action":return c.jsx($1,{...s});case"rollAttribute":return c.jsx(z1,{...s});default:return null}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",onClick:e,children:c.jsx("div",{className:"bg-bgSurface rounded-lg shadow-xl p-6 w-full max-w-sm border border-bgElement",onClick:r=>r.stopPropagation(),children:n()})})},Nc={name:"Novo Tema",ownerUid:"",isPublic:!1,styles:{backgroundImage:"url('')",fontFamily:"'Roboto', sans-serif",surfaceOpacity:80,colors:{bgPage:"#111827",bgSurface:"#1f2937",bgElement:"#374151",bgInput:"#4b5563",textPrimary:"#f9fafb",textSecondary:"#9ca3af",borderAccent:"#f59e0b",textAccent:"#fcd34d",btnHighlightBg:"#8b5cf6",btnHighlightText:"#ffffff"}}},H1=["'Roboto', sans-serif","'Merriweather', serif","'Lato', sans-serif","'Noto Sans', sans-serif","'Slabo 27px', serif"],W1=({character:t,setPreviewTheme:e,onClose:n})=>{const{user:r}=Be(),{characterDataCollectionRoot:s}=Cu(),[i,o]=L.useState([]),[l,u]=L.useState(Nc),[h,f]=L.useState({type:null,props:{}}),g=()=>f({type:null,props:{}});L.useEffect(()=>{r&&(Rc(r.uid).then(o),u(_=>({...Nc,ownerUid:r.uid})))},[r]),L.useEffect(()=>{e(l)},[l,e]);const y=_=>{if(_==="new")u({...Nc,ownerUid:r.uid});else{const C=i.find(k=>k.id===_);C&&u(C)}},b=(_,C)=>u(k=>({...k,styles:{...k.styles,[_]:C}})),N=(_,C)=>u(k=>({...k,styles:{...k.styles,colors:{...k.styles.colors,[_]:C}}})),S=_=>u(C=>({...C,name:_.target.value})),j=async()=>{const _={...l,ownerUid:r.uid};try{const C=await ay(_);if(C){f({type:"info",props:{message:"Tema salvo com sucesso!",onConfirm:g}});const k=await Rc(r.uid);o(k);const P=k.find(v=>v.id===(_.id||C));P&&u(P)}else throw new Error("Ocorreu um erro desconhecido ao salvar.")}catch(C){console.error("Falha ao salvar o tema:",C),f({type:"info",props:{message:"Falha ao salvar o tema.",onConfirm:g}})}},I=()=>{if(!l.id){f({type:"info",props:{message:"Não pode apagar um tema que ainda não foi salvo.",onConfirm:g}});return}f({type:"confirm",props:{message:`Tem a certeza que quer apagar o tema "${l.name}"?`,onConfirm:async()=>{await O1(l.id),g(),Rc(r.uid).then(o),y("new")},onCancel:g}})},E=async()=>{if(!t||!l.id){f({type:"info",props:{message:"Precisa ter uma ficha selecionada e um tema salvo para aplicar.",onConfirm:g}});return}await ay(l),await L1(t.ownerUid,t.id,l.id,s),f({type:"info",props:{message:`Tema "${l.name}" aplicado!`,onConfirm:()=>{g(),n()}}})};return c.jsxs(c.Fragment,{children:[c.jsx(Hf,{modalState:h,closeModal:g}),c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-bgSurface rounded-lg shadow-xl p-6 w-full max-w-3xl border border-bgElement max-h-[90vh] flex flex-col",children:[c.jsx("h2",{className:"text-2xl font-bold text-textAccent mb-4",children:"Editor de Temas"}),c.jsxs("div",{className:"flex-grow overflow-y-auto pr-2",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-textSecondary mb-1",children:"Tema a Editar"}),c.jsxs("select",{onChange:_=>y(_.target.value),value:l.id||"new",className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary",children:[c.jsx("option",{value:"new",children:"-- Criar Novo Tema --"}),i.map(_=>c.jsx("option",{value:_.id,children:_.name},_.id))]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-textSecondary mb-1",children:"Nome do Tema"}),c.jsx("input",{type:"text",value:l.name,onChange:S,className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-textSecondary mb-1",children:"URL da Imagem de Fundo"}),c.jsx("input",{type:"text",value:l.styles.backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/,"$1"),onChange:_=>b("backgroundImage",`url('${_.target.value}')`),className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-textSecondary mb-1",children:"Fonte Principal"}),c.jsx("select",{value:l.styles.fontFamily,onChange:_=>b("fontFamily",_.target.value),className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary",children:H1.map(_=>c.jsx("option",{value:_,children:_.split(",")[0].replace(/'/g,"")},_))})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-textSecondary mb-1",children:["Transparência dos Módulos (",l.styles.surfaceOpacity||80,"%)"]}),c.jsx("input",{type:"range",min:"10",max:"100",step:"5",value:l.styles.surfaceOpacity||80,onChange:_=>b("surfaceOpacity",parseInt(_.target.value)),className:"w-full h-2 bg-bgElement rounded-lg appearance-none cursor-pointer mt-2"})]})]}),c.jsx("h3",{className:"text-lg font-semibold text-textAccent mt-6 mb-2",children:"Cores"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(l.styles.colors).map(([_,C])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-textSecondary capitalize",children:_.replace(/([A-Z])/g," $1")}),c.jsxs("div",{className:"flex items-center gap-2 p-1 bg-bgInput border border-bgElement rounded-md",children:[c.jsx("input",{type:"color",value:C,onChange:k=>N(_,k.target.value),className:"w-8 h-8 rounded border-none bg-transparent cursor-pointer"}),c.jsx("input",{type:"text",value:C,onChange:k=>N(_,k.target.value),className:"w-full bg-transparent text-textPrimary text-sm"})]})]},_))})]}),c.jsxs("div",{className:"flex flex-wrap justify-between items-center mt-6 pt-4 border-t border-bgElement",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:j,className:"px-4 py-2 bg-green-600 text-white font-bold rounded-lg mr-2",children:"Salvar"}),c.jsx("button",{onClick:I,className:"px-4 py-2 bg-red-600 text-white font-bold rounded-lg",children:"Apagar"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:E,disabled:!t||!l.id,className:"px-4 py-2 bg-btnHighlightBg text-btnHighlightText font-bold rounded-lg disabled:opacity-50",children:"Aplicar"}),c.jsx("button",{onClick:n,className:"px-4 py-2 bg-textSecondary/50 text-textPrimary font-bold rounded-lg",children:"Fechar"})]})]})]})})]})},q1=({characterName:t})=>{const[e,n]=L.useState(""),{addMessageToFeed:r}=Au(),{user:s}=Be(),i=o=>{o.preventDefault(),e.trim()!==""&&(r({characterName:t||s.displayName||"Usuário",text:e,ownerUid:s.uid}),n(""))};return c.jsx("form",{onSubmit:i,className:"p-3 border-t border-bgElement",children:c.jsxs("div",{className:"flex items-center bg-bgInput rounded-md",children:[c.jsx("input",{type:"text",value:e,onChange:o=>n(o.target.value),placeholder:"Digite uma mensagem...",className:"w-full bg-transparent p-2 text-textPrimary placeholder-textSecondary focus:outline-none"}),c.jsx("button",{type:"submit",className:"p-2 text-textAccent hover:opacity-80 disabled:opacity-50",disabled:!e.trim(),children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z",clipRule:"evenodd"})})})]})})},K1=({onCharacterClick:t})=>{const{isMaster:e}=Be(),{allCharacters:n,selectedCharIds:r,partyHealthData:s,toggleCharacterSelection:i}=M1(),[o,l]=L.useState(!1),[u,h]=L.useState(!1),f=y=>{t&&t(y)},g=y=>{var S,j;const b=((S=y.mainAttributes)==null?void 0:S.hp)||{current:"?",max:"?",temp:0},N=((j=y.mainAttributes)==null?void 0:j.mp)||{current:"?",max:"?"};return c.jsxs("div",{className:"p-2 bg-bgElement rounded-md border border-bgInput cursor-pointer hover:border-btnHighlightBg",onClick:()=>f(y),title:`Clique para ir para a ficha de ${y.name}`,children:[c.jsx("p",{className:"font-bold text-textPrimary truncate",children:y.name}),c.jsxs("div",{className:"text-sm flex justify-between",children:[c.jsxs("span",{className:"text-red-400",children:["HP: ",b.current,"/",b.max," ",b.temp>0?`(+${b.temp})`:""]}),c.jsxs("span",{className:"text-blue-400",children:["MP: ",N.current,"/",N.max]})]})]},y.id)};return o?c.jsx("div",{className:"fixed top-4 left-4 bg-btnHighlightBg text-btnHighlightText p-3 rounded-full shadow-lg cursor-pointer hover:opacity-90 z-50",onClick:()=>l(!1),title:"Expandir Monitor de Grupo",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-5M3 4h5V9"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 16l-4-4M3 8l4 4"})]})}):c.jsxs("div",{className:"fixed top-4 left-4 w-full max-w-xs bg-bgSurface/90 backdrop-blur-md rounded-lg shadow-2xl border border-bgElement flex flex-col z-50",children:[c.jsxs("div",{className:"flex justify-between items-center p-3 bg-bgElement cursor-pointer",onClick:()=>l(!0),children:[c.jsx("h3",{className:"font-bold text-textAccent",children:"Monitor de Grupo"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("button",{className:"text-textSecondary hover:text-textPrimary mr-2",onClick:y=>{y.stopPropagation(),h(!u)},title:"Selecionar Personagens",children:"⚙️"}),c.jsx("button",{className:"text-textSecondary hover:text-textPrimary",title:"Recolher",children:"—"})]})]}),u&&c.jsxs("div",{className:"p-3 border-b border-bgElement max-h-48 overflow-y-auto",children:[c.jsx("h4",{className:"text-sm font-semibold text-textSecondary mb-2",children:"Selecionar Personagens"}),n.length>0?n.map(y=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`char-select-${y.id}`,checked:r.includes(y.id),onChange:()=>i(y.id),className:"form-checkbox h-4 w-4 text-btnHighlightBg bg-bgInput border-bgElement rounded"}),c.jsx("label",{htmlFor:`char-select-${y.id}`,className:"ml-2 text-textPrimary text-sm truncate",children:y.name})]},y.id)):c.jsx("p",{className:"text-xs text-textSecondary italic",children:"Nenhuma ficha encontrada."})]}),c.jsx("div",{className:"flex-grow p-3 overflow-y-auto space-y-2 max-h-[60vh]",children:s.length>0?s.map(g):c.jsx("p",{className:"text-textSecondary italic text-sm text-center py-4",children:"Nenhum personagem selecionado. Clique na engrenagem ⚙️ para selecionar."})})]})},G1=[2,3,4,6,8,10,12,20,50,100],Q1=({character:t})=>{const[e,n]=L.useState(!1),{addRollToFeed:r}=Au(),s=L.useCallback(async(o,l)=>{const u=`${o}
${l}`;if(t&&t.discordWebhookUrl){try{await fetch(t.discordWebhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embeds:[{title:o,description:l.replace(/\*/g,""),color:7506394}]})})}catch(h){return console.error("Failed to send to Discord:",h),null}return u}else return alert(`Webhook do Discord não configurado. Copie o comando:

${u}`),null},[t,r]),i=async o=>{const l=Math.floor(Math.random()*o)+1;n(!1);const u=await s(`Rolagem de d${o}`,`**Resultado: ${l}**`);r({characterName:(t==null?void 0:t.name)||"Narrador",rollName:`Rolagem Rápida de d${o}`,results:[{value:l,displayValue:`d${o} (${l})`}],discordText:u})};return c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>n(!e),title:"Rolagem Rápida",className:"bg-gray-800 hover:bg-gray-700 text-white w-10 h-10 rounded-lg flex items-center justify-center text-xl shadow-md transition-transform transform hover:scale-110 border border-gray-600",children:"🎲"}),e&&c.jsx("div",{className:"absolute bottom-12 right-0 bg-gray-900 bg-opacity-90 backdrop-blur-sm p-2 rounded-xl shadow-2xl border border-gray-700 w-40",children:c.jsx("div",{className:"grid grid-cols-2 gap-2",children:G1.map(o=>c.jsxs("button",{onClick:()=>i(o),className:"bg-gray-700 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:["d",o]},o))})})]})},Y1=({href:t,title:e,children:n})=>c.jsx("a",{href:t,title:e,className:"bg-gray-800 hover:bg-gray-700 text-white w-10 h-10 rounded-lg flex items-center justify-center text-xl shadow-md transition-transform transform hover:scale-110 border border-gray-600",children:n}),X1=({character:t})=>{const e=[{href:"#info",title:"Informações",icon:"👤"},{href:"#main-attributes",title:"Atributos Principais",icon:"❤️"},{href:"#actions",title:"Ações",icon:"⚔️"},{href:"#buffs",title:"Buffs",icon:"✨"},{href:"#wallet",title:"Carteira",icon:"💰"},{href:"#inventory",title:"Inventário",icon:"🎒"},{href:"#equipped",title:"Equipados",icon:"🛡️"},{href:"#perks",title:"Vantagens",icon:"🌟"},{href:"#skills",title:"Habilidades",icon:"🎯"},{href:"#specializations",title:"Especializações",icon:"📜"},{href:"#story",title:"História",icon:"📖"},{href:"#notes",title:"Anotações",icon:"📝"},{href:"#discord",title:"Discord",icon:"💬"}];return c.jsx("div",{className:"fixed bottom-4 right-4 z-40 bg-gray-900 bg-opacity-80 backdrop-blur-sm p-2 rounded-xl shadow-2xl border border-gray-700",children:c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.map(n=>c.jsx(Y1,{href:n.href,title:n.title,children:n.icon},n.href)),c.jsx(Q1,{character:t})]})})},J1=({initialValue:t,onConfirm:e,onCancel:n})=>{const[r,s]=L.useState(t),i=()=>{e(r)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50",children:c.jsxs("div",{className:"bg-bgSurface p-6 rounded-lg shadow-xl w-full max-w-md",children:[c.jsx("h3",{className:"text-xl font-bold text-textPrimary mb-4",children:"URL da Imagem do Personagem"}),c.jsx("p",{className:"text-textSecondary mb-4",children:"Cole a nova URL da imagem abaixo:"}),c.jsx("input",{type:"text",value:r,onChange:o=>s(o.target.value),className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary focus:ring-btnHighlightBg focus:border-btnHighlightBg",placeholder:"https://exemplo.com/imagem.png",autoFocus:!0}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:i,className:"px-4 py-2 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg",children:"Confirmar"})]})]})})},Z1=({character:t,onUpdate:e,isMaster:n,isCollapsed:r,toggleSection:s,isEditMode:i})=>{const{user:o}=Be(),l=o&&(o.uid===t.ownerUid||n),[u,h]=L.useState(!1),[f,g]=L.useState({name:t.name||"",age:t.age||"",height:t.height||"",gender:t.gender||"",race:t.race||"",class:t.class||"",alignment:t.alignment||"",level:t.level||"",xp:t.xp||""});L.useEffect(()=>{g({name:t.name||"",age:t.age||"",height:t.height||"",gender:t.gender||"",race:t.race||"",class:t.class||"",alignment:t.alignment||"",level:t.level||"",xp:t.xp||""})},[t]);const y=C=>(C=parseInt(C,10),isNaN(C)||C<1?{scale:"N/A",category:"Desconhecida"}:C>=1&&C<=10?{scale:0,category:"Comum"}:C>=11&&C<=20?{scale:1,category:"Lendário 1"}:C>=21&&C<=30?{scale:2,category:"Lendário 2"}:C>=31&&C<=40?{scale:3,category:"Lendário 3"}:C>=41&&C<=45?{scale:4,category:"Colossal 1"}:C>=46&&C<=50?{scale:5,category:"Colossal 2"}:C>=51&&C<=55?{scale:6,category:"Colossal 3"}:C>=56&&C<=59?{scale:7,category:"Titânico 1"}:C===60?{scale:8,category:"Divino"}:{scale:"N/A",category:"Além do Divino"}),{scale:b,category:N}=L.useMemo(()=>y(t.level),[t.level]),S=C=>{const{name:k,value:P}=C.target;g(v=>({...v,[k]:P}))},j=L.useCallback(C=>{const k=f[C],P=t[C],m=["age","level","xp"].includes(C)?parseInt(k,10)||0:k;m!==P&&e(C,m)},[f,t,e]),I=()=>{l&&i&&h(!0)},E=C=>{C!==null&&C!==t.photoUrl&&e("photoUrl",C),h(!1)},_=["name","age","height","gender","race","class","alignment","level","xp"];return c.jsxs(bt,{title:"Informações do Personagem",isCollapsed:r,toggleSection:s,children:[u&&c.jsx(J1,{initialValue:t.photoUrl||"",onConfirm:E,onCancel:()=>h(!1)}),c.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[c.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center",children:[c.jsx("div",{className:`rounded-full border-2 border-btnHighlightBg ${l&&i?"cursor-pointer":""}`,onClick:I,children:t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:"Foto",className:"w-48 h-48 object-cover rounded-full",onError:C=>{C.target.onerror=null,C.target.src="https://placehold.co/192x192/1f2937/FFFFFF?text=Erro"}}):c.jsx("div",{className:"w-48 h-48 bg-bgElement rounded-full flex items-center justify-center text-6xl text-textSecondary",children:"+"})}),c.jsxs("div",{className:"text-center mt-2",children:[c.jsx("p",{className:"text-sm font-medium text-textSecondary",children:"Escala de Poder:"}),c.jsx("p",{className:"text-lg font-bold text-textPrimary",children:N})]})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 flex-grow w-full",children:_.map(C=>c.jsxs("div",{children:[c.jsxs("label",{htmlFor:C,className:"block text-sm font-medium text-textSecondary mb-1 capitalize",children:[C,":"]}),c.jsx("input",{type:["age","level","xp"].includes(C)?"number":"text",id:C,name:C,value:f[C],onChange:S,onBlur:()=>j(C),className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary focus:ring-btnHighlightBg focus:border-btnHighlightBg",disabled:!l||!i&&["race","class","alignment"].includes(C)})]},C))})]})]})},eR=({character:t,onUpdate:e,isMaster:n,isCollapsed:r,toggleSection:s,buffModifiers:i,isEditMode:o,onAttributeRoll:l})=>{var E,_,C,k,P;const{user:u}=Be();u&&(u.uid,t.ownerUid);const h=u&&(u.uid===t.ownerUid||n),[f,g]=L.useState(t.mainAttributes||{hp:{},mp:{}});L.useEffect(()=>{g(t.mainAttributes||{hp:{},mp:{}})},[t.mainAttributes]);const y=(v,m)=>(parseInt(v,10)||0)+(i&&i[m]||0),b=L.useMemo(()=>y(f==null?void 0:f.destreza,"Destreza"),[f==null?void 0:f.destreza,i]),N=L.useMemo(()=>y(f==null?void 0:f.constituicao,"Constituição"),[f==null?void 0:f.constituicao,i]),S=(parseInt(f==null?void 0:f.fd,10)||0)+N,j=(v,m)=>{const{name:x,value:T}=v.target,R=T===""?"":parseInt(T,10);g(D=>m?{...D,[m]:{...D[m]||{},[x]:R}}:{...D,[x]:R})},I=L.useCallback((v,m)=>{var T;if(!t)return;const x=t.mainAttributes||{};if(m){const R=(T=f==null?void 0:f[m])==null?void 0:T[v],D=x[m]||{},A=D[v],J=parseInt(R,10)||0;if(J!==(A||0)){const Ee={...D,[v]:J},je={...x,[m]:Ee};e("mainAttributes",je)}}else{const R=f==null?void 0:f[v],D=x[v],A=parseInt(R,10)||0;if(A!==(D||0)){const J={...x,[v]:A};e("mainAttributes",J)}}},[f,t,e]);return c.jsx(bt,{title:"Atributos Principais",isCollapsed:r,toggleSection:s,children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"flex flex-col items-center p-2 bg-bgElement rounded-md",children:[c.jsx("label",{className:"text-lg font-medium text-textSecondary mb-1 uppercase",children:"HP"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",name:"current",value:((E=f.hp)==null?void 0:E.current)??"",onChange:v=>j(v,"hp"),onBlur:()=>I("current","hp"),className:"w-16 p-2 text-center bg-bgInput border border-bgElement rounded-md text-textPrimary text-xl font-bold cursor-not-allowed",disabled:!0}),c.jsx("span",{className:"text-textSecondary",children:"/"}),c.jsx("input",{type:"number",name:"max",value:((_=f.hp)==null?void 0:_.max)??"",onChange:v=>j(v,"hp"),onBlur:()=>I("max","hp"),className:"w-16 p-2 text-center bg-bgInput border border-bgElement rounded-md text-textPrimary text-xl font-bold",disabled:!n}),c.jsx("span",{className:"text-blue-400 font-bold text-xl ml-1",children:"+"}),c.jsx("input",{type:"number",title:"HP Temporário",name:"temp",value:((C=f.hp)==null?void 0:C.temp)??"",onChange:v=>j(v,"hp"),onBlur:()=>I("temp","hp"),className:"w-16 p-2 text-center bg-bgInput border border-blue-400 rounded-md text-blue-300 text-xl font-bold cursor-not-allowed",disabled:!0})]})]}),c.jsxs("div",{className:"flex flex-col items-center p-2 bg-bgElement rounded-md",children:[c.jsx("label",{className:"text-lg font-medium text-textSecondary mb-1 uppercase",children:"MP"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",name:"current",value:((k=f.mp)==null?void 0:k.current)??"",onChange:v=>j(v,"mp"),onBlur:()=>I("current","mp"),className:"w-16 p-2 text-center bg-bgInput border border-bgElement rounded-md text-textPrimary text-xl font-bold cursor-not-allowed",disabled:!0}),c.jsx("span",{className:"text-textSecondary",children:"/"}),c.jsx("input",{type:"number",name:"max",value:((P=f.mp)==null?void 0:P.max)??"",onChange:v=>j(v,"mp"),onBlur:()=>I("max","mp"),className:"w-16 p-2 text-center bg-bgInput border border-bgElement rounded-md text-textPrimary text-xl font-bold",disabled:!n})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-textAccent mt-4 mb-2 border-b border-bgElement pb-1",children:"Atributos Essenciais"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:["Força","Destreza","Constituição","Inteligencia","Sabedoria","Carisma"].map(v=>{const m=v.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),x=(f==null?void 0:f[m])??"",T=y(x,v);return c.jsxs("div",{className:"flex flex-col items-center p-2 bg-bgElement rounded-md",children:[c.jsx("label",{htmlFor:v,className:"capitalize text-lg font-medium text-textSecondary mb-1 cursor-pointer hover:text-btnHighlightBg",onClick:()=>l(v,T),children:v}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",id:v,name:m,value:x,onChange:j,onBlur:()=>I(m),className:"w-14 p-2 text-center bg-bgInput border border-bgElement rounded-md text-textPrimary text-xl font-bold",disabled:!h}),c.jsx("span",{className:"text-textSecondary",children:"="}),c.jsx("span",{className:"w-14 p-2 text-center bg-bgInput border border-bgElement rounded-md text-textPrimary text-xl font-bold",children:T})]})]},v)})})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-textAccent mt-4 mb-2 border-b border-bgElement pb-1",children:"Atributos de Combate"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:["Iniciativa","FA","FM","FD","Acerto","MD","ME"].map(v=>{const m=v.toLowerCase(),x=["MD"].includes(v);let T,R;return v==="Iniciativa"?(T=(f==null?void 0:f[m])??"",R=(parseInt(T,10)||0)+b+(i.Iniciativa||0)):v==="MD"?(T=S,R=y(T,"MD")):(T=(f==null?void 0:f[m])??"",R=y((f==null?void 0:f[m])||0,v.toUpperCase())),c.jsxs("div",{className:"flex flex-col items-center p-2 bg-bgElement rounded-md",children:[c.jsx("label",{htmlFor:v,className:"capitalize text-lg font-medium text-textSecondary mb-1 cursor-pointer hover:text-btnHighlightBg",onClick:()=>l(v,R),children:v.toUpperCase()}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",id:v,name:m,value:T,onChange:j,onBlur:()=>!x&&I(m),className:`w-14 p-2 text-center bg-bgInput border border-bgElement rounded-md text-textPrimary text-xl font-bold ${x?"cursor-not-allowed":""}`,disabled:!h||x}),c.jsx("span",{className:"text-textSecondary",children:"="}),c.jsx("span",{className:"w-14 p-2 text-center bg-bgInput border border-bgElement rounded-md text-textPrimary text-xl font-bold",children:R})]})]},v)})})]})]})})},tR=({character:t,isMaster:e,onUpdate:n,isCollapsed:r,toggleSection:s,isEditMode:i})=>{var E,_;const{user:o}=Be(),[l,u]=L.useState(0),h=((E=t.wallet)==null?void 0:E.zeni)||0,f=((_=t.wallet)==null?void 0:_.inspiration)||0,g=o&&(o.uid===t.ownerUid||e),y=(C,k)=>{const P={...t.wallet,[C]:Math.max(0,k)};n("wallet",P)},b=()=>{y("zeni",h+l),u(0)},N=()=>{y("zeni",h-l),u(0)},S=()=>y("inspiration",f+1),j=()=>y("inspiration",f-1),I=c.jsxs("div",{className:"flex justify-between items-center w-full",children:[c.jsxs("span",{children:["Zeni: ",h]}),c.jsxs("span",{className:"text-textPrimary text-base",children:["Inspiração: ",f]})]});return c.jsx(bt,{title:I,isCollapsed:r,toggleSection:s,isComplexTitle:!0,children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"hidden sm:inline font-semibold text-textSecondary",children:"Zeni:"}),c.jsx("input",{type:"number",value:l===0?"":l,onChange:C=>u(parseInt(C.target.value,10)||0),className:"w-24 p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary text-lg",placeholder:"Valor",disabled:!g}),c.jsx("button",{onClick:b,className:"px-3 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg text-sm",disabled:!g,children:"+"}),c.jsx("button",{onClick:N,className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg text-sm",disabled:!g,children:"-"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"hidden sm:inline font-semibold text-textSecondary",children:"Inspiração:"}),c.jsx("button",{onClick:S,className:"px-3 py-2 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg text-sm",disabled:!g,children:"+1"}),c.jsx("button",{onClick:j,className:"px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white font-bold rounded-lg text-sm",disabled:!g,children:"-1"})]})]})})},nR=({character:t,onUpdate:e,isMaster:n,isCollapsed:r,toggleSection:s,isEditMode:i})=>{const{user:o}=Be(),l=o&&(o.uid===t.ownerUid||n),[u,h]=L.useState(t.discordWebhookUrl||"");L.useEffect(()=>{h(t.discordWebhookUrl||"")},[t.discordWebhookUrl]);const f=y=>{h(y.target.value)},g=L.useCallback(()=>{u!==t.discordWebhookUrl&&e("discordWebhookUrl",u)},[u,t.discordWebhookUrl,e]);return c.jsx(bt,{title:"Integração com Discord",isCollapsed:r,toggleSection:s,children:c.jsxs("div",{children:[c.jsx("label",{htmlFor:"discordWebhookUrl",className:"block text-sm font-medium text-textSecondary mb-1",children:"URL do Webhook do Canal:"}),c.jsx("input",{type:"text",id:"discordWebhookUrl",name:"discordWebhookUrl",value:u,onChange:f,onBlur:g,className:"w-full p-2 bg-bgInput border border-bgElement rounded-md focus:ring-btnHighlightBg focus:border-btnHighlightBg text-textPrimary",placeholder:"Cole a URL do Webhook do seu canal do Discord aqui",disabled:!l||!i}),c.jsx("p",{className:"text-xs text-textSecondary mt-2",children:"Com a URL do Webhook configurada, os comandos de rolagem serão enviados diretamente para o seu canal do Discord."})]})})},Do=({value:t,onChange:e,onBlur:n,placeholder:r,className:s,disabled:i,name:o})=>{const l=L.useRef(null);return L.useEffect(()=>{l.current&&(l.current.style.height="auto",l.current.style.height=`${l.current.scrollHeight}px`)},[t]),c.jsx("textarea",{ref:l,value:t,onChange:e,onBlur:n,placeholder:r,className:`${s} resize-none overflow-hidden`,rows:"1",disabled:i,name:o})},rR=({character:t,onUpdate:e,isMaster:n,isCollapsed:r,toggleSection:s,onShowDiscord:i})=>{const{user:o}=Be(),l=o.uid===t.ownerUid||n,[u,h]=L.useState(t.inventory||[]);L.useEffect(()=>{h(t.inventory||[])},[t.inventory]);const f=()=>e("inventory",[...t.inventory||[],{id:crypto.randomUUID(),name:"",description:"",isCollapsed:!1}]),g=S=>e("inventory",(t.inventory||[]).filter(j=>j.id!==S)),y=(S,j,I)=>{h(E=>E.map(_=>_.id===S?{..._,[j]:I}:_))},b=L.useCallback((S,j)=>{const I=u.find(_=>_.id===S),E=(t.inventory||[]).find(_=>_.id===S);I&&E&&I[j]!==E[j]&&e("inventory",(t.inventory||[]).map(_=>_.id===S?{..._,[j]:I[j]}:_))},[u,t.inventory,e]),N=S=>{u.find(I=>I.id===S)&&e("inventory",(t.inventory||[]).map(I=>I.id===S?{...I,isCollapsed:!I.isCollapsed}:I))};return c.jsxs(bt,{title:"Inventário",isCollapsed:r,toggleSection:s,children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:(u||[]).map(S=>S.isCollapsed!==!1?c.jsxs("div",{className:"p-3 bg-bgElement rounded-md shadow-sm border border-bgInput flex justify-between items-center",children:[c.jsx("span",{className:"font-semibold text-lg cursor-pointer text-textPrimary flex-grow truncate",onClick:()=>N(S.id),children:S.name||"Item Sem Nome"}),c.jsx("button",{onClick:()=>i(S.name,S.description),title:"Mostrar no Feed",className:"px-3 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-sm font-bold rounded-md whitespace-nowrap ml-2",children:"Mostrar no Feed"})]},S.id):c.jsxs("div",{className:"col-span-1 sm:grid-cols-2 lg:col-span-3 flex flex-col p-3 bg-bgElement rounded-md shadow-sm border border-bgInput",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"font-semibold text-lg w-full cursor-pointer text-textPrimary",onClick:()=>N(S.id),children:S.name||"Item Sem Nome"}),c.jsx("button",{onClick:()=>i(S.name,S.description),title:"Mostrar no Feed",className:"px-3 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-sm font-bold rounded-md whitespace-nowrap ml-4",children:"Mostrar no Feed"})]}),c.jsx("span",{className:"text-textSecondary text-xs whitespace-nowrap cursor-pointer self-end",onClick:()=>N(S.id),children:"Recolher ▲"}),c.jsx("input",{type:"text",value:S.name,onChange:I=>y(S.id,"name",I.target.value),onBlur:()=>b(S.id,"name"),className:"font-semibold text-lg w-full p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary mb-2",placeholder:"Nome do Item",disabled:!l}),c.jsx(Do,{name:"description",value:S.description,onChange:I=>y(S.id,"description",I.target.value),onBlur:()=>b(S.id,"description"),placeholder:"Descrição do item",className:"text-sm text-textSecondary italic w-full p-1 bg-bgInput border border-bgElement rounded-md",disabled:!l}),l&&c.jsx("div",{className:"flex justify-end mt-2 pt-2 border-t border-bgInput/50",children:c.jsx("button",{onClick:()=>g(S.id),className:"p-2 rounded-md text-textSecondary hover:bg-red-600/50 hover:text-white",title:"Remover Item",children:c.jsx("span",{role:"img","aria-label":"Remover",className:"text-xl",children:"🗑️"})})})]},S.id))}),(u||[]).length===0&&c.jsx("p",{className:"text-textSecondary italic mt-4",children:"Nenhum item no inventário."}),l&&c.jsx("div",{className:"flex justify-center mt-4",children:c.jsx("button",{onClick:f,className:"w-10 h-10 bg-green-600 hover:bg-green-700 text-white text-2xl font-bold rounded-full shadow-lg flex items-center justify-center",children:"+"})})]})},sR=({character:t,isMaster:e,onUpdate:n,onShowDiscord:r,isCollapsed:s,toggleSection:i})=>{const{user:o}=Be(),l=o.uid===t.ownerUid||e,[u,h]=L.useState(t.equippedItems||[]);L.useEffect(()=>{h(t.equippedItems||[])},[t.equippedItems]);const f=()=>n("equippedItems",[...t.equippedItems||[],{id:crypto.randomUUID(),name:"",description:"",attributes:"",isCollapsed:!1}]),g=S=>n("equippedItems",(t.equippedItems||[]).filter(j=>j.id!==S)),y=(S,j,I)=>{h(E=>E.map(_=>_.id===S?{..._,[j]:I}:_))},b=L.useCallback((S,j)=>{const I=u.find(_=>_.id===S),E=(t.equippedItems||[]).find(_=>_.id===S);I&&E&&I[j]!==E[j]&&n("equippedItems",(t.equippedItems||[]).map(_=>_.id===S?{..._,[j]:I[j]}:_))},[u,t.equippedItems,n]),N=S=>n("equippedItems",(t.equippedItems||[]).map(j=>j.id===S?{...j,isCollapsed:!j.isCollapsed}:j));return c.jsxs(bt,{title:"Itens Equipados",isCollapsed:s,toggleSection:i,children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:(u||[]).map(S=>S.isCollapsed!==!1?c.jsxs("div",{className:"p-3 bg-bgElement rounded-md shadow-sm border border-bgInput flex justify-between items-center",children:[c.jsx("span",{className:"font-semibold text-lg cursor-pointer text-textPrimary flex-grow truncate",onClick:()=>N(S.id),children:S.name||"Item Sem Nome"}),c.jsx("button",{onClick:()=>r(S.name,S.description),title:"Mostrar no Feed",className:"px-3 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-sm font-bold rounded-md whitespace-nowrap ml-2",children:"Mostrar no Feed"})]},S.id):c.jsxs("div",{className:"col-span-1 sm:grid-cols-2 lg:col-span-3 flex flex-col p-3 bg-bgElement rounded-md shadow-sm border border-bgInput",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"font-semibold text-lg w-full cursor-pointer text-textPrimary",onClick:()=>N(S.id),children:S.name||"Item Sem Nome"}),c.jsx("button",{onClick:()=>r(S.name,S.description),title:"Mostrar no Feed",className:"px-3 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-sm font-bold rounded-md whitespace-nowrap ml-4",children:"Mostrar no Feed"})]}),c.jsx("span",{className:"text-textSecondary text-xs whitespace-nowrap cursor-pointer self-end",onClick:()=>N(S.id),children:"Recolher ▲"}),c.jsx("input",{type:"text",value:S.name,onChange:I=>y(S.id,"name",I.target.value),onBlur:()=>b(S.id,"name"),className:"font-semibold text-lg w-full p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary mb-2",placeholder:"Nome",disabled:!l}),c.jsx(Do,{value:S.description,onChange:I=>y(S.id,"description",I.target.value),onBlur:()=>b(S.id,"description"),placeholder:"Descrição",className:"text-sm text-textSecondary italic w-full p-1 bg-bgInput border border-bgElement rounded-md mb-2",disabled:!l}),c.jsx(Do,{value:S.attributes,onChange:I=>y(S.id,"attributes",I.target.value),onBlur:()=>b(S.id,"attributes"),placeholder:"Atributos/Efeitos",className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-sm text-textPrimary",disabled:!l}),l&&c.jsx("div",{className:"flex justify-end mt-2 pt-2 border-t border-bgInput/50",children:c.jsx("button",{onClick:()=>g(S.id),className:"p-2 rounded-md text-textSecondary hover:bg-red-600/50 hover:text-white",title:"Remover Item",children:c.jsx("span",{role:"img","aria-label":"Remover",className:"text-xl",children:"🗑️"})})})]},S.id))}),(u||[]).length===0&&c.jsx("p",{className:"text-textSecondary italic mt-4",children:"Nenhum item equipado."}),l&&c.jsx("div",{className:"flex justify-center mt-4",children:c.jsx("button",{onClick:f,className:"w-10 h-10 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-2xl font-bold rounded-full shadow-lg",children:"+"})})]})},iR=({character:t,isMaster:e,onUpdate:n,isCollapsed:r,toggleSection:s,onShowDiscord:i})=>{const{user:o}=Be(),l=o.uid===t.ownerUid||e,[u,h]=L.useState(t.abilities||[]);L.useEffect(()=>{h(t.abilities||[])},[t.abilities]);const f=()=>n("abilities",[...t.abilities||[],{id:crypto.randomUUID(),title:"",description:"",isCollapsed:!1}]),g=S=>n("abilities",(t.abilities||[]).filter(j=>j.id!==S)),y=(S,j,I)=>{h(E=>E.map(_=>_.id===S?{..._,[j]:I}:_))},b=L.useCallback((S,j)=>{const I=u.find(_=>_.id===S),E=(t.abilities||[]).find(_=>_.id===S);I&&E&&I[j]!==E[j]&&n("abilities",(t.abilities||[]).map(_=>_.id===S?{..._,[j]:I[j]}:_))},[u,t.abilities,n]),N=S=>n("abilities",(t.abilities||[]).map(j=>j.id===S?{...j,isCollapsed:!j.isCollapsed}:j));return c.jsxs(bt,{title:"Habilidades",isCollapsed:r,toggleSection:s,children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:(u||[]).map(S=>S.isCollapsed!==!1?c.jsxs("div",{className:"p-3 bg-bgElement rounded-md shadow-sm border border-bgInput flex justify-between items-center",children:[c.jsx("span",{className:"font-semibold text-lg cursor-pointer text-textPrimary flex-grow truncate",onClick:()=>N(S.id),children:S.title||"Habilidade Sem Título"}),c.jsx("button",{onClick:()=>i(S.title,S.description),title:"Mostrar no Feed",className:"px-3 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-sm font-bold rounded-md whitespace-nowrap ml-2",children:"Mostrar no Feed"})]},S.id):c.jsxs("div",{className:"col-span-1 sm:grid-cols-2 lg:col-span-3 flex flex-col p-3 bg-bgElement rounded-md shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"font-semibold text-lg w-full cursor-pointer text-textPrimary",onClick:()=>N(S.id),children:S.title||"Habilidade Sem Título"}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-4",children:[c.jsx("button",{onClick:()=>i(S.title,S.description),title:"Mostrar no Feed",className:"px-3 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-sm font-bold rounded-md whitespace-nowrap",children:"Mostrar no Feed"}),c.jsx("span",{className:"text-textSecondary text-xs whitespace-nowrap cursor-pointer",onClick:()=>N(S.id),children:"Recolher ▲"})]})]}),c.jsx("input",{type:"text",value:S.title,onChange:I=>y(S.id,"title",I.target.value),onBlur:()=>b(S.id,"title"),className:"font-semibold text-lg w-full p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary mb-2",placeholder:"Título",disabled:!l}),c.jsx(Do,{value:S.description,onChange:I=>y(S.id,"description",I.target.value),onBlur:()=>b(S.id,"description"),placeholder:"Descrição",className:"text-sm text-textSecondary italic w-full p-1 bg-bgInput border border-bgElement rounded-md",disabled:!l}),l&&c.jsx("div",{className:"flex justify-end mt-2 pt-2 border-t border-bgInput/50",children:c.jsx("button",{onClick:()=>g(S.id),className:"p-2 rounded-md text-textSecondary hover:bg-red-600/50 hover:text-white",title:"Remover Habilidade",children:c.jsx("span",{role:"img","aria-label":"Remover",className:"text-xl",children:"🗑️"})})})]},S.id))}),(u||[]).length===0&&c.jsx("p",{className:"text-textSecondary italic mt-4",children:"Nenhuma habilidade adicionada."}),l&&c.jsx("div",{className:"flex justify-center mt-4",children:c.jsx("button",{onClick:f,className:"w-10 h-10 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-2xl font-bold rounded-full shadow-lg",children:"+"})})]})},oR=({character:t,onUpdate:e,isCollapsed:n,toggleSection:r,onShowDiscord:s})=>{const o=g=>e(g,[...t[g]||[],{id:crypto.randomUUID(),name:"",description:"",origin:{class:!1,race:!1,manual:!0},value:0,isCollapsed:!1}]),l=(g,y)=>e(g,(t[g]||[]).filter(b=>b.id!==y)),u=(g,y,b)=>e(g,(t[g]||[]).map(N=>N.id===y?{...N,origin:{...N.origin,[b]:!N.origin[b]}}:N)),h=(g,y,b,N)=>e(g,(t[g]||[]).map(S=>S.id===y?{...S,[b]:N}:S)),f=(g,y)=>e(g,(t[g]||[]).map(b=>b.id===y?{...b,isCollapsed:!b.isCollapsed}:b));return c.jsx(bt,{title:"Vantagens e Desvantagens",isCollapsed:n,toggleSection:r,children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-textAccent/80 mb-3 border-b border-borderAccent/50 pb-1",children:"Vantagens"}),c.jsxs("div",{className:"space-y-2",children:[(t.advantages||[]).map(g=>c.jsx(ly,{perk:g,type:"advantages",canEdit:!0,onRemove:l,onChange:h,onOriginChange:u,onToggleCollapse:f,onShowDiscord:s},g.id)),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx("button",{onClick:()=>o("advantages"),className:"w-10 h-10 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-2xl font-bold rounded-full shadow-lg",children:"+"})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-textAccent/80 mb-3 border-b border-borderAccent/50 pb-1",children:"Desvantagens"}),c.jsxs("div",{className:"space-y-2",children:[(t.disadvantages||[]).map(g=>c.jsx(ly,{perk:g,type:"disadvantages",canEdit:!0,onRemove:l,onChange:h,onOriginChange:u,onToggleCollapse:f,onShowDiscord:s},g.id)),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx("button",{onClick:()=>o("disadvantages"),className:"w-10 h-10 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-2xl font-bold rounded-full shadow-lg",children:"+"})})]})]})]})})},ly=({perk:t,type:e,canEdit:n,onRemove:r,onChange:s,onOriginChange:i,onToggleCollapse:o,onShowDiscord:l})=>{const[u,h]=L.useState(t);L.useEffect(()=>{h(t)},[t.id]);const f=y=>{const{name:b,value:N,type:S}=y.target,j=S==="number"?parseInt(N,10)||0:N;h(I=>({...I,[b]:j}))},g=L.useCallback(y=>{u[y]!==t[y]&&s(e,u.id,y,u[y])},[u,t,e,s]);return c.jsxs("div",{className:"flex flex-col p-3 bg-bgElement rounded-md shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("span",{className:"font-semibold text-lg w-full cursor-pointer text-textPrimary",onClick:()=>o(e,t.id),children:[u.name||"Sem Nome"," ",t.isCollapsed?"...":""]}),c.jsx("button",{onClick:()=>l(u.name,u.description),title:"Mostrar no Feed",className:"px-3 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText text-sm font-bold rounded-md whitespace-nowrap ml-2",children:"Mostrar no Feed"})]}),!t.isCollapsed&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("input",{type:"text",name:"name",value:u.name,onChange:f,onBlur:()=>g("name"),className:"font-semibold text-lg flex-grow p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary",placeholder:"Nome",disabled:!n}),c.jsx("input",{type:"number",name:"value",value:u.value===0?"":u.value,onChange:f,onBlur:()=>g("value"),className:"w-12 p-1 bg-bgInput border border-bgElement rounded-md text-center text-textPrimary",placeholder:"Valor",disabled:!n})]}),c.jsx(Do,{name:"description",value:u.description,onChange:f,onBlur:()=>g("description"),placeholder:"Descrição",className:"text-sm text-textSecondary italic w-full p-1 bg-bgInput border border-bgElement rounded-md",disabled:!n}),c.jsx("div",{className:"flex gap-3 text-sm text-textSecondary mt-2",children:["class","race","manual"].map(y=>{var b;return c.jsxs("label",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"checkbox",checked:((b=t.origin)==null?void 0:b[y])||!1,onChange:()=>i(e,t.id,y),className:"form-checkbox text-btnHighlightBg rounded",disabled:!n}),y.charAt(0).toUpperCase()+y.slice(1)]},y)})}),n&&c.jsx("div",{className:"flex justify-end mt-2 pt-2 border-t border-bgInput/50",children:c.jsx("button",{onClick:()=>r(e,t.id),className:"p-2 rounded-md text-textSecondary hover:bg-red-600/50 hover:text-white",title:`Remover ${e==="advantages"?"Vantagem":"Desvantagem"}`,children:c.jsx("span",{role:"img","aria-label":"Remover",className:"text-xl",children:"🗑️"})})})]})]})},La=[{name:"Acrobacia",attr:"DES"},{name:"Adestramento*",attr:"CAR"},{name:"Armadilhas*",attr:"INT"},{name:"Atletismo",attr:"FOR"},{name:"Atuação*",attr:"CAR"},{name:"Cavalgar",attr:"DES"},{name:"Cirurgia*",attr:"INT"},{name:"Conhecimento*",attr:"INT"},{name:"Cura",attr:"SAB"},{name:"Diplomacia",attr:"CAR"},{name:"Disfarce*",attr:"CAR"},{name:"Enganação",attr:"CAR"},{name:"Furtividade",attr:"DES"},{name:"Guerra*",attr:"INT"},{name:"Intimidação",attr:"CAR"},{name:"Intuição",attr:"SAB"},{name:"Investigação",attr:"INT"},{name:"Jogatina*",attr:"CAR"},{name:"Ladinagem*",attr:"DES"},{name:"Luta",attr:"FOR"},{name:"Misticismo*",attr:"INT"},{name:"Nobreza*",attr:"INT"},{name:"Ofício",attr:"INT"},{name:"Percepção",attr:"SAB"},{name:"Pilotagem*",attr:"DES"},{name:"Pontaria",attr:"DES"},{name:"Prestidigitação",attr:"DES"},{name:"Religião*",attr:"SAB"},{name:"Sedução",attr:"CAR"},{name:"Sobrevivência",attr:"SAB"}],uy={FOR:"forca",DES:"destreza",CON:"constituicao",INT:"inteligencia",SAB:"sabedoria",CAR:"carisma"},aR=({character:t,isMaster:e,isCollapsed:n,toggleSection:r,onUpdate:s,onExecuteFormula:i,isEditMode:o})=>{const{user:l}=Be(),u=l.uid===t.ownerUid||e,[h,f]=L.useState(t.skillSystem||{});L.useEffect(()=>{if((!t.skillSystem||La.some(C=>!t.skillSystem[C.name]||!t.skillSystem[C.name].hasOwnProperty("selectedAttr")))&&u){console.log("Inicializando ou atualizando sistema de perícias...");const C={...t.skillSystem};La.forEach(k=>{const P=C[k.name]||{};P.hasOwnProperty("selectedAttr")||(C[k.name]={trained:P.trained||!1,otherBonus:P.otherBonus||0,selectedAttr:k.attr})}),s("skillSystem",C)}f(t.skillSystem||{})},[t.skillSystem,s,u]);const g=L.useMemo(()=>t.mainAttributes||{},[t.mainAttributes]),y=L.useMemo(()=>t.level||0,[t.level]),b=L.useCallback((_,C)=>{if(!C)return 0;const k=C.selectedAttr||_.attr,P=uy[k],v=g[P]||0,m=Math.floor(y/10);let x=0;C.trained&&(x=2+Math.floor(y/5));const T=parseInt(C.otherBonus,10)||0;return v+m+x+T},[g,y]),N=_=>{if(!u||!o)return;const C=t.skillSystem||{},k=C[_]||{trained:!1,otherBonus:0},P={...C,[_]:{...k,trained:!k.trained}};s("skillSystem",P)},S=(_,C)=>{if(!u||!o)return;const k=t.skillSystem||{},P=k[_]||{trained:!1,otherBonus:0,selectedAttr:""},v={...k,[_]:{...P,selectedAttr:C}};s("skillSystem",v)},j=(_,C)=>{f(k=>{const P=k[_]||{trained:!1,otherBonus:0};return{...k,[_]:{...P,otherBonus:C}}})},I=_=>{var m,x,T;if(!u||!o)return;const C=(m=h[_])==null?void 0:m.otherBonus,k=(T=(x=t.skillSystem)==null?void 0:x[_])==null?void 0:T.otherBonus,P=parseInt(C,10)||0,v=parseInt(k,10)||0;if(P!==v){const R={...t.skillSystem,...h};R[_].otherBonus=P,s("skillSystem",R)}String(C)!==String(P)&&f(t.skillSystem||{})},E=(_,C)=>{const k=`${C>0?"+":""}${C}`,P={name:`Perícia: ${_.name}`,components:[{type:"dice",value:"1d20"},{type:"number",value:C,label:"Bônus Total"}],discordText:`Rolagem de ${_.name} (1d20${k})`};i(P)};return!h||Object.keys(h).length<La.length?c.jsx(bt,{title:"Perícias",isCollapsed:n,toggleSection:r,children:c.jsx("p",{className:"text-textSecondary text-center",children:"Carregando perícias..."})}):c.jsx(bt,{title:"Perícias",isCollapsed:n,toggleSection:r,children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:La.map(_=>{const C=h[_.name];if(!C)return null;const k=b(_,C),P=`${k>=0?"+":""}${k}`,v=C.selectedAttr||_.attr;return c.jsxs("div",{className:"p-3 bg-bgElement rounded-md shadow-sm border border-bgInput flex flex-col gap-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-grow overflow-hidden",children:[c.jsx("input",{type:"checkbox",id:`trained-${_.name}`,checked:C.trained,onChange:()=>N(_.name),className:"form-checkbox text-btnHighlightBg rounded-sm focus:ring-btnHighlightBg disabled:opacity-50",disabled:!u||!o}),c.jsx("label",{className:"font-semibold text-lg text-textPrimary truncate",title:`${_.name}`,children:_.name})]}),o?c.jsx("select",{value:v,onChange:m=>S(_.name,m.target.value),className:"bg-bgInput text-textPrimary text-sm font-bold rounded-md p-1 border-none focus:ring-2 focus:ring-btnHighlightBg",disabled:!u,children:Object.keys(uy).map(m=>c.jsx("option",{value:m,children:m},m))}):c.jsxs("span",{className:"font-semibold text-textSecondary text-sm ml-1",children:["(",v,")"]}),c.jsx("span",{className:"font-bold text-lg text-btnHighlightBg whitespace-nowrap ml-2",children:P})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{htmlFor:`other-${_.name}`,className:"text-sm text-textSecondary whitespace-nowrap",children:"Outros:"}),c.jsx("input",{type:"number",id:`other-${_.name}`,value:C.otherBonus===0?"":C.otherBonus,onChange:m=>j(_.name,m.target.value),onBlur:()=>I(_.name),className:"w-full p-1 bg-bgInput border border-bgElement rounded-md text-textPrimary text-center disabled:bg-bgPage",placeholder:"0",disabled:!u||!o}),c.jsx("button",{onClick:()=>E(_,k),className:"px-3 py-1 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg text-lg",title:`Rolar ${_.name} (1d20${P})`,children:"🎲"})]})]},_.name)})})})},lR=({value:t,onChange:e,placeholder:n,className:r,disabled:s,onBlur:i})=>{const o=L.useRef(null);return L.useEffect(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=o.current.scrollHeight+"px")},[t]),c.jsx("textarea",{ref:o,value:t,onChange:e,onBlur:i,placeholder:n,className:`${r} resize-none overflow-hidden`,rows:"1",disabled:s})},uR=({character:t,isMaster:e,onUpdate:n,isCollapsed:r,toggleSection:s,isEditMode:i})=>{const{user:o}=Be(),l=o.uid===t.ownerUid||e,u=g=>{const y=g==="text"?{id:crypto.randomUUID(),type:"text",value:"",isCollapsed:!1}:{id:crypto.randomUUID(),type:"image",value:"",width:"",height:"",fitWidth:!0,isCollapsed:!1};if(g==="image"){const b=prompt("Cole a URL da imagem:");b&&n("history",[...t.history||[],{...y,value:b}])}else n("history",[...t.history||[],y])},h=(g,y,b)=>n("history",(t.history||[]).map(N=>N.id===g?{...N,[y]:b}:N)),f=g=>n("history",(t.history||[]).filter(y=>y.id!==g));return c.jsxs(bt,{title:"História do Personagem",isCollapsed:r,toggleSection:s,children:[c.jsx("div",{className:"space-y-4 mb-4",children:(t.history||[]).length===0?c.jsx("p",{className:"text-textSecondary italic",children:"Nenhum bloco de história adicionado."}):t.history.map(g=>Fw(g,l,h,f))}),l&&i&&c.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 justify-center",children:[c.jsx("button",{onClick:()=>u("text"),className:"px-6 py-2 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg",children:"Adicionar Texto"}),c.jsx("button",{onClick:()=>u("image"),className:"px-6 py-2 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg",children:"Adicionar Imagem"})]})]})},cR=({character:t,isMaster:e,onUpdate:n,isCollapsed:r,toggleSection:s,isEditMode:i})=>{const{user:o}=Be(),l=o.uid===t.ownerUid||e,u=g=>{const y=g==="text"?{id:crypto.randomUUID(),type:"text",value:"",isCollapsed:!1}:{id:crypto.randomUUID(),type:"image",value:"",width:"",height:"",fitWidth:!0,isCollapsed:!1};if(g==="image"){const b=prompt("Cole a URL da imagem para a anotação:");b&&n("notes",[...t.notes||[],{...y,value:b}])}else n("notes",[...t.notes||[],y])},h=(g,y,b)=>n("notes",(t.notes||[]).map(N=>N.id===g?{...N,[y]:b}:N)),f=g=>n("notes",(t.notes||[]).filter(y=>y.id!==g));return c.jsxs(bt,{title:"Anotações",isCollapsed:r,toggleSection:s,children:[c.jsx("div",{className:"space-y-4 mb-4",children:(t.notes||[]).length===0?c.jsx("p",{className:"text-textSecondary italic",children:"Nenhum bloco de anotação adicionado."}):t.notes.map(g=>Fw(g,l,h,f))}),l&&i&&c.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 justify-center",children:[c.jsx("button",{onClick:()=>u("text"),className:"px-6 py-2 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg",children:"Adicionar Texto"}),c.jsx("button",{onClick:()=>u("image"),className:"px-6 py-2 bg-btnHighlightBg hover:opacity-80 text-btnHighlightText font-bold rounded-lg",children:"Adicionar Imagem"})]})]})},Fw=(t,e,n,r)=>c.jsxs("div",{className:"p-3 bg-bgElement rounded-md shadow-sm border border-bgInput relative",children:[e&&c.jsx("button",{onClick:()=>r(t.id),className:"absolute top-2 right-2 p-1 rounded-md text-textSecondary hover:bg-red-600/50 hover:text-white z-10",title:"Remover Bloco",children:c.jsx("span",{role:"img","aria-label":"Remover",className:"text-lg",children:"🗑️"})}),t.type==="text"?c.jsx(dR,{block:t,canEdit:e,updateBlock:n}):c.jsx(hR,{block:t,canEdit:e,updateBlock:n})]},t.id),dR=({block:t,canEdit:e,updateBlock:n})=>{const[r,s]=L.useState(t.value||"");L.useEffect(()=>{s(t.value||"")},[t.value]);const i=L.useCallback(()=>{r!==t.value&&n(t.id,"value",r)},[r,t.value,t.id,n]);return t.isCollapsed?c.jsxs("div",{className:"cursor-pointer",onClick:()=>n(t.id,"isCollapsed",!1),children:[c.jsx("p",{className:"text-lg font-semibold mb-1 text-textPrimary",children:"Bloco de Texto"}),c.jsx("p",{className:"text-sm italic text-textSecondary truncate",children:t.value||"Vazio..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(lR,{value:r,onChange:o=>s(o.target.value),onBlur:i,placeholder:"Digite aqui...",className:"w-full p-2 bg-bgInput border border-bgElement rounded-md text-textPrimary",disabled:!e}),c.jsx("div",{onClick:()=>n(t.id,"isCollapsed",!0),className:"mt-2 text-center p-1 bg-bgInput hover:opacity-80 text-xs font-bold rounded-md cursor-pointer text-textSecondary",children:"Ocultar ▲"})]})},hR=({block:t,canEdit:e,updateBlock:n})=>{const[r,s]=L.useState(t.width===0?"":t.width),[i,o]=L.useState(t.height===0?"":t.height),[l,u]=L.useState(t.fitWidth);L.useEffect(()=>{s(t.width===0?"":t.width),o(t.height===0?"":t.height),u(t.fitWidth)},[t.width,t.height,t.fitWidth]);const h=L.useCallback(()=>n(t.id,"width",parseInt(r)||0),[t.id,n,r]),f=L.useCallback(()=>n(t.id,"height",parseInt(i)||0),[t.id,n,i]),g=L.useCallback(y=>n(t.id,"fitWidth",y.target.checked),[t.id,n]);return t.isCollapsed?c.jsx("div",{className:"cursor-pointer text-center py-2",onClick:()=>n(t.id,"isCollapsed",!1),children:c.jsx("p",{className:"text-lg font-semibold text-textPrimary",children:"Mostrar Imagem"})}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("img",{src:t.value,alt:"Imagem",className:"max-w-full h-auto rounded-md shadow-md",style:{width:l?"100%":r?`${r}px`:"auto",height:l?"auto":i?`${i}px`:"auto",objectFit:"contain"},onError:y=>{y.target.onerror=null,y.target.src="https://placehold.co/300x200/1f2937/FFFFFF?text=Erro"}}),e&&c.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 mt-2 text-sm text-textSecondary",children:[c.jsxs("label",{children:["Ajustar à Largura: ",c.jsx("input",{type:"checkbox",checked:l,onChange:y=>{u(y.target.checked),g(y)},className:"form-checkbox text-btnHighlightBg rounded"})]}),!l&&c.jsxs(c.Fragment,{children:[c.jsxs("label",{children:["Largura (px): ",c.jsx("input",{type:"number",value:r,onChange:y=>s(y.target.value),onBlur:h,className:"w-20 p-1 bg-bgInput border border-bgElement rounded-md text-center text-textPrimary"})]}),c.jsxs("label",{children:["Altura (px): ",c.jsx("input",{type:"number",value:i,onChange:y=>o(y.target.value),onBlur:f,className:"w-20 p-1 bg-bgInput border border-bgElement rounded-md text-center text-textPrimary"})]})]})]}),c.jsx("div",{onClick:()=>n(t.id,"isCollapsed",!0),className:"mt-2 w-full text-center p-1 bg-bgInput hover:opacity-80 text-xs font-bold rounded-md cursor-pointer text-textSecondary",children:"Ocultar ▲"})]})},fR=({character:t,onBack:e,isMaster:n})=>{var x,T,R,D,A,J,Ee,je,We,B,Y,X,xe;const{character:r,loading:s,updateCharacterField:i,toggleSection:o}=I1(t.id,t.ownerUid),{addRollToFeed:l,addMessageToFeed:u}=Au(),{user:h}=Be(),[f,g]=L.useState(!1),y=n||h&&h.uid===(r==null?void 0:r.ownerUid),[b,N]=L.useState({type:null,props:{}}),S=()=>N({type:null,props:{}}),j=L.useMemo(()=>r?["Iniciativa","FA","FM","FD","Acerto","MD","ME","Força","Destreza","Constituição","Inteligencia","Sabedoria","Carisma"]:[],[r]),I=L.useMemo(()=>{const z={attributes:{},dice:[]};return r!=null&&r.buffs&&r.buffs.forEach(K=>{K.isActive&&K.effects&&K.effects.forEach(se=>{if(se.type==="attribute"&&se.target){const ye=parseInt(se.value,10)||0;z.attributes[se.target]=(z.attributes[se.target]||0)+ye}else se.type==="dice"&&se.value&&z.dice.push({name:K.name,value:se.value})})}),z},[r==null?void 0:r.buffs]),E=async(z,K,se=[],ye="",ve="")=>{if(!r)return;u({characterName:r.name||"Narrador",text:`${z}
${K||"Nenhuma descrição."}`});const pe={author:{name:r.name||"Personagem",icon_url:r.photoUrl||""},title:z||"Sem Título",description:K||"Sem Descrição.",fields:se,color:8141549,footer:ye?{text:ye}:void 0};if(r.discordWebhookUrl)try{await fetch(r.discordWebhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embeds:[pe]})}),ve&&await fetch(r.discordWebhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:ve})})}catch(qt){N({type:"info",props:{message:`Falha ao enviar para o Discord: ${qt.message}`,onConfirm:S}})}else{const qt=`**${z||"Sem Título"}**
${K||"Sem Descrição."}`;N({type:"info",props:{message:"Webhook do Discord não configurado. Copie e cole no Discord:",copyText:qt,showCopyButton:!0,onConfirm:S}})}},_=(z,K,se)=>{if(!(r!=null&&r.mainAttributes))return;let ye="";const ve=r.name||"Personagem",pe=JSON.parse(JSON.stringify(r.mainAttributes));if(se==="heal")switch(K){case"HP":pe.hp.current=Math.min(pe.hp.max,pe.hp.current+z),ye=`${ve} recuperou ${z} de HP.`;break;case"HP Bonus":pe.hp.temp=(pe.hp.temp||0)+z,ye=`${ve} recebeu ${z} de HP Bonus.`;break;case"MP":pe.mp.current=Math.min(pe.mp.max,pe.mp.current+z),ye=`${ve} recuperou ${z} de MP.`;break}else switch(K){case"HP":let qt=z;const Ct=Math.min(qt,pe.hp.temp||0);pe.hp.temp-=Ct,qt-=Ct,qt>0&&(pe.hp.current-=qt),ye=`${ve} perdeu ${z} de HP.`;break;case"MP":pe.mp.current=Math.max(0,pe.mp.current-z),ye=`${ve} perdeu ${z} de MP.`;break}i("mainAttributes",pe),E(se==="heal"?"❤️ Cura / Restauração":"💥 Dano Sofrido",ye),S()},C=z=>{N({type:"action",props:{type:z,title:z==="heal"?"Curar / Restaurar":"Receber Dano / Perder",onConfirm:(K,se)=>_(K,se,z),onClose:S}})},k=(z,K)=>{if(!r)return;const se={name:`Rolagem de ${z}`,components:[{type:"dice",value:"1d20"},{type:"number",value:K,label:"Bônus"}],discordText:`Rolagem de ${z} (1d20${K>=0?"+":""}${K})`};P(se)},P=async z=>{if(!z)return;let K=0,se=[],ye=[];const ve=z.multiplier||1,pe=Q=>{let le=0;if(!Q)return 0;const te=(Q||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return r.mainAttributes&&r.mainAttributes.hasOwnProperty(te)?le=r.mainAttributes[te]||0:r.mainAttributes&&r.mainAttributes.hasOwnProperty(te.toLowerCase())&&(le=r.mainAttributes[te.toLowerCase()]||0),le+=I.attributes[Q]||0,le};if(!(z.components||[]).some(Q=>Q.type==="dice"||Q.type==="critDice")){const Q=Math.floor(Math.random()*20)+1;K+=Q,se.push({type:"dice",value:Q,displayValue:`1d20(${Q})`})}for(let Q=0;Q<ve;Q++)for(const le of z.components||[])if(le.type==="attribute"){const te=le.value,fe=pe(te);K+=fe,se.push({type:"attribute",value:fe,displayValue:`${te}(${fe})`})}else if(le.type==="critDice"){const te=String(le.value||"").match(/(\d+)d(\d+)/i);if(te){const fe=parseInt(te[1],10),At=parseInt(te[2],10);let Ot=[],ft=0;for(let Gt=0;Gt<fe;Gt++){const Lt=Math.floor(Math.random()*At)+1;if(Ot.push(Lt),ft+=Lt,Lt>=(le.critValue||At)){const mi=pe(le.critBonusAttribute)*(le.critBonusMultiplier||1);ft+=mi,ye.push(`Crítico no ${Lt}! Adiciona ${le.critBonusAttribute} (${mi})`)}}K+=ft,se.push({type:"dice",value:ft,displayValue:`${le.value}(${Ot.join("+")})`})}else{const fe=parseInt(le.value,10)||0;K+=fe,se.push({type:"number",value:fe,displayValue:`${fe}`})}}else if(le.type==="dice"){const te=String(le.value||"").match(/(\d+)d(\d+)/i);if(te){const fe=parseInt(te[1],10),At=parseInt(te[2],10);let Ot=[];for(let Gt=0;Gt<fe;Gt++)Ot.push(Math.floor(Math.random()*At)+1);const ft=Ot.reduce((Gt,Lt)=>Gt+Lt,0);K+=ft,se.push({type:"dice",value:ft,displayValue:`${le.value}(${Ot.join("+")})`})}}else if(le.type==="number"){const te=parseInt(le.value,10)||0;K+=te;const fe=le.label?`${le.label}(${te>=0?"+":""}${te})`:`${te}`;se.push({type:"number",value:te,displayValue:fe})}I.dice.forEach(Q=>{const le=(Q.value||"").match(/(\d+)d(\d+)/i);if(le){const te=parseInt(le[1],10),fe=parseInt(le[2],10);let At=[];for(let ft=0;ft<te;ft++)At.push(Math.floor(Math.random()*fe)+1);const Ot=At.reduce((ft,Gt)=>ft+Gt,0);K+=Ot,se.push({type:"dice",value:Ot,displayValue:`${Q.name}(${At.join("+")})`})}else{const te=parseInt(Q.value,10)||0;K+=te,se.push({type:"number",value:te,displayValue:`${Q.name}(${te})`})}});const Ct={HP:0,MP:0};let Kt=[];const Hn=(r.buffs||[]).filter(Q=>Q.isActive),Wn=z.costType&&z.costIsRollResult?-K:parseInt(z.costValue,10)||0;z.costType&&Wn!==0&&(Ct[z.costType]+=Wn,Kt.push(`Ação: ${Wn>=0?"+":""}${Wn} ${z.costType}`));const un={HP:0,MP:0};z.recoverHP&&(un.HP=K,Kt.push(`Recupera: ${K} HP`)),z.recoverMP&&(un.MP=K,Kt.push(`Recupera: ${K} MP`)),Hn.forEach(Q=>{if(Q.costType&&Q.costValue!==void 0){const le=parseInt(Q.costValue,10)||0;le!==0&&(Ct[Q.costType]+=le,Kt.push(`${Q.name}: ${le>=0?"+":""}${le} ${Q.costType}`))}});const li=Math.abs(Math.min(0,Ct.HP)),ui=Math.abs(Math.min(0,Ct.MP));if(r.mainAttributes.hp.current<li||r.mainAttributes.mp.current<ui){N({type:"info",props:{message:"Custo de HP/MP insuficiente!",onConfirm:S}});return}const ci=/(https?:\/\/[^\s]+)/i;let Jo="",Ar=z.discordText||"";const di=Ar.match(ci);if(di&&(Jo=di[0],Ar=Ar.replace(ci,"").trim()),Ct.HP!==0||Ct.MP!==0||un.HP>0||un.MP>0){const Q={...r.mainAttributes};Q.hp.current=Q.hp.current-Ct.HP+un.HP,Q.mp.current=Q.mp.current-Ct.MP+un.MP,Q.hp.current=Math.min(Q.hp.current,Q.hp.max),Q.hp.current=Math.max(Q.hp.current,0),Q.mp.current=Math.min(Q.mp.current,Q.mp.max),Q.mp.current=Math.max(Q.mp.current,0),await i("mainAttributes",Q)}const hi=se.map(Q=>Q.displayValue).join(" + "),Zo=`${Ar}

**Resultado Final: ${K}**`,fi=[{name:"Detalhes da Rolagem",value:hi||"N/A",inline:!1}];ye.length>0&&fi.push({name:"Críticos",value:ye.join(`
`),inline:!1}),Hn.length>0&&fi.push({name:"Buffs Ativos",value:Hn.map(Q=>Q.name).join(", "),inline:!1});const pi=Kt.length>0?`Custo Total: ${Kt.join(" | ")}`:"";E(z.name,Zo,fi,pi,Jo),l({characterId:r.id,characterName:r.name,ownerUid:h.uid,rollName:z.name,results:se,discordText:Ar})},v=()=>{N({type:"confirm",props:{message:`Tem a certeza que deseja resetar PERMANENTEMENTE a ficha de "${r.name}"?`,onConfirm:async()=>{const z={photoUrl:"",age:"",height:"",gender:"",race:"",class:"",alignment:"",level:1,xp:0,mainAttributes:{hp:{current:10,max:10,temp:0},mp:{current:10,max:10},fa:0,fm:0,fd:0,acerto:0,me:0,forca:0,destreza:0,constituicao:0,inteligencia:0,sabedoria:0,carisma:0},attributes:[],inventory:[],wallet:{zeni:0,inspiration:0},advantages:[],disadvantages:[],abilities:[],equippedItems:[],history:[],notes:[],buffs:[],formulaActions:[],discordWebhookUrl:"",skillSystem:{}};for(const[K,se]of Object.entries(z))await i(K,se);S()},onCancel:S}})},m=()=>{const{collapsedStates:z,...K}=r,se=JSON.stringify(K,null,2),ye=new Blob([se],{type:"application/json"}),ve=document.createElement("a");ve.href=URL.createObjectURL(ye),ve.download=`${r.name||"ficha"}.json`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(ve.href)};return s?c.jsx("div",{className:"text-center p-8",children:c.jsx("p",{className:"text-xl text-textSecondary",children:"A carregar ficha..."})}):r?c.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4",children:[c.jsx(Hf,{modalState:b,closeModal:S}),c.jsx(X1,{character:r}),c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 bg-bgSurface hover:opacity-80 text-textPrimary font-bold rounded-lg",children:"← Voltar para a Lista"}),y&&c.jsx("button",{onClick:()=>g(!f),className:"px-4 py-2 bg-btnHighlightBg text-btnHighlightText font-bold rounded-lg shadow-lg",children:f?"🔒 Sair do Modo Edição":"✏️ Entrar no Modo Edição"})]}),c.jsx("div",{id:"info",children:c.jsx(Z1,{character:r,onUpdate:i,isMaster:n,isEditMode:f,isCollapsed:(x=r.collapsedStates)==null?void 0:x.info,toggleSection:()=>o("info")})}),c.jsx("div",{id:"main-attributes",children:c.jsx(eR,{character:r,onUpdate:i,isMaster:n,isEditMode:f,buffModifiers:I.attributes,isCollapsed:(T=r.collapsedStates)==null?void 0:T.main,toggleSection:()=>o("main"),onAttributeRoll:k})}),c.jsx("div",{id:"actions",children:c.jsx(A1,{character:r,isMaster:n,isCollapsed:(R=r.collapsedStates)==null?void 0:R.actions,toggleSection:()=>o("actions"),onOpenActionModal:C,allAttributes:j,onUpdate:i,onExecuteFormula:P,isEditMode:f})}),c.jsx("div",{id:"buffs",children:c.jsx(P1,{character:r,isMaster:n,onUpdate:i,allAttributes:j,isCollapsed:(D=r.collapsedStates)==null?void 0:D.buffs,toggleSection:()=>o("buffs"),isEditMode:f})}),c.jsx("div",{id:"wallet",children:c.jsx(tR,{character:r,isMaster:n,onUpdate:i,isCollapsed:(A=r.collapsedStates)==null?void 0:A.wallet,toggleSection:()=>o("wallet"),isEditMode:f})}),c.jsx("div",{id:"inventory",children:c.jsx(rR,{character:r,onUpdate:i,isMaster:n,onShowDiscord:E,isCollapsed:(J=r.collapsedStates)==null?void 0:J.inventory,toggleSection:()=>o("inventory"),isEditMode:f})}),c.jsx("div",{id:"equipped",children:c.jsx(sR,{character:r,onUpdate:i,isMaster:n,onShowDiscord:E,isCollapsed:(Ee=r.collapsedStates)==null?void 0:Ee.equipped,toggleSection:()=>o("equipped"),isEditMode:f})}),c.jsx("div",{id:"perks",children:c.jsx(oR,{character:r,onUpdate:i,onShowDiscord:E,isCollapsed:(je=r.collapsedStates)==null?void 0:je.perks,toggleSection:()=>o("perks"),isEditMode:f})}),c.jsx("div",{id:"skills",children:c.jsx(iR,{character:r,onUpdate:i,isMaster:n,onShowDiscord:E,isCollapsed:(We=r.collapsedStates)==null?void 0:We.skills,toggleSection:()=>o("skills"),isEditMode:f})}),c.jsx("div",{id:"specializations",children:c.jsx(aR,{character:r,onUpdate:i,isMaster:n,isCollapsed:(B=r.collapsedStates)==null?void 0:B.specializations,toggleSection:()=>o("specializations"),onExecuteFormula:P,isEditMode:f})}),c.jsx("div",{id:"story",children:c.jsx(uR,{character:r,onUpdate:i,isMaster:n,isCollapsed:(Y=r.collapsedStates)==null?void 0:Y.story,toggleSection:()=>o("story"),isEditMode:f})}),c.jsx("div",{id:"notes",children:c.jsx(cR,{character:r,onUpdate:i,isMaster:n,isCollapsed:(X=r.collapsedStates)==null?void 0:X.notes,toggleSection:()=>o("notes"),isEditMode:f})}),c.jsx("div",{id:"discord",children:c.jsx(nR,{character:r,onUpdate:i,isMaster:n,isCollapsed:(xe=r.collapsedStates)==null?void 0:xe.discord,toggleSection:()=>o("discord"),isEditMode:f})}),c.jsx(b1,{character:r,onExport:m,onReset:v})]}):c.jsx("div",{className:"text-center p-8",children:c.jsx("p",{className:"text-xl text-red-400",children:"Erro: Personagem não encontrado."})})},pR=({activeTheme:t,setActiveTheme:e,setPreviewTheme:n})=>{const{user:r,googleSignOut:s,isMaster:i}=Be(),[o,l]=L.useState(null),[u,h]=L.useState([]),f=L.useRef(null),[g,y]=L.useState(!1),[b,N]=L.useState(!1),{currentSystem:S,setCurrentSystem:j,characterDataCollectionRoot:I,GLOBAL_APP_IDENTIFIER:E}=Cu(),[_,C]=L.useState({type:null,props:{}}),k=()=>C({type:null,props:{}});L.useEffect(()=>{if(o!=null&&o.id&&(o!=null&&o.ownerUid)){const J=Os(ln(Ue,`${I}/${E}/users/${o.ownerUid}/characterSheets/${o.id}`),async Ee=>{if(Ee.exists()){const je=Ee.data();if(je.activeThemeId){const We=await oy(je.activeThemeId);e(We)}else e(null)}});return()=>J()}else e(null)},[o,e,I,E,Ue,oy]);const P=()=>{N(!1),n(null)},v=J=>{l(J)},m=async()=>{if(r){console.log("%c[DIAGNÓSTICO DASHBOARD]","color: #00A8E8; font-weight: bold;",`Buscando fichas. isMaster: ${i}, viewingAll: ${g}`);const J=await k1(r.uid,i&&g);h(J)}};L.useEffect(()=>{m()},[r,g,i,I,E]);const x=async()=>{await D1(r.uid)&&m()},T=()=>{f.current.click()},R=J=>{const Ee=J.target.files[0];if(!Ee)return;const je=new FileReader;je.onload=We=>{try{const B=JSON.parse(We.target.result);if(!B.name)throw new Error("Ficheiro JSON inválido ou incompatível.");C({type:"confirm",props:{message:`Deseja criar um novo personagem para o sistema ${S.toUpperCase()} com os dados de "${B.name}"?`,onConfirm:async()=>{const Y=ln(vn(Ue,`${I}/${E}/users/${r.uid}/characterSheets`)),X={...B,ownerUid:r.uid,system:S};delete X.id,await Xo(Y,X),m(),k()},onCancel:k}})}catch(B){C({type:"info",props:{message:`Erro ao ler arquivo: ${B.message}`,onConfirm:k}})}},je.readAsText(Ee),J.target.value=null},D=J=>{const Ee=J.ownerUid||r.uid;C({type:"confirm",props:{message:`Tem a certeza que deseja excluir permanentemente a ficha de "${J.name}" do sistema ${S.toUpperCase()}?`,onConfirm:async()=>{await j1(Ee,J.id)?h(We=>We.filter(B=>B.id!==J.id)):alert("Não foi possível excluir a ficha."),k()},onCancel:k}})},A=c.jsx(K1,{onCharacterClick:v});return c.jsxs(c.Fragment,{children:[A,c.jsx("button",{onClick:()=>N(!0),className:"fixed top-4 right-4 z-[60] px-4 py-2 bg-btnHighlightBg text-btnHighlightText font-bold rounded-lg shadow-lg",children:"Editor de Temas"}),b&&c.jsx(W1,{character:o,originalTheme:t,setPreviewTheme:n,onClose:P}),o?c.jsx(fR,{character:o,onBack:()=>l(null),isMaster:i}):c.jsxs("div",{className:"w-full max-w-5xl mx-auto p-4 md:p-8",children:[c.jsx(Hf,{modalState:_,closeModal:k}),c.jsx("input",{type:"file",ref:f,onChange:R,accept:".json",className:"hidden"}),c.jsxs("header",{className:"flex justify-between items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-textPrimary",children:"Painel StoryCraft V1"}),c.jsxs("p",{className:"text-textSecondary",children:["Bem-vindo, ",r.displayName,"!"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 bg-bgElement hover:bg-opacity-80 text-textPrimary font-semibold rounded-lg shadow-lg",children:"Trocar Sistema"}),c.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg",children:"Sair"})]})]}),c.jsx("main",{children:c.jsx(R1,{user:r,onSelectCharacter:l,handleImportClick:T,handleDeleteClick:D,handleCreateClick:x,characters:u,isMaster:i,viewingAll:g,onToggleView:y})})]})]})};function mR(){return c.jsx("div",{children:"Dashboard do StoryCraft V2 em construção..."})}const gR=t=>{const{currentSystem:e,setCurrentSystem:n}=Cu();return e?c.jsxs(c.Fragment,{children:[e==="v1"&&c.jsx(pR,{...t}),e==="v2"&&c.jsx(mR,{...t})]}):c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-bgPage p-4",children:[c.jsx("h1",{className:"text-4xl font-bold text-textPrimary mb-10",children:"Selecione o Sistema"}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[c.jsxs("div",{onClick:()=>n("v1"),className:"bg-bgSurface border-2 border-borderAccent rounded-lg p-8 w-80 h-60 flex flex-col justify-center items-center text-center cursor-pointer transform hover:scale-105 transition-transform duration-300 shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-textAccent mb-2",children:"StoryCraft V1"}),c.jsx("p",{className:"text-textSecondary",children:"A experiência clássica com temas personalizáveis."})]}),c.jsxs("div",{onClick:()=>n("v2"),className:"bg-bgSurface border-2 border-borderAccent rounded-lg p-8 w-80 h-60 flex flex-col justify-center items-center text-center cursor-pointer transform hover:scale-105 transition-transform duration-300 shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-textAccent mb-2",children:"StoryCraft V2"}),c.jsx("p",{className:"text-textSecondary",children:"O novo sistema com regras de Escala de Poder."})]})]})]})},yR=()=>{const{googleSignIn:t}=Be(),e=async()=>{try{await t()}catch(n){console.error("Erro ao fazer login com o Google:",n)}};return c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-5xl font-bold text-primary mb-2",children:"StoryCraft V2"}),c.jsx("p",{className:"text-xl text-secondary mb-8",children:"Sua ficha de RPG, do seu jeito."}),c.jsx("button",{onClick:e,className:"px-8 py-4 bg-highlight hover:bg-opacity-80 text-primary font-bold rounded-lg shadow-lg text-lg",children:"Entrar com Google"})]})})};function vR(t){if(!t)return"55, 65, 81";const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)}`:"55, 65, 81"}const _R=t=>{const e=document.documentElement;t?(e.style.setProperty("--background-image",t.backgroundImage||"none"),e.style.setProperty("--font-family",t.fontFamily||"ui-sans-serif"),e.style.setProperty("--color-bgSurface-rgb",vR(t.colors.bgSurface)),e.style.setProperty("--surface-opacity",(t.surfaceOpacity||80)/100),e.style.setProperty("--color-bgPage",t.colors.bgPage),e.style.setProperty("--color-bgElement",t.colors.bgElement),e.style.setProperty("--color-bgInput",t.colors.bgInput),e.style.setProperty("--color-textPrimary",t.colors.textPrimary),e.style.setProperty("--color-textSecondary",t.colors.textSecondary),e.style.setProperty("--color-borderAccent",t.colors.borderAccent),e.style.setProperty("--color-textAccent",t.colors.textAccent),e.style.setProperty("--color-btnHighlightBg",t.colors.btnHighlightBg),e.style.setProperty("--color-btnHighlightText",t.colors.btnHighlightText)):(e.style.setProperty("--background-image","none"),e.style.setProperty("--font-family","ui-sans-serif"),e.style.setProperty("--color-bgSurface-rgb","55, 65, 81"),e.style.setProperty("--surface-opacity","0.8"),e.style.setProperty("--color-bgPage","#111827"),e.style.setProperty("--color-bgElement","#374151"),e.style.setProperty("--color-bgInput","#4b5563"),e.style.setProperty("--color-textPrimary","#f9fafb"),e.style.setProperty("--color-textSecondary","#9ca3af"),e.style.setProperty("--color-borderAccent","#f59e0b"),e.style.setProperty("--color-textAccent","#fcd34d"),e.style.setProperty("--color-btnHighlightBg","#8b5cf6"),e.style.setProperty("--color-btnHighlightText","#ffffff"))};function xR(){const{user:t,loading:e}=Be(),[n,r]=L.useState(null),[s,i]=L.useState(null);return L.useEffect(()=>{const o=s||n;_R(o?o.styles:null)},[n,s]),e?c.jsx("div",{className:"bg-bgPage text-textPrimary min-h-screen flex items-center justify-center",children:c.jsx("h1",{className:"text-3xl",children:"A carregar StoryCraft..."})}):c.jsxs("div",{className:"bg-bgPage bg-theme bg-cover bg-center bg-fixed text-textPrimary min-h-screen",children:[t?c.jsxs(c.Fragment,{children:[c.jsx(gR,{activeTheme:n,setActiveTheme:r,previewTheme:s,setPreviewTheme:i}),c.jsx(U1,{})," "]}):c.jsx(yR,{})," "]})}kc.createRoot(document.getElementById("root")).render(c.jsx(xy.StrictMode,{children:c.jsx(S1,{children:c.jsx(E1,{children:c.jsx(F1,{children:c.jsxs(N1,{children:[c.jsx(xR,{})," "]})})})})}));
